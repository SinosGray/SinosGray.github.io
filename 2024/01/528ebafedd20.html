<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Category: 读书笔记 | Sinos_wei's blog</title><meta name="author" content="Sinos"><meta name="copyright" content="Sinos"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta property="og:type" content="article">
<meta property="og:title" content="rfc笔记">
<meta property="og:url" content="https://sinos_wei.gitee.io/2024/01/528ebafedd20.html">
<meta property="og:site_name" content="Sinos_wei&#39;s blog">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://sinos_wei.gitee.io/img/cover/IMG_2440.JPG">
<meta property="article:published_time" content="2024-01-23T07:04:16.000Z">
<meta property="article:modified_time" content="2024-02-15T13:48:18.289Z">
<meta property="article:author" content="Sinos">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://sinos_wei.gitee.io/img/cover/IMG_2440.JPG"><link rel="shortcut icon" href="/img/avatar.jpeg"><link rel="canonical" href="https://sinos_wei.gitee.io/2024/01/528ebafedd20.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?aeddd8219bc5c1e1efdcf5d9cc3218e6";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Category: 读书笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-02-15 21:48:18'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">63</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">194</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">7</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/cover/IMG_2440.JPG')"><nav id="nav"><span id="blog-info"><a href="/" title="Sinos_wei's blog"><span class="site-name">Sinos_wei's blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">rfc笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon fas fa-history"></i><span class="post-meta-label">Updated</span><time datetime="2024-02-15T13:48:18.289Z" title="Updated 2024-02-15 21:48:18">2024-02-15</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="rfc笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><blockquote>

</blockquote>
<span id="more"></span>
<h1 id="rfc6265-http-state"><a target="_blank" rel="noopener" href="https://datatracker.ietf.org/doc/html/rfc6265">rfc6265 http state</a></h1>
<h1 id="rfc7519-jwt"><a target="_blank" rel="noopener" href="https://datatracker.ietf.org/doc/html/rfc7519">rfc7519 jwt</a></h1>
<h1 id="rfc1180-tcpip-tutorial"><a target="_blank" rel="noopener" href="https://www.rfc-editor.org/rfc/rfc1180.txt">rfc1180 tcp/ip tutorial</a></h1>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> ----------------------------</span><br><span class="line"> |    network applications  |</span><br><span class="line"> |                          |</span><br><span class="line"> |...  \ | /  ..  \ | /  ...|</span><br><span class="line"> |     -----      -----     |</span><br><span class="line"> |     |TCP|      |UDP|     |</span><br><span class="line"> |     -----      -----     |</span><br><span class="line"> |         \      /         |</span><br><span class="line"> |         --------         |</span><br><span class="line"> |         |  IP  |         |</span><br><span class="line"> |  -----  -*------         |</span><br><span class="line"> |  |ARP|   |               |</span><br><span class="line"> |  -----   |               |</span><br><span class="line"> |      \   |               |</span><br><span class="line"> |      ------              |</span><br><span class="line"> |      |ENET|              |</span><br><span class="line"> |      ---@--              |</span><br><span class="line"> ----------|-----------------</span><br><span class="line">           |</span><br><span class="line">-----------o--------------------</span><br><span class="line">Ethernet Cable</span><br><span class="line">框（boxes）：表示数据经过计算机时，在这些地方处理数据</span><br><span class="line">框之间的连线（lines）：表示数据的流经路径</span><br><span class="line">最下面的横线：表示一根以太网网线（Ethernet cable）</span><br><span class="line">o 符号：收发器（transceiver）</span><br><span class="line">* 符号：IP 地址</span><br><span class="line">@ 符号：以太网地址</span><br></pre></td></tr></table></figure>
<p>In summary: if it is on an Ethernet it is called an Ethernet frame; if it is between the Ethernet driver and the IP module it is called a IP packet; if it is between the IP module and the UDP module it is called a UDP datagram; if it is between the IP module and the TCP module it is called a TCP segment (more generally, a transport message); and if it is in a network application it is called a application message. <strong>more RFC 1122</strong></p>
<p>不同以太网的两个机器A, B通过路由器 R 间接转发</p>
<ul>
<li>源 IP 和源以太网地址是 A 的。</li>
<li><strong>目的 IP 地址是 B 的 IP 地址</strong>。</li>
<li><strong>目的以太网地址是 R 的以太网地址</strong>：因为 A 的 IP 模块需要将这个 IP 包发送给 R 做转发。</li>
</ul>
<p>hosts 文件相当于计算机本地的 dns 服务器</p>
<p>每个计算机都有自己的路由表 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--------------------------------------------------------------------</span><br><span class="line">|network      direct/indirect flag  router         interface number|</span><br><span class="line">--------------------------------------------------------------------</span><br><span class="line">|223.1.2      direct                &lt;blank&gt;        1               |</span><br><span class="line">|223.1.3      indirect              223.1.2.4      1               |</span><br><span class="line">|223.1.4      indirect              223.1.2.4      1               |</span><br><span class="line">--------------------------------------------------------------------</span><br><span class="line">             TABLE 11.  Alpha Route Table with Numbers</span><br></pre></td></tr></table></figure></p>
<p>UDP <strong>保留了应用定义的消息边界</strong>（message boundary defined by the application） 。它不会将应用的两条消息合并，或者将一条消息做拆分。 TCP 提供了<strong>面向连接的字节流</strong>（ connection-oriented byte stream），而非无连接的数据报传送服务</p>
<h1 id="证书与公钥基础设施"><a target="_blank" rel="noopener" href="https://arthurchiao.art/blog/everything-about-pki-zh/">证书与公钥基础设施</a></h1>
<h1 id="tcp-793-tcp-9293"><a target="_blank" rel="noopener" href="https://www.rfc-editor.org/rfc/rfc793">TCP 793</a> <a target="_blank" rel="noopener" href="https://www.rfc-editor.org/rfc/rfc9293.html">TCP 9293</a></h1>
<p>翻译: https://blog.csdn.net/aigoogle/article/details/121036557</p>
<h2 id="基本数据操作">基本数据操作</h2>
<p>可以把数据看做是连接上的字节流。发送方通过SEND指令发送数据，如果发送的数据中指定了PUSH标志，数据会立即从发送方的缓存中发送出去。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 0                   1                   2                   3</span><br><span class="line"> 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|          Source Port          |       Destination Port        |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|                        Sequence Number                        |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|                    Acknowledgment Number                      |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|  Data |       |C|E|U|A|P|R|S|F|                               |</span><br><span class="line">| Offset| Rsrvd |W|C|R|C|S|S|Y|I|            Window             |</span><br><span class="line">|       |       |R|E|G|K|H|T|N|N|                               |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|           Checksum            |         Urgent Pointer        |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|                           [Options]                           |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">:                             Data                              :</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br></pre></td></tr></table></figure>
<p>校验和: 参与的部分: 伪首部, tcp首部, tcp数据 对IP头部中的每16bit进行二进制求和, 校验和在计算时, 校验和字段视为全 0 伪首部: 伪首部共有12字节: 源IP地址、目的IP地址、保留字节(置0)、传输层协议号(TCP是6)、TCP报文长度(报头+数据)。</p>
<p>每一个字节对应一个序列号</p>
<p>重传队列里是 tcp 包而不是字节流</p>
<p>维护 tcp 连接状态的变量: TCP 控制块(TCB)</p>
<ul>
<li><p>发送序列变量 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SND.UNA - 发送但未确认的</span><br><span class="line">SND.NXT - 下次发送的字节序列号</span><br><span class="line">SND.WND - 发送窗口</span><br><span class="line">SND.UP  - 紧急数据指针</span><br><span class="line">SND.WL1 - 上次更新窗口使用的字节序列号</span><br><span class="line">SND.WL2 - 上次更新窗口使用的确认序列号</span><br><span class="line">ISS     - 初始序列号</span><br><span class="line"></span><br><span class="line">     1         2          3          4</span><br><span class="line">----------|----------|----------|----------</span><br><span class="line">       SND.UNA    SND.NXT    SND.UNA</span><br><span class="line">                            +SND.WND</span><br><span class="line">1 - 已经被确认的字节序列</span><br><span class="line">2 - 未确认的字节序列</span><br><span class="line">3 - 新数据发送可以使用的字节序列</span><br><span class="line">4 - 还没有分配的，未来会用的字节序列号</span><br></pre></td></tr></table></figure></p></li>
<li><p>接受序列变量 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">RCV.NXT - 下次希望接收的字节序列号</span><br><span class="line">RCV.WND - 接收窗口大小</span><br><span class="line">RCV.UP  - 紧急数据指针</span><br><span class="line">IRS     - 连接建立时初始序列号</span><br><span class="line"></span><br><span class="line">   1          2          3</span><br><span class="line">----------|----------|----------</span><br><span class="line">      RCV.NXT    RCV.NXT</span><br><span class="line">                +RCV.WND</span><br><span class="line">1 - 被确认的序列号</span><br><span class="line">2 - 打算接收的序列号</span><br><span class="line">3 - 还未被分配的序列号</span><br></pre></td></tr></table></figure></p></li>
</ul>
<figure>
<img src="https://raw.githubusercontent.com/SinosGray/picgo/master/test/202401231944627.jpeg" alt="img" /><figcaption aria-hidden="true">img</figcaption>
</figure>
<p>closed 状态不存在 TCB</p>
<p>需要注意的是，当接收窗口大小为0时，除了ack数据段以外其他数据段都不会被接收。所以，TCP可以在窗口为0的情况下继续发送数据和接收确认。然而，即使接收窗口为0，TCP也必须接收带有RST和URG标识的数据段。</p>
<p><strong>ISN</strong> 为了避免冲突，当之前连接实体发送的数据段还在网络上传输时，新的连接实体应该避免使用相同的序列号。 处理这个问题的一种方法是在<strong>从重新引导恢复后故意延迟一个 MSL 的发射段</strong>——这就是“安静时间”规范。 当一个新的连接实体建立时，一个初始序列号（ISN）选择器会用来选择一个新的32的初始编号。选择器使用一个32位的时钟（有可能是虚拟的），这个时钟的低位会以4微秒一个的速度增长。所以ISN会大概4.5个小时循环一次。因为我们假定一个数据段在网络中最多存留一个MSL（最大段生命周期）时间段，并且MSG比4.5个小时短很多，所以我们判断，ISN是唯一的。(对于流量特别大的网络可以增加 timestamp 选项继续预防) ISN = M + F(localip, localport, remoteip, remoteport, secretkey) 加密是为了防止有人猜出 ISN 冒充通信</p>
<p><strong>三次握手步骤是必须的</strong>(四次握手的中间两次合并成一次)，接收方收到第一个SYN的时候没有办法确定这个SYN是否是之前连接实例发送的老旧的SYN数据包除非接收方一直保存之前连接使用的最后一个序列号，所以一般接收方需要发送方来检验这个SYN（通过向发送方返回ACK信息）。</p>
<h2 id="tcp静默时间概念"><strong>TCP静默时间概念</strong></h2>
<p>如果在一个主机组成的计算机网络系统中主机突然宕机了并且没有保存所有处于活跃状态（Closed以外的其他状态）的连接的相关状态信息的情况下，主机重启后需要等待约定的一段时间（1 MSL = 2min）才能开始重新建立连接。 这个链接实例发送的数据序列号, 有可能与之前连接实例发送的, 并且在网络中传输中的数据序列号相等或者有重叠。在不了解一个指定的连接之前的序号的情况下，TCP规范规定TCP发送模块应该等待一个MSL时间，来让之前连接实例发送的数据段从网络上排空。 但是当今这个问题已经不再重要 (a) ISS 和临时端口随机化降低了重新启动后重用端口号和序列号的可能性， (b) 随着链路变得更快，互联网的有效 MSL 已经下降，以及 (c) 无论如何，重新启动通常需要比 MSL 更长的时间。</p>
<p>如果没有静默时间</p>
<ol type="1">
<li>重启后新的链接可能收到上次链接的数据包</li>
<li>新的数据可能被当做重复数据丢掉(上次链接的数据顶掉了新数据?)</li>
</ol>
<p>在不了解特定连接上使用的序列号的情况下，TCP 规范建议在连接上发出报文段之前将源延迟 MSL 秒，以便为来自早期连接实体的报文段留出时间从系统中耗尽。</p>
<p>通常情况下如果收到一个不属于本连接实例的数据段的话都要产生并发送重置控制包。如果不确定这个包是不是这个连接的，不能发送重置控制包。</p>
<ol type="1">
<li>当连接不存在时除了reset控制包之外的其他数据包发送过来时，都应该向对端发送一个重置控制包。</li>
<li>如果连接处于非同步状态（LISTEN,SYN-SENT,SYN-RECEIVED）收到了未曾发送过的数据段的确认信息或者收到的数据段的安全等级、隔离级别与当前连接要求的不符合，接收端将会向发送端发送一个重置消息。</li>
</ol>
<p>即使发送窗口为0，TCP发送模块在收到用户传过来的数据后，也要发送最少一个字节。 即使接收窗口为0，发送方也要定时发送数据到接收方, 接收方也要处理 URG 和 RST 报文。 当接收窗口为0时，发送方的数据重试间隔为2分钟。当任一个TCP接收窗口为0时，定时发送数据会把接收方重新打开的窗口通知到发送方，这样是很有必要的。</p>
<p>在这些更高性能(100GB/s)的情况下，TCP 时间戳选项和保护序列保护 (PAWS) [ <a target="_blank" rel="noopener" href="https://www.rfc-editor.org/rfc/rfc9293.html#RFC7323">47</a> ]提供了检测和丢弃旧重复项所需的功能。</p>
<h2 id="whs">3whs</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">    TCP Peer A                                           TCP Peer B</span><br><span class="line">1.  CLOSED                                               LISTEN</span><br><span class="line">2.  SYN-SENT    --&gt; &lt;SEQ=100&gt;&lt;CTL=SYN&gt;               --&gt; SYN-RECEIVED</span><br><span class="line">3.  ESTABLISHED &lt;-- &lt;SEQ=300&gt;&lt;ACK=101&gt;&lt;CTL=SYN,ACK&gt;  &lt;-- SYN-RECEIVED</span><br><span class="line">4.  ESTABLISHED --&gt; &lt;SEQ=101&gt;&lt;ACK=301&gt;&lt;CTL=ACK&gt;       --&gt; ESTABLISHED</span><br><span class="line">5.  ESTABLISHED --&gt; &lt;SEQ=101&gt;&lt;ACK=301&gt;&lt;CTL=ACK&gt;&lt;DATA&gt; --&gt; ESTABLISHED</span><br><span class="line">// ACK 不占用序列号空间</span><br></pre></td></tr></table></figure>
<p>同时启动</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">    TCP Peer A                                       TCP Peer B</span><br><span class="line">1.  CLOSED                                           CLOSED</span><br><span class="line">2.  SYN-SENT     --&gt; &lt;SEQ=100&gt;&lt;CTL=SYN&gt;              ...</span><br><span class="line">3.  SYN-RECEIVED &lt;-- &lt;SEQ=300&gt;&lt;CTL=SYN&gt;              &lt;-- SYN-SENT</span><br><span class="line">4.               ... &lt;SEQ=100&gt;&lt;CTL=SYN&gt;              --&gt; SYN-RECEIVED</span><br><span class="line"></span><br><span class="line">5.  SYN-RECEIVED --&gt; &lt;SEQ=100&gt;&lt;ACK=301&gt;&lt;CTL=SYN,ACK&gt; ...</span><br><span class="line">6.  ESTABLISHED  &lt;-- &lt;SEQ=300&gt;&lt;ACK=101&gt;&lt;CTL=SYN,ACK&gt; &lt;-- SYN-RECEIVED</span><br><span class="line">7.               ... &lt;SEQ=100&gt;&lt;ACK=301&gt;&lt;CTL=SYN,ACK&gt; --&gt; ESTABLISHED</span><br></pre></td></tr></table></figure>
<p>从旧的重复 syn 中恢复</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TCP Peer A                                           TCP Peer B</span><br><span class="line">1.  CLOSED                                               LISTEN</span><br><span class="line">2.  SYN-SENT    --&gt; &lt;SEQ=100&gt;&lt;CTL=SYN&gt;               ...</span><br><span class="line">3.  (duplicate) ... &lt;SEQ=90&gt;&lt;CTL=SYN&gt;               --&gt; SYN-RECEIVED</span><br><span class="line">4.  SYN-SENT    &lt;-- &lt;SEQ=300&gt;&lt;ACK=91&gt;&lt;CTL=SYN,ACK&gt;  &lt;-- SYN-RECEIVED</span><br><span class="line">A 发现 ack 有问题, 重置链接</span><br><span class="line">5.  SYN-SENT    --&gt; &lt;SEQ=91&gt;&lt;CTL=RST&gt;               --&gt; LISTEN</span><br><span class="line">重新开始三次握手</span><br><span class="line">6.              ... &lt;SEQ=100&gt;&lt;CTL=SYN&gt;               --&gt; SYN-RECEIVED</span><br><span class="line">7.  ESTABLISHED &lt;-- &lt;SEQ=400&gt;&lt;ACK=101&gt;&lt;CTL=SYN,ACK&gt;  &lt;-- SYN-RECEIVED</span><br><span class="line">8.  ESTABLISHED --&gt; &lt;SEQ=101&gt;&lt;ACK=401&gt;&lt;CTL=ACK&gt;      --&gt; ESTABLISHED</span><br></pre></td></tr></table></figure>
<p>半开链接: 如果 TCP 对等方之一在另一方不知情的情况下关闭或中止了其一端的连接，或者连接的两端由于故障或原因而变得不同步，则称已建立的连接是“半开”的</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">      TCP Peer A                                      TCP Peer B</span><br><span class="line">  1.  (REBOOT)                              (send 300,receive 100)</span><br><span class="line">  2.  CLOSED                                           ESTABLISHED</span><br><span class="line">  3.  SYN-SENT --&gt; &lt;SEQ=400&gt;&lt;CTL=SYN&gt;              --&gt; (??)</span><br><span class="line">  4.  (!!)     &lt;-- &lt;SEQ=300&gt;&lt;ACK=100&gt;&lt;CTL=ACK&gt;     &lt;-- ESTABLISHED</span><br><span class="line">  5.  SYN-SENT --&gt; &lt;SEQ=100&gt;&lt;CTL=RST&gt;              --&gt; (Abort!!)</span><br><span class="line">  6.  SYN-SENT                                         CLOSED</span><br><span class="line">  7.  SYN-SENT --&gt; &lt;SEQ=400&gt;&lt;CTL=SYN&gt;              --&gt;</span><br><span class="line">  </span><br><span class="line">  主动方导致半开连接发现↓</span><br><span class="line">        TCP Peer A                                         TCP Peer B</span><br><span class="line">1.  (REBOOT)                                  (send 300,receive 100)</span><br><span class="line">2.  (??)    &lt;-- &lt;SEQ=300&gt;&lt;ACK=100&gt;&lt;DATA=10&gt;&lt;CTL=ACK&gt; &lt;-- ESTABLISHED</span><br><span class="line">3.          --&gt; &lt;SEQ=100&gt;&lt;CTL=RST&gt;                   --&gt; (ABORT!!)</span><br></pre></td></tr></table></figure>
<h2 id="复位出现的三种情况">复位出现的三种情况</h2>
<ol type="1">
<li><p>如果连接不存在（CLOSED），则发送重置以响应除另一个重置之外的任何传入分段。通过这种方式，与现有连接不匹配的 SYN 段将被拒绝。</p>
<p>如果传入的段设置了 ACK 位，则重置会从该段的 ACK 字段中获取其序列号；否则，重置的序列号为零，并且 ACK 字段设置为传入分段的序列号和分段长度之和。连接保持在 CLOSED 状态。</p></li>
<li><p>如果连接处于任何非同步状态（LISTEN、SYN-SENT、SYN-RECEIVED），并且传入分段确认尚未发送的内容（分段携带不可接受的 ACK），或者传入分段具有安全级别或如果隔间（<a target="_blank" rel="noopener" href="https://www.rfc-editor.org/rfc/rfc9293.html#seccomp">附录 A.1</a>）与连接请求的级别和隔间不完全匹配，则发送重置。</p>
<p>如果传入的分段具有 ACK 字段，则重置会从该分段的 ACK 字段中获取其序列号；否则，重置的序列号为零，并且 ACK 字段设置为传入分段的序列号和分段长度之和。连接保持相同状态。</p></li>
<li><p>如果连接处于同步状态（ESTABLISHED、FIN-WAIT-1、FIN-WAIT-2、CLOSE-WAIT、CLOSING、LAST-ACK、TIME-WAIT），任何不可接受的段（窗口外序列号或不可接受的确认号）必须用包含当前发送序列号和指示预期接收的下一个序列号的确认的空确认段（没有任何用户数据）进行响应，并且连接保持在相同状态。</p>
<p>如果传入段的安全级别或隔离与连接请求的级别和隔离不完全匹配，则会发送重置并且连接进入 CLOSED 状态。重置从传入分段的 ACK 字段中获取其序列号。</p></li>
</ol>
<h2 id="四次挥手">四次挥手</h2>
<p>CLOSE 的用户可以继续 RECEIVE，直到 TCP receiver被告知远程对等点也已 CLOSE。因此，程序可以启动多个 SEND，然后启动 CLOSE，然后继续接收，直到收到信号表明由于远程对等点已关闭而导致接收失败。 即使没有未完成的 RECEIVE，TCP 实现也会向用户发出远程对等点已关闭的信号，因此用户可以优雅地终止其端。TCP 实现将在连接关闭之前可靠地传送所有已发送的缓冲区，因此不希望返回任何数据的用户只需等待听到连接成功关闭即可知道所有数据均已在目标 TCP 端点处收到。用户必须继续读取他们关闭的发送连接，直到 TCP 实现指示没有更多数据为止。</p>
<p>本质上分为三种情况：</p>
<ul>
<li><p>1）用户通过告诉 TCP 实现关闭连接来启动（<a target="_blank" rel="noopener" href="https://www.rfc-editor.org/rfc/rfc9293.html#normal_close">图 12</a>中的 TCP 对等点 A ）。 A 不再接受 send, 进入 finwait1, A fin 之前的所有段都将重传直到 B 确认</p></li>
<li><p>2）远程 TCP 端点通过发送 FIN 控制信号（<a target="_blank" rel="noopener" href="https://www.rfc-editor.org/rfc/rfc9293.html#normal_close">图 12</a>中的 TCP 对等点 B ）来启动。 B 将用 CLOSE 进行响应，此时 TCP 端点可以在发送任何剩余数据后向另一个 TCP 对等方发送 FIN。TCP 端点然后等待，直到它自己的 FIN 被确认，然后它删除连接。如果未收到 ACK，则在用户超时后，连接将中止并通知用户 如果本地 TCP 连接由于从远程端接收到 FIN 或 RST 而被远程端关闭，则<strong>必须</strong>通知本地应用程序它是正常关闭还是中止</p></li>
<li><p>3）两个用户同时关闭（<a target="_blank" rel="noopener" href="https://www.rfc-editor.org/rfc/rfc9293.html#simul_close">图 13</a>）。</p>
<p>连接两端的用户同时 CLOSE 导致 FIN 段交换（图 13）。当 FIN 之前的所有段均已处理并确认后，每个 TCP 对等方都可以确认其收到的 FIN。双方都会在收到这些 ACK 后删除连接。</p></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">    TCP Peer A                                           TCP Peer B</span><br><span class="line">1.  ESTABLISHED                                          ESTABLISHED</span><br><span class="line">2.  (Close)</span><br><span class="line">    FIN-WAIT-1  --&gt; &lt;SEQ=100&gt;&lt;ACK=300&gt;&lt;CTL=FIN,ACK&gt;  --&gt; CLOSE-WAIT</span><br><span class="line">3.  FIN-WAIT-2  &lt;-- &lt;SEQ=300&gt;&lt;ACK=101&gt;&lt;CTL=ACK&gt;      &lt;-- CLOSE-WAIT</span><br><span class="line">4.                                                       (Close)</span><br><span class="line">    TIME-WAIT   &lt;-- &lt;SEQ=300&gt;&lt;ACK=101&gt;&lt;CTL=FIN,ACK&gt;  &lt;-- LAST-ACK</span><br><span class="line">5.  TIME-WAIT   --&gt; &lt;SEQ=101&gt;&lt;ACK=301&gt;&lt;CTL=ACK&gt;      --&gt; CLOSED</span><br><span class="line">6.  (2 MSL)</span><br><span class="line">    CLOSED</span><br><span class="line">    分别(正常)关闭</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TCP Peer A                                           TCP Peer B</span><br><span class="line">1.  ESTABLISHED                                          ESTABLISHED</span><br><span class="line">2.  (Close)                                              (Close)</span><br><span class="line">    FIN-WAIT-1  --&gt; &lt;SEQ=100&gt;&lt;ACK=300&gt;&lt;CTL=FIN,ACK&gt;  ... FIN-WAIT-1</span><br><span class="line">                &lt;-- &lt;SEQ=300&gt;&lt;ACK=100&gt;&lt;CTL=FIN,ACK&gt;  &lt;--</span><br><span class="line">                ... &lt;SEQ=100&gt;&lt;ACK=300&gt;&lt;CTL=FIN,ACK&gt;  --&gt;</span><br><span class="line">3.  CLOSING     --&gt; &lt;SEQ=101&gt;&lt;ACK=301&gt;&lt;CTL=ACK&gt;      ... CLOSING</span><br><span class="line">                &lt;-- &lt;SEQ=301&gt;&lt;ACK=101&gt;&lt;CTL=ACK&gt;      &lt;--</span><br><span class="line">                ... &lt;SEQ=101&gt;&lt;ACK=301&gt;&lt;CTL=ACK&gt;      --&gt;</span><br><span class="line">4.  TIME-WAIT                                            TIME-WAIT</span><br><span class="line">    (2 MSL)                                              (2 MSL)</span><br><span class="line">    CLOSED                                               CLOSED</span><br><span class="line">    同时关闭</span><br></pre></td></tr></table></figure>
<h3 id="半关闭连接">半关闭连接</h3>
<p>由于 TCP 连接的两个方向是独立关闭的，因此一个连接有可能是“半关闭”的，即仅在一个方向上关闭，而允许主机在半关闭的方向上继续在开放方向上发送数据。 主机<strong>可以</strong>实现“半双工”TCP 关闭序列，从而使调用 CLOSE 的应用程序无法继续从连接读取数据 (MAY-1)。如果这样的主机发出 CLOSE 调用，而接收到的数据仍在 TCP 连接中等待，或者如果在调用 CLOSE 后收到新数据，则其 TCP 实现 <strong>应该</strong>发送 RST 以表明数据已丢失（SHLD-3）。 当主动关闭连接时，它<strong>必须</strong>在 TIME-WAIT 状态中停留 2xMSL（最大段生命周期）的时间 (MUST-13)。但是，它<strong>可以</strong>接受来自远程 TCP 端点的新 SYN，以直接从 TIME-WAIT 状态 (MAY-2) 重新打开连接</p>
<ol type="1">
<li><p>为新连接分配其初始序列号，使其大于其在前一个连接化身中使用的最大序列号，并且</p></li>
<li><p>如果 SYN 被证明是旧的副本，则返回到 TIME-WAIT 状态。</p></li>
</ol>
<h2 id="可靠性">可靠性</h2>
<p>序号, ack, 数据段的校验和</p>
<h2 id="流量控制">流量控制</h2>
<p>接收方控制发送方发送的数据量, 接收方在每次发送确认信息（ACK）的时候携带一个win参数来通知发送方剩余的可发送字节数。</p>
<h2 id="多路复用">多路复用</h2>
<p>端口</p>
<h2 id="连接">连接</h2>
<p>握手</p>
<h2 id="安全">安全</h2>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="https://sinos_wei.gitee.io">Sinos</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://sinos_wei.gitee.io/2024/01/528ebafedd20.html">https://sinos_wei.gitee.io/2024/01/528ebafedd20.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/img/cover/IMG_2440.JPG" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/02/dd88bc85bfa7.html" title="react原理"><img class="cover" src="/img/cover/00000084.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">react原理</div></div></a></div><div class="next-post pull-right"><a href="/2024/01/e6a15612f4ba.html" title="react"><img class="cover" src="/img/cover/00000075.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">react</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Sinos</div><div class="author-info__description">己所不欲, 勿施于人</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">63</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">194</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/SinosGray"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/SinosGray" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1143474942@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="http://8.130.42.149:5230" target="_blank" title="memo"><i class="fab fa-heart"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#rfc6265-http-state"><span class="toc-number">1.</span> <span class="toc-text">rfc6265 http state</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#rfc7519-jwt"><span class="toc-number">2.</span> <span class="toc-text">rfc7519 jwt</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#rfc1180-tcpip-tutorial"><span class="toc-number">3.</span> <span class="toc-text">rfc1180 tcp&#x2F;ip tutorial</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%81%E4%B9%A6%E4%B8%8E%E5%85%AC%E9%92%A5%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD"><span class="toc-number">4.</span> <span class="toc-text">证书与公钥基础设施</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#tcp-793-tcp-9293"><span class="toc-number">5.</span> <span class="toc-text">TCP 793 TCP 9293</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C"><span class="toc-number">5.1.</span> <span class="toc-text">基本数据操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tcp%E9%9D%99%E9%BB%98%E6%97%B6%E9%97%B4%E6%A6%82%E5%BF%B5"><span class="toc-number">5.2.</span> <span class="toc-text">TCP静默时间概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#whs"><span class="toc-number">5.3.</span> <span class="toc-text">3whs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E4%BD%8D%E5%87%BA%E7%8E%B0%E7%9A%84%E4%B8%89%E7%A7%8D%E6%83%85%E5%86%B5"><span class="toc-number">5.4.</span> <span class="toc-text">复位出现的三种情况</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B"><span class="toc-number">5.5.</span> <span class="toc-text">四次挥手</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8A%E5%85%B3%E9%97%AD%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.5.1.</span> <span class="toc-text">半关闭连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AF%E9%9D%A0%E6%80%A7"><span class="toc-number">5.6.</span> <span class="toc-text">可靠性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">5.7.</span> <span class="toc-text">流量控制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8"><span class="toc-number">5.8.</span> <span class="toc-text">多路复用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.9.</span> <span class="toc-text">连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E5%85%A8"><span class="toc-number">5.10.</span> <span class="toc-text">安全</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/01/528ebafedd20.html" title="rfc笔记"><img src="/img/cover/IMG_2440.JPG" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="rfc笔记"/></a><div class="content"><a class="title" href="/2024/01/528ebafedd20.html" title="rfc笔记">rfc笔记</a><time datetime="2024-02-15T13:48:18.289Z" title="Updated 2024-02-15 21:48:18">2024-02-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/07/a6f2ba33bf73.html" title="ts js html"><img src="/img/cover/IMG_4071.PNG" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ts js html"/></a><div class="content"><a class="title" href="/2023/07/a6f2ba33bf73.html" title="ts js html">ts js html</a><time datetime="2024-02-15T06:59:12.693Z" title="Updated 2024-02-15 14:59:12">2024-02-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/e6a15612f4ba.html" title="react"><img src="/img/cover/00000075.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="react"/></a><div class="content"><a class="title" href="/2024/01/e6a15612f4ba.html" title="react">react</a><time datetime="2024-02-14T06:58:10.559Z" title="Updated 2024-02-14 14:58:10">2024-02-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/02/9029ab587ab2.html" title="memo源码笔记"><img src="/img/cover/00000023.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="memo源码笔记"/></a><div class="content"><a class="title" href="/2024/02/9029ab587ab2.html" title="memo源码笔记">memo源码笔记</a><time datetime="2024-02-14T02:47:58.453Z" title="Updated 2024-02-14 10:47:58">2024-02-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/02/dd88bc85bfa7.html" title="react原理"><img src="/img/cover/00000084.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="react原理"/></a><div class="content"><a class="title" href="/2024/02/dd88bc85bfa7.html" title="react原理">react原理</a><time datetime="2024-02-13T13:09:23.113Z" title="Updated 2024-02-13 21:09:23">2024-02-13</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Sinos</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container').forEach(node => {
            if (node.hasAttribute('display')) {
              btf.wrap(node, 'div', { class: 'mathjax-overflow' })
            } else {
              btf.wrap(node, 'span', { class: 'mathjax-overflow' })
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>