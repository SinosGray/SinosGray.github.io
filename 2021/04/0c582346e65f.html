<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>qt | Sinos_wei's blog</title><meta name="author" content="Sinos"><meta name="copyright" content="Sinos"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="qt">
<meta property="og:type" content="article">
<meta property="og:title" content="qt">
<meta property="og:url" content="https://sinos_wei.gitee.io/2021/04/0c582346e65f.html">
<meta property="og:site_name" content="Sinos_wei&#39;s blog">
<meta property="og:description" content="qt">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://sinos_wei.gitee.io/img/cover/2.jpeg">
<meta property="article:published_time" content="2021-04-24T11:32:09.000Z">
<meta property="article:modified_time" content="2023-08-19T07:30:50.173Z">
<meta property="article:author" content="Sinos">
<meta property="article:tag" content="property">
<meta property="article:tag" content="doc">
<meta property="article:tag" content="prop">
<meta property="article:tag" content="cursor">
<meta property="article:tag" content="html">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://sinos_wei.gitee.io/img/cover/2.jpeg"><link rel="shortcut icon" href="/img/avatar.jpeg"><link rel="canonical" href="https://sinos_wei.gitee.io/2021/04/0c582346e65f.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?aeddd8219bc5c1e1efdcf5d9cc3218e6";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'qt',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-08-19 15:30:50'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">59</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">207</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">8</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/cover/2.jpeg')"><nav id="nav"><span id="blog-info"><a href="/" title="Sinos_wei's blog"><span class="site-name">Sinos_wei's blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">qt</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-04-24T11:32:09.000Z" title="Created 2021-04-24 19:32:09">2021-04-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-08-19T07:30:50.173Z" title="Updated 2023-08-19 15:30:50">2023-08-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/language/">language</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="qt"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><blockquote>
<p>qt</p>
</blockquote>
<span id="more"></span>
<h1 id="meta-object-system">meta-object system</h1>
<ol type="1">
<li>The <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qobject.html">QObject</a> class provides a base class for objects that can take advantage of the meta-object system.</li>
<li>The <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qobject.html#Q_OBJECT">Q_OBJECT</a> macro inside the private section of the class declaration is used to enable meta-object features, such as dynamic properties, signals, and slots.</li>
<li>The <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/moc.html">Meta-Object Compiler</a> (<code>moc</code>) supplies each <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qobject.html">QObject</a> subclass with the necessary code to implement meta-object features. (when meet a Q_OBJECT macro in .cpp, poduce another .cpp)</li>
</ol>
<p>qobject_cast(just like dynamic_cast, without RTTI)</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">QObject *obj = <span class="keyword">new</span> MyWidget;</span><br><span class="line">QWidget *widget = <span class="built_in">qobject_cast</span>&lt;QWidget *&gt;(obj);</span><br></pre></td></tr></table></figure>
<h1 id="property-system">property system</h1>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Q_PROPERTY</span>(<span class="type">bool</span> focus READ hasFocus)</span><br><span class="line"><span class="built_in">Q_PROPERTY</span>(<span class="type">bool</span> enabled READ isEnabled WRITE setEnabled)</span><br><span class="line"><span class="built_in">Q_PROPERTY</span>(QCursor cursor READ cursor WRITE setCursor RESET unsetCursor)</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">		<span class="built_in">Q_PROPERTY</span>(QColor color MEMBER m_color NOTIFY colorChanged)</span><br><span class="line">    <span class="built_in">Q_PROPERTY</span>(qreal spacing MEMBER m_spacing NOTIFY spacingChanged)</span><br><span class="line">    <span class="built_in">Q_PROPERTY</span>(QString text MEMBER m_text NOTIFY textChanged)</span><br><span class="line">    ...</span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">colorChanged</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">spacingChanged</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">textChanged</span><span class="params">(<span class="type">const</span> QString &amp;newText)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    QColor  m_color;</span><br><span class="line">    qreal   m_spacing;</span><br><span class="line">    QString m_text;</span><br></pre></td></tr></table></figure>
<ul>
<li>A <code>READ</code> accessor function is required if no <code>MEMBER</code> variable was specified. <strong>It is for reading the property value.</strong> Ideally, a const function is used for this purpose, and it must return either the property's type or a const reference to that type. e.g., <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qwidget.html#focus-prop">QWidget::focus</a> is a read-only property with <code>READ</code> function, <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qwidget.html#focus-prop">QWidget::hasFocus</a>().</li>
<li>A <code>WRITE</code> accessor function is optional. It is for setting the property value. <strong>It must return void and must take exactly one argument</strong>, either of the property's type or a pointer or reference to that type. e.g., <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qwidget.html#enabled-prop">QWidget::enabled</a> has the <code>WRITE</code> function <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qwidget.html#enabled-prop">QWidget::setEnabled</a>(). Read-only properties do not need <code>WRITE</code> functions. e.g., <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qwidget.html#focus-prop">QWidget::focus</a> has no <code>WRITE</code> function.</li>
<li>A <code>MEMBER</code> variable association is required if no <code>READ</code> accessor function is specified. <strong>This makes the given member variable readable and writable</strong> without the need of creating <code>READ</code> and <code>WRITE</code> accessor functions. It's still possible to use <code>READ</code> or <code>WRITE</code> accessor functions in addition to <code>MEMBER</code> variable association (but not both), if you need to control the variable access.</li>
<li>A <code>RESET</code> function is optional. It is for setting the property back to its context specific default value. e.g., <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qwidget.html#cursor-prop">QWidget::cursor</a> has the typical <code>READ</code> and <code>WRITE</code> functions, <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qwidget.html#cursor-prop">QWidget::cursor</a>() and <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qwidget.html#cursor-prop">QWidget::setCursor</a>(), and it also has a <code>RESET</code> function, <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qwidget.html#cursor-prop">QWidget::unsetCursor</a>(), since no call to <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qwidget.html#cursor-prop">QWidget::setCursor</a>() can mean <em>reset to the context specific cursor</em>. The <code>RESET</code> function must return void and take no parameters.</li>
<li>A <code>NOTIFY</code> signal is optional. If defined, <strong>it should specify one existing signal in that class that is emitted whenever the value of the property changes</strong>. <code>NOTIFY</code> signals for <code>MEMBER</code> variables must take zero or one parameter, which must be of the same type as the property. The parameter will take the new value of the property. The <code>NOTIFY</code> signal should only be emitted when the property has really been changed, to avoid bindings being unnecessarily re-evaluated in QML, for example. Qt emits automatically that signal when needed for MEMBER properties that do not have an explicit setter.</li>
<li>A <code>REVISION</code> number or <code>REVISION()</code> macro is optional. If included, it defines the property and its notifier signal to be used in a particular revision of the API (usually for exposure to QML). If not included, it defaults to 0.</li>
<li>The <code>DESIGNABLE</code> attribute indicates whether the property should be visible in the property editor of GUI design tool (e.g., <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qtdesigner-manual.html">Qt Designer</a>). Most properties are <code>DESIGNABLE</code> (default true). Valid values are true and false.</li>
<li>The <code>SCRIPTABLE</code> attribute indicates whether this property should be accessible by a scripting engine (default true). Valid values are true and false.</li>
<li>The <code>STORED</code> attribute indicates whether the property should be thought of as existing on its own or as depending on other values. It also indicates whether the property value must be saved when storing the object's state. Most properties are <code>STORED</code> (default true), but e.g., <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qwidget.html#minimumWidth-prop">QWidget::minimumWidth</a>() has <code>STORED</code> false, because its value is just taken from the width component of property <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qwidget.html#minimumSize-prop">QWidget::minimumSize</a>(), which is a <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qsize.html">QSize</a>.</li>
<li>The <code>USER</code> attribute indicates whether the property is designated as the user-facing or user-editable property for the class. <strong>Normally, there is only one <code>USER</code> property per class</strong> (default false). e.g., <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qabstractbutton.html#checked-prop">QAbstractButton::checked</a> is the user editable property for (checkable) buttons. Note that <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qitemdelegate.html">QItemDelegate</a> gets and sets a widget's <code>USER</code> property.</li>
<li>The <code>BINDABLE bindableProperty</code> attribute indicates that the property supports <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/bindableproperties.html">bindings</a>, and that it is possible to set and inspect bindings to this property via the meta object system (<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qmetaproperty.html">QMetaProperty</a>). <code>bindableProperty</code> names a class member of type <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qbindable.html">QBindable</a><T>, where T is the property type. This attribute was introduced in Qt 6.0.</li>
<li>The presence of the <code>CONSTANT</code> attribute indicates that the property value is constant. For a given object instance, the READ method of a constant property must return the same value every time it is called. This constant value may be different for different instances of the object. A constant property cannot have a WRITE method or a NOTIFY signal.</li>
<li>The presence of the <code>FINAL</code> attribute indicates that the property will not be overridden by a derived class. This can be used for performance optimizations in some cases, but is not enforced by moc. Care must be taken never to override a <code>FINAL</code> property.</li>
<li>The presence of the <code>REQUIRED</code> attribute indicates that the property should be set by a user of the class. This is not enforced by moc, and is mostly useful for classes exposed to QML. In QML, classes with REQUIRED properties cannot be instantiated unless all REQUIRED properties have been set.</li>
</ul>
<p>A property can be read and written using the generic functions <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qobject.html#property">QObject::property</a>() and <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qobject.html#setProperty">QObject::setProperty</a>(), without knowing anything about the owning class except <strong>the property's name</strong>. In the code snippet below, the call to <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qabstractbutton.html#down-prop">QAbstractButton::setDown</a>() and the call to <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qobject.html#setProperty">QObject::setProperty</a>() both set property "down".</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">QPushButton *button = <span class="keyword">new</span> QPushButton;</span><br><span class="line">QObject *object = button;</span><br><span class="line"></span><br><span class="line">button-&gt;<span class="built_in">setDown</span>(<span class="literal">true</span>);</span><br><span class="line">object-&gt;<span class="built_in">setProperty</span>(<span class="string">&quot;down&quot;</span>, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
<h1 id="qt-object">qt object</h1>
<p>Qt Objects should be treated as identities, not as values. Identities are cloned, not copied or assigned, and cloning an identity is a more complex operation than copying or assigning a value. Therefore, <strong><a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qobject.html">QObject</a> and all subclasses of <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qobject.html">QObject</a> (direct or indirect) have their <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qobject.html#no-copy-constructor">copy constructor and assignment operator</a> disabled.</strong></p>
<h1 id="object-tree">object tree</h1>
<p>When you create a <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qobject.html">QObject</a> with another object as parent, it's added to the parent's <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-6/qobject.html#children">children</a>() list, and is deleted when the parent is.</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">QPushButton <span class="title">quit</span><span class="params">(<span class="string">&quot;Quit&quot;</span>)</span></span>;</span><br><span class="line">    QWidget window;</span><br><span class="line"></span><br><span class="line">    quit.<span class="built_in">setParent</span>(&amp;window);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意在 stack 上的情况, 这种情况 child 被析构两次是会异常的.</p>
<h1 id="信号与槽">信号与槽</h1>
<h1 id="tips">Tips</h1>
<ul>
<li>parent object tree, setparent</li>
<li>Qt::QueuedConnection</li>
<li>MOC meta object compiler</li>
<li>Q_DISABLE_COPY, QObject 必须 unique, 以memory 位置确定</li>
<li>QDeleteAll + clear</li>
<li>QScopePointer, QSharedPointer</li>
<li></li>
</ul>
<h1 id="qt-入门">Qt 入门</h1>
<h2 id="what-is-qt">what is Qt</h2>
<p>Qt是一个1991年由Qt Company开发的跨平台C++图形用户界面应用程序开发框架。它既可以开发GUI程序，也可用于开发非GUI程序，比如控制台工具和服务器。Qt是面向对象的框架，使用特殊的代码生成扩展（称为元对象编译器(Meta Object Compiler, moc)）以及一些宏，Qt很容易扩展，并且允许真正地组件编程。基本上，Qt 同X Window上的 Motif，Openwin，GTK 等图形界 面库和 Windows 平台上的MFC，OWL，VCL，ATL 是同类型的东西。</p>
<h2 id="how-to-use-qt">how to use Qt</h2>
<h3 id="安装">安装</h3>
<p><a href="qt.io">Qt 官网</a></p>
<p>在 Qt 官网<a target="_blank" rel="noopener" href="https://www.qt.io/download">下载</a> Qt 及其 IDE QtCreator</p>
<figure>
<img src="https://tva1.sinaimg.cn/large/008i3skNly1gpv2g5txzij30uu0b2gnm.jpg" alt="截屏2021-04-24 下午7.38.05" /><figcaption aria-hidden="true">截屏2021-04-24 下午7.38.05</figcaption>
</figure>
<p>用 MaintenanceTool 下载对应版本和额外的组件.</p>
<p>用 QtCreator 进行开发</p>
<h2 id="简单介绍">简单介绍</h2>
<p>进入 QtCreator 后新建项目可以看到以下选项</p>
<figure>
<img src="https://tva1.sinaimg.cn/large/008i3skNly1gpv2lgzoqtj30vk0dg402.jpg" alt="截屏2021-04-24 下午7.43.14" /><figcaption aria-hidden="true">截屏2021-04-24 下午7.43.14</figcaption>
</figure>
<p>Qt Widgets Application 是新建窗口项目</p>
<p>Qt Console Application 是新建命令行项目</p>
<p>下面以窗口项目进行演示</p>
<h3 id="窗口项目">窗口项目</h3>
<h4 id="目录结构">目录结构</h4>
<figure>
<img src="https://tva1.sinaimg.cn/large/008i3skNly1gpv2pcvrpsj30dg0a6q3t.jpg" alt="截屏2021-04-24 下午7.46.59" /><figcaption aria-hidden="true">截屏2021-04-24 下午7.46.59</figcaption>
</figure>
<p>下面依次介绍一个 Qt 项目的目录</p>
<ul>
<li><p>.pro</p>
<p><code>QT       += core gui</code> 等是代表模块的加载, 如果需要新的模块比如编写 socket 网络内容需要添加如<code>QT       += network</code></p>
<p>之后的目录代码如<code>SOURCES +=     main.cpp mainwindow.cpp</code>是项目文件配置, 一般是自动补充的.</p></li>
<li><p>Headers/</p>
<p>保存项目头文件(.h)</p></li>
<li><p>Sources/</p>
<p>保存项目文件(.cpp)</p></li>
<li><p>Forms/</p>
<p>设计界面</p></li>
<li><p>Other/</p>
<p>其他文件</p></li>
</ul>
<p>代码主要保存在 Sources 和 Headers 文件夹中, ui 设计在 Forms 文件夹中</p>
<h4 id="main-文件与类">main 文件与类</h4>
<p>main.cpp</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;<span class="comment">//新应用</span></span><br><span class="line">    MainWindow w;              <span class="comment">//新窗口</span></span><br><span class="line">    w.<span class="built_in">show</span>();                  <span class="comment">//窗口显示</span></span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();           <span class="comment">//应用执行</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>mainwindow.h</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MAINWINDOW_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAINWINDOW_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMainWindow&gt;</span></span></span><br><span class="line"></span><br><span class="line">QT_BEGIN_NAMESPACE</span><br><span class="line"><span class="keyword">namespace</span> Ui &#123; <span class="keyword">class</span> <span class="title class_">MainWindow</span>; &#125;</span><br><span class="line">QT_END_NAMESPACE</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainWindow</span> : <span class="keyword">public</span> QMainWindow</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line">    <span class="comment">//继承 QObject 类的宏, 在 Qt 中, 所有组件都继承 QObject 类</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MainWindow</span>(QWidget *parent = <span class="literal">nullptr</span>);</span><br><span class="line">    <span class="comment">//构造函数</span></span><br><span class="line">    ~<span class="built_in">MainWindow</span>();</span><br><span class="line">  	<span class="comment">//析构函数</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">    Ui::MainWindow *ui;</span><br><span class="line">  	<span class="comment">//ui 对象指针</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MAINWINDOW_H</span></span></span><br></pre></td></tr></table></figure>
<p>mainwindow.cpp</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mainwindow.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">MainWindow::<span class="built_in">MainWindow</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QMainWindow</span>(parent)</span><br><span class="line">    , <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MainWindow)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">//建立 ui</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MainWindow::~<span class="built_in">MainWindow</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="按钮实例">按钮实例</h4>
<p>下面演示实现一个按钮功能</p>
<ol type="1">
<li><p>在 mainwindow.ui 中拖入 qpushbutton, 在右侧属性栏可以对组件属性进行编辑(比如文字, 大小等) <img src="https://tva1.sinaimg.cn/large/008i3skNly1gpv38m0izgj30rm0dojsw.jpg" alt="截屏2021-04-24 下午8.05.27" /></p></li>
<li><p>如果要对 button 实现点击功能, 可以右键按钮-&gt;转到槽-&gt;clicked(), 就会添加对应的槽函数(可以理解为点击后执行的函数) 具体实现机理请查阅 "<strong>Qt 信号与槽</strong>"</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_pushButton_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>如果要用代码实现对这个按钮进行操作, 比如设置显示文字, 可以参考如下代码</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_pushButton_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ui-&gt;pushButton-&gt;<span class="built_in">setText</span>(<span class="string">&quot;text&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//这个例子是为了说明, 如果要访问这个按钮需要使用 ui 指针</span></span><br><span class="line"><span class="comment">//注意有的时候 ui-&gt;后可能没有对应组件, 一般是新组件未加载, 可以编译一边来解决</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>以上就是基本的 Qt 使用方式.</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="https://sinos_wei.gitee.io">Sinos</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://sinos_wei.gitee.io/2021/04/0c582346e65f.html">https://sinos_wei.gitee.io/2021/04/0c582346e65f.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/property/">property</a><a class="post-meta__tags" href="/tags/doc/">doc</a><a class="post-meta__tags" href="/tags/prop/">prop</a><a class="post-meta__tags" href="/tags/cursor/">cursor</a><a class="post-meta__tags" href="/tags/html/">html</a></div><div class="post_share"><div class="social-share" data-image="/img/cover/2.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/04/7aa96f6293b7.html" title="每个内存_自翻"><img class="cover" src="/img/cover/13.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">每个内存_自翻</div></div></a></div><div class="next-post pull-right"><a href="/2021/04/d4a32827ff58.html" title="启亦临时工"><img class="cover" src="/img/cover/111.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">启亦临时工</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2020/01/b82f68184e81.html" title="how web work"><img class="cover" src="/img/cover/3.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-08-19</div><div class="title">how web work</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Sinos</div><div class="author-info__description">己所不欲, 勿施于人</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">59</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">207</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/SinosGray"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/SinosGray" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1143474942@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="http://8.130.42.149:5230" target="_blank" title="memo"><i class="fab fa-heart"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#meta-object-system"><span class="toc-number">1.</span> <span class="toc-text">meta-object system</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#property-system"><span class="toc-number">2.</span> <span class="toc-text">property system</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#qt-object"><span class="toc-number">3.</span> <span class="toc-text">qt object</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#object-tree"><span class="toc-number">4.</span> <span class="toc-text">object tree</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BF%A1%E5%8F%B7%E4%B8%8E%E6%A7%BD"><span class="toc-number">5.</span> <span class="toc-text">信号与槽</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#tips"><span class="toc-number">6.</span> <span class="toc-text">Tips</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#qt-%E5%85%A5%E9%97%A8"><span class="toc-number">7.</span> <span class="toc-text">Qt 入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#what-is-qt"><span class="toc-number">7.1.</span> <span class="toc-text">what is Qt</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#how-to-use-qt"><span class="toc-number">7.2.</span> <span class="toc-text">how to use Qt</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">7.2.1.</span> <span class="toc-text">安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D"><span class="toc-number">7.3.</span> <span class="toc-text">简单介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AA%97%E5%8F%A3%E9%A1%B9%E7%9B%AE"><span class="toc-number">7.3.1.</span> <span class="toc-text">窗口项目</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">7.3.1.1.</span> <span class="toc-text">目录结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#main-%E6%96%87%E4%BB%B6%E4%B8%8E%E7%B1%BB"><span class="toc-number">7.3.1.2.</span> <span class="toc-text">main 文件与类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E9%92%AE%E5%AE%9E%E4%BE%8B"><span class="toc-number">7.3.1.3.</span> <span class="toc-text">按钮实例</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/05/f05961026253.html" title="数据结构"><img src="/img/cover/43.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据结构"/></a><div class="content"><a class="title" href="/2023/05/f05961026253.html" title="数据结构">数据结构</a><time datetime="2023-09-05T16:31:11.896Z" title="Updated 2023-09-06 00:31:11">2023-09-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/04/9ea3537bedb7.html" title="电影"><img src="/img/cover/8.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="电影"/></a><div class="content"><a class="title" href="/2020/04/9ea3537bedb7.html" title="电影">电影</a><time datetime="2023-09-03T12:41:01.223Z" title="Updated 2023-09-03 20:41:01">2023-09-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/4eb2e1b2c3ff.html" title="system-design"><img src="/img/cover/68.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="system-design"/></a><div class="content"><a class="title" href="/2023/08/4eb2e1b2c3ff.html" title="system-design">system-design</a><time datetime="2023-08-31T03:34:07.014Z" title="Updated 2023-08-31 11:34:07">2023-08-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/07/dd0ba91b15ab.html" title="code-review"><img src="/img/cover/33.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="code-review"/></a><div class="content"><a class="title" href="/2023/07/dd0ba91b15ab.html" title="code-review">code-review</a><time datetime="2023-08-21T14:29:06.086Z" title="Updated 2023-08-21 22:29:06">2023-08-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/b615e50b2d89.html" title="clean-code"><img src="/img/cover/9.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="clean-code"/></a><div class="content"><a class="title" href="/2023/08/b615e50b2d89.html" title="clean-code">clean-code</a><time datetime="2023-08-21T14:19:50.585Z" title="Updated 2023-08-21 22:19:50">2023-08-21</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Sinos</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container').forEach(node => {
            if (node.hasAttribute('display')) {
              btf.wrap(node, 'div', { class: 'mathjax-overflow' })
            } else {
              btf.wrap(node, 'span', { class: 'mathjax-overflow' })
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>