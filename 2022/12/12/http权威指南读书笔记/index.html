<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>http权威指南读书笔记 | Sinos_wei's blog</title><meta name="author" content="Sinos"><meta name="copyright" content="Sinos"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="article">
<meta property="og:title" content="http权威指南读书笔记">
<meta property="og:url" content="https://sinos_wei.gitee.io/2022/12/12/http%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Sinos_wei&#39;s blog">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://sinos_wei.gitee.io/img/cover/IMG_2617.JPG">
<meta property="article:published_time" content="2022-12-11T23:34:21.000Z">
<meta property="article:modified_time" content="2022-12-21T08:13:03.565Z">
<meta property="article:author" content="Sinos">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://sinos_wei.gitee.io/img/cover/IMG_2617.JPG"><link rel="shortcut icon" href="/img/icon.JPG"><link rel="canonical" href="https://sinos_wei.gitee.io/2022/12/12/http%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?aeddd8219bc5c1e1efdcf5d9cc3218e6";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'http权威指南读书笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-12-21 16:13:03'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.PNG" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">33</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">6</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/cover/IMG_2617.JPG')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Sinos_wei's blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">http权威指南读书笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-12-11T23:34:21.000Z" title="Created 2022-12-12 07:34:21">2022-12-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2022-12-21T08:13:03.565Z" title="Updated 2022-12-21 16:13:03">2022-12-21</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="http权威指南读书笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><blockquote>
</blockquote>
<span id="more"></span>

<h1 id="第1章HTTP概述"><a href="#第1章HTTP概述" class="headerlink" title="第1章HTTP概述"></a>第1章HTTP概述</h1><h2 id="1-1-HTTP——因特网的多媒体信使"><a href="#1-1-HTTP——因特网的多媒体信使" class="headerlink" title="1.1 HTTP——因特网的多媒体信使"></a>1.1 HTTP——因特网的多媒体信使</h2><h2 id="1-2-Web客户端和服务器"><a href="#1-2-Web客户端和服务器" class="headerlink" title="1.2 Web客户端和服务器"></a>1.2 Web客户端和服务器</h2><h2 id="1-3资源"><a href="#1-3资源" class="headerlink" title="1.3资源"></a>1.3资源</h2><h3 id="1-3-1媒体类型"><a href="#1-3-1媒体类型" class="headerlink" title="1.3.1媒体类型"></a>1.3.1媒体类型</h3><p>MIME (multipurpose internet mail extensions)</p>
<h3 id="1-3-2-URI"><a href="#1-3-2-URI" class="headerlink" title="1.3.2 URI"></a>1.3.2 URI</h3><p>URI uniform resource identifier</p>
<h3 id="1-3-3-URL"><a href="#1-3-3-URL" class="headerlink" title="1.3.3 URL"></a>1.3.3 URL</h3><p>uniform resource link</p>
<h3 id="1-3-4-URN"><a href="#1-3-4-URN" class="headerlink" title="1.3.4 URN"></a>1.3.4 URN</h3><p>uniform resource name</p>
<h2 id="1-4事务"><a href="#1-4事务" class="headerlink" title="1.4事务"></a>1.4事务</h2><p>一个HTTP事务由一条(从客户端发往服务器的)请求命令和一个(从服务器发回客户端的)响应结果组成。这种通信是通过名为HTTP报文(HTTP message)的格式化数据块进行的</p>
<h3 id="1-4-1方法"><a href="#1-4-1方法" class="headerlink" title="1.4.1方法"></a>1.4.1方法</h3><h3 id="1-4-2状态码"><a href="#1-4-2状态码" class="headerlink" title="1.4.2状态码"></a>1.4.2状态码</h3><h3 id="1-4-3-Web页面中可以包含多个对象"><a href="#1-4-3-Web页面中可以包含多个对象" class="headerlink" title="1.4.3 Web页面中可以包含多个对象"></a>1.4.3 Web页面中可以包含多个对象</h3><h2 id="1-5报文"><a href="#1-5报文" class="headerlink" title="1.5报文"></a>1.5报文</h2><h2 id="1-6连接"><a href="#1-6连接" class="headerlink" title="1.6连接"></a>1.6连接</h2><h3 id="1-6-1-TCPIP"><a href="#1-6-1-TCPIP" class="headerlink" title="1.6.1 TCPIP"></a>1.6.1 TCPIP</h3><h3 id="1-6-2连接、IP地址及端口号"><a href="#1-6-2连接、IP地址及端口号" class="headerlink" title="1.6.2连接、IP地址及端口号"></a>1.6.2连接、IP地址及端口号</h3><p>http 默认 port 80</p>
<h3 id="1-6-3使用Telnet实例"><a href="#1-6-3使用Telnet实例" class="headerlink" title="1.6.3使用Telnet实例"></a>1.6.3使用Telnet实例</h3><h2 id="1-7协议版本"><a href="#1-7协议版本" class="headerlink" title="1.7协议版本"></a>1.7协议版本</h2><h2 id="1-8-Web的结构组件"><a href="#1-8-Web的结构组件" class="headerlink" title="1.8 Web的结构组件"></a>1.8 Web的结构组件</h2><h3 id="1-8-1代理"><a href="#1-8-1代理" class="headerlink" title="1.8.1代理"></a>1.8.1代理</h3><h3 id="1-8-2缓存"><a href="#1-8-2缓存" class="headerlink" title="1.8.2缓存"></a>1.8.2缓存</h3><h3 id="1-8-3网关"><a href="#1-8-3网关" class="headerlink" title="1.8.3网关"></a>1.8.3网关</h3><h3 id="1-8-4隧道"><a href="#1-8-4隧道" class="headerlink" title="1.8.4隧道"></a>1.8.4隧道</h3><h3 id="1-8-5-Agent代理"><a href="#1-8-5-Agent代理" class="headerlink" title="1.8.5 Agent代理"></a>1.8.5 Agent代理</h3><h2 id="1-9起始部分的结束语"><a href="#1-9起始部分的结束语" class="headerlink" title="1.9起始部分的结束语"></a>1.9起始部分的结束语</h2><h2 id="1-10更多信息"><a href="#1-10更多信息" class="headerlink" title="1.10更多信息"></a>1.10更多信息</h2><h3 id="1-10-1-HTTP协议信息"><a href="#1-10-1-HTTP协议信息" class="headerlink" title="1.10.1 HTTP协议信息"></a>1.10.1 HTTP协议信息</h3><h3 id="1-10-2历史透视"><a href="#1-10-2历史透视" class="headerlink" title="1.10.2历史透视"></a>1.10.2历史透视</h3><h3 id="1-10-3其他万维网信息"><a href="#1-10-3其他万维网信息" class="headerlink" title="1.10.3其他万维网信息"></a>1.10.3其他万维网信息</h3><h1 id="第2章URL与资源"><a href="#第2章URL与资源" class="headerlink" title="第2章URL与资源"></a>第2章URL与资源</h1><h2 id="2-1浏览因特网资源"><a href="#2-1浏览因特网资源" class="headerlink" title="2.1浏览因特网资源"></a>2.1浏览因特网资源</h2><p><a target="_blank" rel="noopener" href="http://www.joes-hardware.com/seasonal/index-fall.html">http://www.joes-hardware.com/seasonal/index-fall.html</a></p>
<p>url 方案 + 服务器位置 + 资源路径</p>
<h2 id="2-2-URL的语法"><a href="#2-2-URL的语法" class="headerlink" title="2.2 URL的语法"></a>2.2 URL的语法</h2><h3 id="2-2-1方案——使用什么协议"><a href="#2-2-1方案——使用什么协议" class="headerlink" title="2.2.1方案——使用什么协议"></a>2.2.1方案——使用什么协议</h3><h3 id="2-2-2主机与端口"><a href="#2-2-2主机与端口" class="headerlink" title="2.2.2主机与端口"></a>2.2.2主机与端口</h3><h3 id="2-2-3用户名和密码"><a href="#2-2-3用户名和密码" class="headerlink" title="2.2.3用户名和密码"></a>2.2.3用户名和密码</h3><h3 id="2-2-4路径"><a href="#2-2-4路径" class="headerlink" title="2.2.4路径"></a>2.2.4路径</h3><h3 id="2-2-5参数"><a href="#2-2-5参数" class="headerlink" title="2.2.5参数"></a>2.2.5参数</h3><p> <a href="ftp://prep.ai.mit.edu/pub/gnu;type=d">ftp://prep.ai.mit.edu/pub/gnu;type=d</a></p>
<h3 id="2-2-6查询字符串"><a href="#2-2-6查询字符串" class="headerlink" title="2.2.6查询字符串"></a>2.2.6查询字符串</h3><p><a target="_blank" rel="noopener" href="http://www.joes-hardware.com/inventory-check.cgi?item=12731&color=blue">http://www.joes-hardware.com/inventory-check.cgi?item=12731&amp;color=blue</a></p>
<p>?属性&#x3D;属性&amp;属性&#x3D;属性</p>
<h3 id="2-2-7片段"><a href="#2-2-7片段" class="headerlink" title="2.2.7片段"></a>2.2.7片段</h3><p><a target="_blank" rel="noopener" href="http://www.joes-hardware.com/tools.html#drills">http://www.joes-hardware.com/tools.html#drills</a></p>
<p>#标签</p>
<p>客户端不能将片段传给服务器, 浏览器会根据片段显示感兴趣的资源</p>
<h2 id="2-3-URL快捷方式"><a href="#2-3-URL快捷方式" class="headerlink" title="2.3 URL快捷方式"></a>2.3 URL快捷方式</h2><h3 id="2-3-1相对URL"><a href="#2-3-1相对URL" class="headerlink" title="2.3.1相对URL"></a>2.3.1相对URL</h3><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h90qdsgbi4j30wo0tmwhy.jpg" alt="截屏2022-12-12 08.40.20"></p>
<h3 id="2-3-2自动扩展URL"><a href="#2-3-2自动扩展URL" class="headerlink" title="2.3.2自动扩展URL"></a>2.3.2自动扩展URL</h3><h2 id="2-4各种令人头疼的字符"><a href="#2-4各种令人头疼的字符" class="headerlink" title="2.4各种令人头疼的字符"></a>2.4各种令人头疼的字符</h2><h3 id="2-4-1-URL字符集"><a href="#2-4-1-URL字符集" class="headerlink" title="2.4.1 URL字符集"></a>2.4.1 URL字符集</h3><h3 id="2-4-2编码机制"><a href="#2-4-2编码机制" class="headerlink" title="2.4.2编码机制"></a>2.4.2编码机制</h3><p>%hex_1 hex_2 表示 ascii 码</p>
<h3 id="2-4-3字符限制"><a href="#2-4-3字符限制" class="headerlink" title="2.4.3字符限制"></a>2.4.3字符限制</h3><h3 id="2-4-4另外一点说明"><a href="#2-4-4另外一点说明" class="headerlink" title="2.4.4另外一点说明"></a>2.4.4另外一点说明</h3><h2 id="2-5方案的世界"><a href="#2-5方案的世界" class="headerlink" title="2.5方案的世界"></a>2.5方案的世界</h2><p>mailto:<a href="mailto:&#106;&#x6f;&#x65;&#64;&#x6a;&#x6f;&#x65;&#115;&#x2d;&#x68;&#97;&#x72;&#100;&#119;&#97;&#114;&#101;&#x2e;&#99;&#111;&#x6d;">&#106;&#x6f;&#x65;&#64;&#x6a;&#x6f;&#x65;&#115;&#x2d;&#x68;&#97;&#x72;&#100;&#119;&#97;&#114;&#101;&#x2e;&#99;&#111;&#x6d;</a><br><a href="ftp://anonymous:joe%40joeshardware.com@prep.ai.mit.edu/pub/gnu/">ftp://anonymous:joe%40joeshardware.com@prep.ai.mit.edu:21/pub/gnu/</a></p>
<p>file:&#x2F;&#x2F;&#x2F;Users&#x2F;akunda&#x2F;Downloads&#x2F;HTTP%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%EF%BC%88%E4%B8%AD%E6%96%87%E7%89%88ocr%EF%BC%89.pdf</p>
<h2 id="2-6未来展望"><a href="#2-6未来展望" class="headerlink" title="2.6未来展望"></a>2.6未来展望</h2><h2 id="2-7更多信息"><a href="#2-7更多信息" class="headerlink" title="2.7更多信息"></a>2.7更多信息</h2><h1 id="第3章-HTTP报文"><a href="#第3章-HTTP报文" class="headerlink" title="第3章 HTTP报文"></a>第3章 HTTP报文</h1><h2 id="3-1报文流"><a href="#3-1报文流" class="headerlink" title="3.1报文流"></a>3.1报文流</h2><h3 id="3-1-1报文流入源端服务器"><a href="#3-1-1报文流入源端服务器" class="headerlink" title="3.1.1报文流入源端服务器"></a>3.1.1报文流入源端服务器</h3><h3 id="3-1-2报文向下游流动"><a href="#3-1-2报文向下游流动" class="headerlink" title="3.1.2报文向下游流动"></a>3.1.2报文向下游流动</h3><h2 id="3-2报文的组成部分"><a href="#3-2报文的组成部分" class="headerlink" title="3.2报文的组成部分"></a>3.2报文的组成部分</h2><p>起始行和首部是 ascii 文本</p>
<h3 id="3-2-1报文的语法"><a href="#3-2-1报文的语法" class="headerlink" title="3.2.1报文的语法"></a>3.2.1报文的语法</h3><h3 id="3-2-2起始行"><a href="#3-2-2起始行" class="headerlink" title="3.2.2起始行"></a>3.2.2起始行</h3><h3 id="3-2-3首部"><a href="#3-2-3首部" class="headerlink" title="3.2.3首部"></a>3.2.3首部</h3><h3 id="3-2-4实体的主体部分"><a href="#3-2-4实体的主体部分" class="headerlink" title="3.2.4实体的主体部分"></a>3.2.4实体的主体部分</h3><h4 id="3-2-5版本0-9的报文"><a href="#3-2-5版本0-9的报文" class="headerlink" title="3.2.5版本0.9的报文"></a>3.2.5版本0.9的报文</h4><h2 id="3-3方法"><a href="#3-3方法" class="headerlink" title="3.3方法"></a>3.3方法</h2><h3 id="3-3-1-安全方法"><a href="#3-3-1-安全方法" class="headerlink" title="3.3.1 安全方法"></a>3.3.1 安全方法</h3><p>get head, 使用这类 http 请求不会在服务器上产生什么结果</p>
<h3 id="3-3-2-GET"><a href="#3-3-2-GET" class="headerlink" title="3.3.2 GET"></a>3.3.2 GET</h3><h3 id="3-3-3-HEAD"><a href="#3-3-3-HEAD" class="headerlink" title="3.3.3 HEAD"></a>3.3.3 HEAD</h3><p>服务器开发者必须确保返回的首部与 GET 请求所返回的首部完全相同。遵循 HTTP&#x2F;1.1 规范，就必须实现 HEAD 方法。</p>
<h3 id="3-3-4-PUT"><a href="#3-3-4-PUT" class="headerlink" title="3.3.4 PUT"></a>3.3.4 PUT</h3><p>将请求的主体部分存储在服务器上, 具有幂等性</p>
<p>PUT 方法的语义就是让服务器用请求的主体部分来创建 1 个由所请求的 URL 命名的新文档，或者，如果那个 URL 已经存在的话，就用这个主体来替代它。</p>
<h3 id="3-3-5-POST"><a href="#3-3-5-POST" class="headerlink" title="3.3.5 POST"></a>3.3.5 POST</h3><p>向服务器发送需要处理的数据</p>
<p>通常用啦支持表单(form)</p>
<h3 id="3-3-6-TRACE"><a href="#3-3-6-TRACE" class="headerlink" title="3.3.6 TRACE"></a>3.3.6 TRACE</h3><h3 id="3-3-7-OPTIONS"><a href="#3-3-7-OPTIONS" class="headerlink" title="3.3.7 OPTIONS"></a>3.3.7 OPTIONS</h3><h3 id="3-3-8-DELETE"><a href="#3-3-8-DELETE" class="headerlink" title="3.3.8 DELETE"></a>3.3.8 DELETE</h3><h3 id="3-3-9扩展方法"><a href="#3-3-9扩展方法" class="headerlink" title="3.3.9扩展方法"></a>3.3.9扩展方法</h3><h2 id="3-4状态码"><a href="#3-4状态码" class="headerlink" title="3.4状态码"></a>3.4状态码</h2><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h9147yyfyhj30ts0hydil.jpg" alt="截屏2022-12-12 16.39.11"></p>
<p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h91489y6kpj30te13y45b.jpg" alt="截屏2022-12-12 16.39.28"></p>
<p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h9148igds3j30te0x2tei.jpg" alt="截屏2022-12-12 16.39.39"></p>
<h2 id="3-5首部"><a href="#3-5首部" class="headerlink" title="3.5首部"></a>3.5首部</h2><h3 id="3-5-1通用首部"><a href="#3-5-1通用首部" class="headerlink" title="3.5.1通用首部"></a>3.5.1通用首部</h3><h3 id="3-5-2请求首部"><a href="#3-5-2请求首部" class="headerlink" title="3.5.2请求首部"></a>3.5.2请求首部</h3><h3 id="3-5-3响应首部"><a href="#3-5-3响应首部" class="headerlink" title="3.5.3响应首部"></a>3.5.3响应首部</h3><h3 id="3-5-4实体首部"><a href="#3-5-4实体首部" class="headerlink" title="3.5.4实体首部"></a>3.5.4实体首部</h3><h2 id="3-6更多信息"><a href="#3-6更多信息" class="headerlink" title="3.6更多信息"></a>3.6更多信息</h2><h1 id="第4章-连接管理"><a href="#第4章-连接管理" class="headerlink" title="第4章 连接管理"></a>第4章 连接管理</h1><h2 id="4-1-TCP连接"><a href="#4-1-TCP连接" class="headerlink" title="4.1 TCP连接"></a>4.1 TCP连接</h2><h3 id="4-1-1-TCP的可靠数据管道"><a href="#4-1-1-TCP的可靠数据管道" class="headerlink" title="4.1.1 TCP的可靠数据管道"></a>4.1.1 TCP的可靠数据管道</h3><h3 id="4-1-2-TCP流是分段的、由IP分组传送"><a href="#4-1-2-TCP流是分段的、由IP分组传送" class="headerlink" title="4.1.2 TCP流是分段的、由IP分组传送"></a>4.1.2 TCP流是分段的、由IP分组传送</h3><h3 id="4-1-3保持TCP连接的正确运行"><a href="#4-1-3保持TCP连接的正确运行" class="headerlink" title="4.1.3保持TCP连接的正确运行"></a>4.1.3保持TCP连接的正确运行</h3><h3 id="4-1-4用TCP套接字编程"><a href="#4-1-4用TCP套接字编程" class="headerlink" title="4.1.4用TCP套接字编程"></a>4.1.4用TCP套接字编程</h3><h2 id="4-2对TCP性能的考虑"><a href="#4-2对TCP性能的考虑" class="headerlink" title="4.2对TCP性能的考虑"></a>4.2对TCP性能的考虑</h2><h3 id="4-2-1-HTTP事务的时延"><a href="#4-2-1-HTTP事务的时延" class="headerlink" title="4.2.1 HTTP事务的时延"></a>4.2.1 HTTP事务的时延</h3><h3 id="4-2-2-性能聚焦区域"><a href="#4-2-2-性能聚焦区域" class="headerlink" title="4.2.2 性能聚焦区域"></a>4.2.2 性能聚焦区域</h3><p>TCP 连接建立握手</p>
<p>TCP 慢启动拥塞控制</p>
<p> 数据聚集的 Nagle 算法</p>
<p> 用于捎带确认的 TCP 延迟确认算法</p>
<p>TIME_WAIT 时延和端口耗尽</p>
<h3 id="4-2-3-TCP连接的握手时延"><a href="#4-2-3-TCP连接的握手时延" class="headerlink" title="4.2.3 TCP连接的握手时延"></a>4.2.3 TCP连接的握手时延</h3><p>tcp 三次握手</p>
<h3 id="4-2-4延迟确认"><a href="#4-2-4延迟确认" class="headerlink" title="4.2.4延迟确认"></a>4.2.4延迟确认</h3><p>延迟确认算法会在一个特定的窗口时间（通常是100~ 200毫 秒）内将输出确认存放在<strong>缓冲区</strong>中，以寻找能够捎带它的输出数据分组。如果在那 个时间段内没有输出数据分组，就将确认信息放在单独的分组中传送。</p>
<p>一问一答的模式会被这种算法限制速度, 可以禁用</p>
<h3 id="4-2-5-TCP慢启动"><a href="#4-2-5-TCP慢启动" class="headerlink" title="4.2.5 TCP慢启动"></a>4.2.5 TCP慢启动</h3><p>可以使用持久连接</p>
<h3 id="4-2-6-Nagle算法与TCP-NODELAY"><a href="#4-2-6-Nagle算法与TCP-NODELAY" class="headerlink" title="4.2.6 Nagle算法与TCP_NODELAY"></a>4.2.6 Nagle算法与TCP_NODELAY</h3><p>Nagle 算法（根据其发明者 John Nagle 命名）试图在发送一个分组之前，将大量 TCP 数据绑定在一起，以提高网络效率。RFC 896 “TP&#x2F;TCP 互连网络中的拥塞控 制”对此算法进行了描述。它鼓励发送全尺寸的tcp 段 (LAN 1500 bytes)</p>
<p>用 TCP_NODELAY 禁用 nagle 算法</p>
<h3 id="4-2-7-TIME-WAIT累积与端口耗尽"><a href="#4-2-7-TIME-WAIT累积与端口耗尽" class="headerlink" title="4.2.7 TIME_WAIT累积与端口耗尽"></a>4.2.7 TIME_WAIT累积与端口耗尽</h3><p>2MSL </p>
<h2 id="4-3-HTTP连接的处理"><a href="#4-3-HTTP连接的处理" class="headerlink" title="4.3 HTTP连接的处理"></a>4.3 HTTP连接的处理</h2><h3 id="4-3-1常被误解的Connection首部"><a href="#4-3-1常被误解的Connection首部" class="headerlink" title="4.3.1常被误解的Connection首部"></a>4.3.1常被误解的Connection首部</h3><p>逐跳首部, 跳完删除</p>
<p>HTTP 应用程序收到一条带有 Connection 首部的报文时，接收端会解析发送端 请求的所有选项，并将其应用。<br>然后会在将此报文转发给下一跳地址之前，<strong>删除 Connection 首部以及 Connection 中列出的所有首部。</strong></p>
<h3 id="4-3-2串行事务处理时延"><a href="#4-3-2串行事务处理时延" class="headerlink" title="4.3.2串行事务处理时延"></a>4.3.2串行事务处理时延</h3><h2 id="4-4并行连接"><a href="#4-4并行连接" class="headerlink" title="4.4并行连接"></a>4.4并行连接</h2><h3 id="4-4-1并行连接可能会提高页面的加载速度"><a href="#4-4-1并行连接可能会提高页面的加载速度" class="headerlink" title="4.4.1并行连接可能会提高页面的加载速度"></a>4.4.1并行连接可能会提高页面的加载速度</h3><h3 id="4-4-2并行连接不一定更快"><a href="#4-4-2并行连接不一定更快" class="headerlink" title="4.4.2并行连接不一定更快"></a>4.4.2并行连接不一定更快</h3><p>可能原因是因为带宽不足</p>
<h3 id="4-4-3并行连接可能让人“感觉”更快一些"><a href="#4-4-3并行连接可能让人“感觉”更快一些" class="headerlink" title="4.4.3并行连接可能让人“感觉”更快一些"></a>4.4.3并行连接可能让人“感觉”更快一些</h3><h2 id="4-5持久连接"><a href="#4-5持久连接" class="headerlink" title="4.5持久连接"></a>4.5持久连接</h2><p>减少开销: 慢启动, 连接建立</p>
<h3 id="4-5-1-持久以及并行连接"><a href="#4-5-1-持久以及并行连接" class="headerlink" title="4.5.1 持久以及并行连接"></a>4.5.1 持久以及并行连接</h3><h4 id="4-5-2-HTTP-x2F-1-0-keep-alive连接"><a href="#4-5-2-HTTP-x2F-1-0-keep-alive连接" class="headerlink" title="4.5.2 HTTP&#x2F;1.0+ keep-alive连接"></a>4.5.2 HTTP&#x2F;1.0+ keep-alive连接</h4><h3 id="4-5-3-Keep-Alive操作"><a href="#4-5-3-Keep-Alive操作" class="headerlink" title="4.5.3 Keep-Alive操作"></a>4.5.3 Keep-Alive操作</h3><h3 id="4-5-4-Keep-Alive选项"><a href="#4-5-4-Keep-Alive选项" class="headerlink" title="4.5.4 Keep-Alive选项"></a>4.5.4 Keep-Alive选项</h3><h3 id="4-5-5-Keep-Alive连接的限制和规则"><a href="#4-5-5-Keep-Alive连接的限制和规则" class="headerlink" title="4.5.5 Keep-Alive连接的限制和规则"></a>4.5.5 Keep-Alive连接的限制和规则</h3><h3 id="4-5-6-Keep-Alive和哑代理"><a href="#4-5-6-Keep-Alive和哑代理" class="headerlink" title="4.5.6 Keep-Alive和哑代理"></a>4.5.6 Keep-Alive和哑代理</h3><p>盲中继: 不理解 connection 首部的代理</p>
<p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h96wg3r99pj30wm0g00uh.jpg" alt="截屏2022-12-13 04.53.16"></p>
<p>因此代理必须删除 connection 中的首部</p>
<h3 id="4-5-7插入Proxy-Connection"><a href="#4-5-7插入Proxy-Connection" class="headerlink" title="4.5.7插入Proxy-Connection"></a>4.5.7插入Proxy-Connection</h3><p>在网景的变通做法是，浏览器会向代理发送非标准的 Proxy-Connection 扩展首部，而不是官方支持的著名的 Connection 首部。如果代理是盲中继，它会将无意义的 Proxy-Connection 首部转发给 Web 服务器，服务器会忽略此首部，不会带来任何问题。<br>但如果代理是个聪明的代理（能够理解持久连接的握手动作)，就用一个 Connection 首部取代无意义的 Proxy-Connection 首部，然后将其发送给服务器，以收到预期的效果。</p>
<h4 id="4-5-8-HTTP-x2F-1-1持久连接"><a href="#4-5-8-HTTP-x2F-1-1持久连接" class="headerlink" title="4.5.8 HTTP&#x2F; 1.1持久连接"></a>4.5.8 HTTP&#x2F; 1.1持久连接</h4><p>默认激活</p>
<h3 id="4-5-9持久连接的限制和规则"><a href="#4-5-9持久连接的限制和规则" class="headerlink" title="4.5.9持久连接的限制和规则"></a>4.5.9持久连接的限制和规则</h3><p>“如果客户端不想在连接上发送其他请求了，就应该在最后一条请求中发送一个 Conneetion: close 请求首部。</p>
<p>HTTP&#x2F;1.1 的代理必须能够分别管理与客户端和服务器的持久连接——每个持久 连接都只适用于<strong>一跳传输</strong>。</p>
<h2 id="4-6管道化连接"><a href="#4-6管道化连接" class="headerlink" title="4.6管道化连接"></a>4.6管道化连接</h2><h2 id="4-7关闭连接的奥秘"><a href="#4-7关闭连接的奥秘" class="headerlink" title="4.7关闭连接的奥秘"></a>4.7关闭连接的奥秘</h2><h3 id="4-7-1“任意”解除连接"><a href="#4-7-1“任意”解除连接" class="headerlink" title="4.7.1“任意”解除连接"></a>4.7.1“任意”解除连接</h3><h3 id="4-7-2-Content-Length及截尾操作"><a href="#4-7-2-Content-Length及截尾操作" class="headerlink" title="4.7.2 Content-Length及截尾操作"></a>4.7.2 Content-Length及截尾操作</h3><p>任何 http 响应都应该有明确的 content-length 首部, 用来预防连接的突然关闭</p>
<h3 id="4-7-3连接关闭容限、重试以及幂等性"><a href="#4-7-3连接关闭容限、重试以及幂等性" class="headerlink" title="4.7.3连接关闭容限、重试以及幂等性"></a>4.7.3连接关闭容限、重试以及幂等性</h3><p>客户端不应该对非幂等请求进行管道连接(post)</p>
<h3 id="4-7-4正常关闭连接"><a href="#4-7-4正常关闭连接" class="headerlink" title="4.7.4正常关闭连接"></a>4.7.4正常关闭连接</h3><p>半关闭: 单独关闭输入或者输出通道</p>
<p>关闭输出信道是安全的, 关闭输入信道是危险的</p>
<p>比如你已经在一条持久连接上发送了10 条管道式请求了，响应也已经收到了，正在操作系统的缓冲区中存着呢（但应用程序还未将其读走)。<br>现在，假设你发送了 第11条请求，但服务器认为你使用这条连接的时间已经够长了，决定将其关闭。那么你的第11 条请求就会被发送到一条已关闭的连接上去，并会向你回送一条重置信 息。<strong>这个重置信息会清空你的输人缓冲区。</strong></p>
<p>但不幸的是，无法确保对等实体会实现半关闭，或对其进行检查。因此，想要正常关闭连接的应用程序应该<strong>先半关闭其输出信道，然后周期性地检查其输入信道的状态</strong>（查找数据，或流的末尾)。如果在一定的时间区间内对端没有关闭输人信道，应用程序可以强制关闭连接，以节省资源。</p>
<h2 id="4-8更多信息"><a href="#4-8更多信息" class="headerlink" title="4.8更多信息"></a>4.8更多信息</h2><h3 id="4-8-1-HTTP连接"><a href="#4-8-1-HTTP连接" class="headerlink" title="4.8.1 HTTP连接"></a>4.8.1 HTTP连接</h3><h3 id="4-8-2-HTTP性能问题"><a href="#4-8-2-HTTP性能问题" class="headerlink" title="4.8.2 HTTP性能问题"></a>4.8.2 HTTP性能问题</h3><h3 id="4-8-3-TCPIP"><a href="#4-8-3-TCPIP" class="headerlink" title="4.8.3 TCPIP"></a>4.8.3 TCPIP</h3><h1 id="第5章Web服务器"><a href="#第5章Web服务器" class="headerlink" title="第5章Web服务器"></a>第5章Web服务器</h1><h2 id="5-1各种形状和尺寸的Web服务器"><a href="#5-1各种形状和尺寸的Web服务器" class="headerlink" title="5.1各种形状和尺寸的Web服务器"></a>5.1各种形状和尺寸的Web服务器</h2><h3 id="5-1-1-Web服务器的实现"><a href="#5-1-1-Web服务器的实现" class="headerlink" title="5.1.1 Web服务器的实现"></a>5.1.1 Web服务器的实现</h3><h3 id="5-1-2通用软件Web服务器"><a href="#5-1-2通用软件Web服务器" class="headerlink" title="5.1.2通用软件Web服务器"></a>5.1.2通用软件Web服务器</h3><h3 id="5-1-3-Web服务器设备"><a href="#5-1-3-Web服务器设备" class="headerlink" title="5.1.3 Web服务器设备"></a>5.1.3 Web服务器设备</h3><h3 id="5-1-4嵌入式Web服务器"><a href="#5-1-4嵌入式Web服务器" class="headerlink" title="5.1.4嵌入式Web服务器"></a>5.1.4嵌入式Web服务器</h3><h2 id="5-2最小的Perl-Web服务器"><a href="#5-2最小的Perl-Web服务器" class="headerlink" title="5.2最小的Perl Web服务器"></a>5.2最小的Perl Web服务器</h2><h2 id="5-3实际的Web服务器会做些什么"><a href="#5-3实际的Web服务器会做些什么" class="headerlink" title="5.3实际的Web服务器会做些什么"></a>5.3实际的Web服务器会做些什么</h2><h2 id="5-4第一步——接受客户端连接"><a href="#5-4第一步——接受客户端连接" class="headerlink" title="5.4第一步——接受客户端连接"></a>5.4第一步——接受客户端连接</h2><h3 id="5-4-1处理新连接"><a href="#5-4-1处理新连接" class="headerlink" title="5.4.1处理新连接"></a>5.4.1处理新连接</h3><h3 id="5-4-2客户端主机名识别"><a href="#5-4-2客户端主机名识别" class="headerlink" title="5.4.2客户端主机名识别"></a>5.4.2客户端主机名识别</h3><p>反向 DNS, 将客户端 ip 转换成主机名</p>
<h3 id="5-4-3通过ident确定客户端用户"><a href="#5-4-3通过ident确定客户端用户" class="headerlink" title="5.4.3通过ident确定客户端用户"></a>5.4.3通过ident确定客户端用户</h3><p>如果客户端支持 ident 协议, 就会在 113 port 监听请求, 服务端从这里请求用户名</p>
<h2 id="5-5第二步——接收请求报文"><a href="#5-5第二步——接收请求报文" class="headerlink" title="5.5第二步——接收请求报文"></a>5.5第二步——接收请求报文</h2><h3 id="5-5-1报文的内部表示法"><a href="#5-5-1报文的内部表示法" class="headerlink" title="5.5.1报文的内部表示法"></a>5.5.1报文的内部表示法</h3><h3 id="5-5-2连接的输入／输出处理结构"><a href="#5-5-2连接的输入／输出处理结构" class="headerlink" title="5.5.2连接的输入／输出处理结构"></a>5.5.2连接的输入／输出处理结构</h3><h2 id="5-6第三步——处理请求"><a href="#5-6第三步——处理请求" class="headerlink" title="5.6第三步——处理请求"></a>5.6第三步——处理请求</h2><h2 id="5-7第四步——对资源的映射及访问"><a href="#5-7第四步——对资源的映射及访问" class="headerlink" title="5.7第四步——对资源的映射及访问"></a>5.7第四步——对资源的映射及访问</h2><h3 id="5-7-1-docroot"><a href="#5-7-1-docroot" class="headerlink" title="5.7.1 docroot"></a>5.7.1 docroot</h3><p>Web 服务器支持各种不同类型的资源映射，但最简单的资源映射形式就是用请求 URI作为名字来访问 Web服务器文件系统中的文件。<br>通常，web 服务器的文件系统中会有一个特殊的文件夹专门用于存放 Web 内容。这个文件夹被称为文档的根目录（document root，或 docroot)。Web 服务器从请求报文中获取 URI，并将其附加在文档根目录的后面。</p>
<h3 id="5-7-2目录列表"><a href="#5-7-2目录列表" class="headerlink" title="5.7.2目录列表"></a>5.7.2目录列表</h3><p>web 服务器对应目录 url 的请求时</p>
<ol>
<li>返回错误</li>
<li>返回索引文件 index.html</li>
<li>扫描目录, 返回包含目录内容的文件</li>
</ol>
<h3 id="5-7-3动态内容资源的映射"><a href="#5-7-3动态内容资源的映射" class="headerlink" title="5.7.3动态内容资源的映射"></a>5.7.3动态内容资源的映射</h3><p>cgi common gateway interface</p>
<h3 id="5-7-4服务器端包含项"><a href="#5-7-4服务器端包含项" class="headerlink" title="5.7.4服务器端包含项"></a>5.7.4服务器端包含项</h3><p>SSI server side includes</p>
<h3 id="5-7-5访问控制"><a href="#5-7-5访问控制" class="headerlink" title="5.7.5访问控制"></a>5.7.5访问控制</h3><h2 id="5-8第五步——构建响应"><a href="#5-8第五步——构建响应" class="headerlink" title="5.8第五步——构建响应"></a>5.8第五步——构建响应</h2><h3 id="5-8-1响应实体"><a href="#5-8-1响应实体" class="headerlink" title="5.8.1响应实体"></a>5.8.1响应实体</h3><h3 id="5-8-2-MIME类型"><a href="#5-8-2-MIME类型" class="headerlink" title="5.8.2 MIME类型"></a>5.8.2 MIME类型</h3><h3 id="5-8-3重定向"><a href="#5-8-3重定向" class="headerlink" title="5.8.3重定向"></a>5.8.3重定向</h3><ul>
<li>永久删除资源 301</li>
<li>临时删除资源 303, 307</li>
<li>url 增强</li>
<li>负载均衡</li>
<li>服务器关联</li>
<li>规范目录名称 在目录名后加斜线</li>
</ul>
<h2 id="5-9第六步——发送响应"><a href="#5-9第六步——发送响应" class="headerlink" title="5.9第六步——发送响应"></a>5.9第六步——发送响应</h2><h2 id="5-10第七步——记录日志"><a href="#5-10第七步——记录日志" class="headerlink" title="5.10第七步——记录日志"></a>5.10第七步——记录日志</h2><h2 id="5-11更多信息"><a href="#5-11更多信息" class="headerlink" title="5.11更多信息"></a>5.11更多信息</h2><h1 id="第6章-代理"><a href="#第6章-代理" class="headerlink" title="第6章 代理"></a>第6章 代理</h1><h2 id="6-1-Web的中间实体"><a href="#6-1-Web的中间实体" class="headerlink" title="6.1 Web的中间实体"></a>6.1 Web的中间实体</h2><h3 id="6-1-1私有和共享代理"><a href="#6-1-1私有和共享代理" class="headerlink" title="6.1.1私有和共享代理"></a>6.1.1私有和共享代理</h3><h3 id="6-1-2代理与网关的对比"><a href="#6-1-2代理与网关的对比" class="headerlink" title="6.1.2代理与网关的对比"></a>6.1.2代理与网关的对比</h3><p>代理两端使用同一种协议</p>
<p>网关将不同的协议连接起来</p>
<h2 id="6-2为什么使用代理"><a href="#6-2为什么使用代理" class="headerlink" title="6.2为什么使用代理"></a>6.2为什么使用代理</h2><ul>
<li>防火墙</li>
<li>web 缓存</li>
<li>反向代理<ul>
<li>正向代理: 代理属于客户端的一部分</li>
<li>反向代理: 代理为服务器的一部分</li>
</ul>
</li>
<li>内容路由器</li>
<li>转码器</li>
<li>匿名</li>
</ul>
<h2 id="6-3代理会去往何处"><a href="#6-3代理会去往何处" class="headerlink" title="6.3代理会去往何处"></a>6.3代理会去往何处</h2><h3 id="6-3-1代理服务器的部署"><a href="#6-3-1代理服务器的部署" class="headerlink" title="6.3.1代理服务器的部署"></a>6.3.1代理服务器的部署</h3><h3 id="6-3-2代理的层次结构"><a href="#6-3-2代理的层次结构" class="headerlink" title="6.3.2代理的层次结构"></a>6.3.2代理的层次结构</h3><h3 id="6-3-3代理是如何获取流量的"><a href="#6-3-3代理是如何获取流量的" class="headerlink" title="6.3.3代理是如何获取流量的"></a>6.3.3代理是如何获取流量的</h3><ul>
<li>修改客户端</li>
<li>修改网络, 拦截代理</li>
<li>修改 dns</li>
<li>修改 web 服务器</li>
</ul>
<h2 id="6-4客户端的代理设置"><a href="#6-4客户端的代理设置" class="headerlink" title="6.4客户端的代理设置"></a>6.4客户端的代理设置</h2><p>PAC proxy auto configuration</p>
<p>WPAD web proxy autodiscovery protocol</p>
<h3 id="6-4-1客户端的代理配置：手工配置"><a href="#6-4-1客户端的代理配置：手工配置" class="headerlink" title="6.4.1客户端的代理配置：手工配置"></a>6.4.1客户端的代理配置：手工配置</h3><h3 id="6-4-2客户端代理配置：PAC文件"><a href="#6-4-2客户端代理配置：PAC文件" class="headerlink" title="6.4.2客户端代理配置：PAC文件"></a>6.4.2客户端代理配置：PAC文件</h3><p>FindProxyForURL(url, host)</p>
<p>返回:</p>
<ul>
<li>direct 直接连接</li>
<li>proxy host:port 使用指定代理</li>
<li>socks host:port 使用指定 socks 服务器(使用 socks(socket secure) 协议的服务器)<br>Bill希望通过互联网与Jane沟通，但他们的网络之间存在一个<a target="_blank" rel="noopener" href="https://zh.m.wikipedia.org/wiki/%E9%98%B2%E7%81%AB%E5%A2%99">防火墙</a>，Bill不能直接与Jane沟通。所以，Bill连接到他的网络上的SOCKS代理，告知它他想要与Jane建立连接；SOCKS代理打开一个能穿过防火墙的连接，并促进Bill和Jane之间的通信。</li>
</ul>
<h3 id="6-4-3客户端代理配置：WPAD"><a href="#6-4-3客户端代理配置：WPAD" class="headerlink" title="6.4.3客户端代理配置：WPAD"></a>6.4.3客户端代理配置：WPAD</h3><h2 id="6-5与代理请求有关的一些棘手问题"><a href="#6-5与代理请求有关的一些棘手问题" class="headerlink" title="6.5与代理请求有关的一些棘手问题"></a>6.5与代理请求有关的一些棘手问题</h2><h3 id="6-5-1代理URI与服务器URI的不同"><a href="#6-5-1代理URI与服务器URI的不同" class="headerlink" title="6.5.1代理URI与服务器URI的不同"></a>6.5.1代理URI与服务器URI的不同</h3><p>(1)没有设置客户端使用代理时，它会发送部分 URI（参见图 6-15a)。 </p>
<p>(2）设置客户端使用代理时，它会发送完整 URI（参见图 6-15b)。</p>
<h3 id="6-5-2与虚拟主机一样的问题"><a href="#6-5-2与虚拟主机一样的问题" class="headerlink" title="6.5.2与虚拟主机一样的问题"></a>6.5.2与虚拟主机一样的问题</h3><p>显式的代理要求在请求报文中使用完整 URI 来解决这个问题</p>
<p>虚拟主机 Web 服务器要求使用 Host 首部来承载主机和端口信息。</p>
<h3 id="6-5-3拦截代理会收到部分URI"><a href="#6-5-3拦截代理会收到部分URI" class="headerlink" title="6.5.3拦截代理会收到部分URI"></a>6.5.3拦截代理会收到部分URI</h3><h3 id="6-5-4代理既可以处理代理请求，也可以处理服务器请求"><a href="#6-5-4代理既可以处理代理请求，也可以处理服务器请求" class="headerlink" title="6.5.4代理既可以处理代理请求，也可以处理服务器请求"></a>6.5.4代理既可以处理代理请求，也可以处理服务器请求</h3><ul>
<li><p>如果提供的是完整 URI，代理就应该使用这个完整 URI。</p>
</li>
<li><p>如果提供的是部分 URI，而且有 Host 首部，就应该用 Host 首部来确定原始服 务器的名字和端口号。 </p>
</li>
<li><p>如果提供的是部分 URI,而且没有Host 首部,就要用其他方法来确定原始服务器： </p>
<ul>
<li>如果代理是代表原始服务器的替代物，可以用真实服务器的地址和端口号来 配置代理：</li>
<li>如果流最被拦截了，而且拦截者也可以提供原始的IP 地址和端口，代理就可 以使用拦截技术提供的IP 地址和端口号（参见第20章</li>
<li>如果所有方法都失败了，代理没有足够的信息来确定原始服务器，就必须返 回一条错误报文（通常是建议用户升级到支持 Host 首部的现代浏览器)。</li>
</ul>
</li>
</ul>
<h3 id="6-5-5转发过程中对URI的修改"><a href="#6-5-5转发过程中对URI的修改" class="headerlink" title="6.5.5转发过程中对URI的修改"></a>6.5.5转发过程中对URI的修改</h3><h3 id="6-5-6-URI的客户端自动扩展和主机名解析"><a href="#6-5-6-URI的客户端自动扩展和主机名解析" class="headerlink" title="6.5.6 URI的客户端自动扩展和主机名解析"></a>6.5.6 URI的客户端自动扩展和主机名解析</h3><p>但是，如果没有找到主机，很多浏览器都会尝试者提供某种主机名自动“扩展”机制，以防用户输入的是主机“简短”的缩写形式）。</p>
<ul>
<li>很多浏览器会尝试着加入前缀 www.和后缀.com</li>
<li>有些浏览器甚至会将未解析出来的 URI 传递给第三方站点，这个站点会尝试着 校正拼写错误，并给出一些用户可能希望访问的 URI 建议。 </li>
<li>而且，大多数系统中的 DNS配置允许用户只输入主机名的前缀，然后 DNS 会自 动搜索域名。如果用户位于域名 oreilly.com 的范围之内，并输人了主机名 host7， DNS会自动尝试将其与 host7.oreilly.com 进行匹配。这并不是完整有效的主机名。</li>
</ul>
<h3 id="6-5-7没有代理时URI的解析"><a href="#6-5-7没有代理时URI的解析" class="headerlink" title="6.5.7没有代理时URI的解析"></a>6.5.7没有代理时URI的解析</h3><p>客户端查找有效主机名</p>
<h3 id="6-5-8有显式代理时URI的解析"><a href="#6-5-8有显式代理时URI的解析" class="headerlink" title="6.5.8有显式代理时URI的解析"></a>6.5.8有显式代理时URI的解析</h3><p>不扩展直接发给代理</p>
<h3 id="6-5-9有拦截代理时URI的解析"><a href="#6-5-9有拦截代理时URI的解析" class="headerlink" title="6.5.9有拦截代理时URI的解析"></a>6.5.9有拦截代理时URI的解析</h3><p>客户端查找有效的主机名</p>
<p>在第(4a) 步中，客户端已经成功解析了主机名，并有了一张IP 地址列表。有些 IP 地址可能已经停用了，所以，通常客户端会<strong>尝试着连接每个 IP 地址</strong>，直到成 功为止。<br>但对拦截代理来说，第一次连接请求就会被代理服务器拦截成功，不会 连接到原始服务器上去。客户端认为它在与 Web 服务器进行成功的对话，但那 个 Web 服务器可能甚至都不处于活跃状态。 当代理最终准备好与真正的原始服务器进行交互时〔第（5b）步]，代理可能会发 现那个 IP 地址实际指向的是一个已停用的服务器。为了提供与浏览器相同级别 的容错机制，<strong>代理可以通过解析 Host 首部的主机名，也可以通过对IP 地址的反向 DNS 查找来尝试其他IP 地址。</strong>將浏览器配置为使用显式代理时，它们会依赖 代理的容错机制，所以对拦截和显式的代理实现来说，在 DNS解析到已停用服 务器时，提供容错机制是很重要的。</p>
<h2 id="6-6追踪报文"><a href="#6-6追踪报文" class="headerlink" title="6.6追踪报文"></a>6.6追踪报文</h2><h3 id="6-6-1-via首部"><a href="#6-6-1-via首部" class="headerlink" title="6.6.1 via首部"></a>6.6.1 via首部</h3><h3 id="6-6-2-TRACE方法"><a href="#6-6-2-TRACE方法" class="headerlink" title="6.6.2 TRACE方法"></a>6.6.2 TRACE方法</h3><h2 id="6-7代理认证"><a href="#6-7代理认证" class="headerlink" title="6.7代理认证"></a>6.7代理认证</h2><p>407</p>
<h2 id="6-8代理的互操作性"><a href="#6-8代理的互操作性" class="headerlink" title="6.8代理的互操作性"></a>6.8代理的互操作性</h2><h3 id="6-8-1处理代理不支持的首部和方法"><a href="#6-8-1处理代理不支持的首部和方法" class="headerlink" title="6.8.1处理代理不支持的首部和方法"></a>6.8.1处理代理不支持的首部和方法</h3><h3 id="6-8-2-OPTIONS：发现对可选特性的支持"><a href="#6-8-2-OPTIONS：发现对可选特性的支持" class="headerlink" title="6.8.2 OPTIONS：发现对可选特性的支持"></a>6.8.2 OPTIONS：发现对可选特性的支持</h3><h3 id="6-8-3-Allow首部"><a href="#6-8-3-Allow首部" class="headerlink" title="6.8.3 Allow首部"></a>6.8.3 Allow首部</h3><h2 id="6-9更多信息"><a href="#6-9更多信息" class="headerlink" title="6.9更多信息"></a>6.9更多信息</h2><h1 id="第7章-缓存"><a href="#第7章-缓存" class="headerlink" title="第7章 缓存"></a>第7章 缓存</h1><h2 id="7-1冗余的数据传输"><a href="#7-1冗余的数据传输" class="headerlink" title="7.1冗余的数据传输"></a>7.1冗余的数据传输</h2><h2 id="7-2带宽瓶颈"><a href="#7-2带宽瓶颈" class="headerlink" title="7.2带宽瓶颈"></a>7.2带宽瓶颈</h2><h2 id="7-3瞬间拥塞"><a href="#7-3瞬间拥塞" class="headerlink" title="7.3瞬间拥塞"></a>7.3瞬间拥塞</h2><h2 id="7-4距离时延"><a href="#7-4距离时延" class="headerlink" title="7.4距离时延"></a>7.4距离时延</h2><h2 id="7-5命中和未命中的"><a href="#7-5命中和未命中的" class="headerlink" title="7.5命中和未命中的"></a>7.5命中和未命中的</h2><h3 id="7-5-1再验证"><a href="#7-5-1再验证" class="headerlink" title="7.5.1再验证"></a>7.5.1再验证</h3><p>get if-modified-since</p>
<ul>
<li>命中 304 not modified</li>
<li>未命中  200 ok</li>
<li>已删除 404 not found</li>
</ul>
<h3 id="7-5-2命中率"><a href="#7-5-2命中率" class="headerlink" title="7.5.2命中率"></a>7.5.2命中率</h3><h3 id="7-5-3字节命中率"><a href="#7-5-3字节命中率" class="headerlink" title="7.5.3字节命中率"></a>7.5.3字节命中率</h3><p>字节命中率表示的是缓存提供的字节在传输的所有字节中所占的比例。通过这种度量方式，可以得知节省流量的程度. 100% 的字节命中率说明每个字节都来自缓存， 没有流量流到因特网上去。</p>
<h3 id="7-5-4区分命中和未命中的情况"><a href="#7-5-4区分命中和未命中的情况" class="headerlink" title="7.5.4区分命中和未命中的情况"></a>7.5.4区分命中和未命中的情况</h3><p>响应中的 Date 首部 如果比当前时间要早得多, 通常认为来自缓存</p>
<p>age 首部</p>
<h2 id="7-6缓存的拓扑结构"><a href="#7-6缓存的拓扑结构" class="headerlink" title="7.6缓存的拓扑结构"></a>7.6缓存的拓扑结构</h2><h3 id="7-6-1私有缓存"><a href="#7-6-1私有缓存" class="headerlink" title="7.6.1私有缓存"></a>7.6.1私有缓存</h3><h3 id="7-6-2公有代理缓存"><a href="#7-6-2公有代理缓存" class="headerlink" title="7.6.2公有代理缓存"></a>7.6.2公有代理缓存</h3><p>代理缓存</p>
<h3 id="7-6-3代理缓存的层次结构"><a href="#7-6-3代理缓存的层次结构" class="headerlink" title="7.6.3代理缓存的层次结构"></a>7.6.3代理缓存的层次结构</h3><h3 id="7-6-4网状缓存、内容路由以及对等缓存"><a href="#7-6-4网状缓存、内容路由以及对等缓存" class="headerlink" title="7.6.4网状缓存、内容路由以及对等缓存"></a>7.6.4网状缓存、内容路由以及对等缓存</h3><h2 id="7-7缓存的处理步骤"><a href="#7-7缓存的处理步骤" class="headerlink" title="7.7缓存的处理步骤"></a>7.7缓存的处理步骤</h2><p>(1) 接收——缓存从网络中读取抵达的请求报文。</p>
<p>(2) 解析——缓存对报文进行解析，提取出 URL 和各种首部。 </p>
<p>(3) 查询—缓存查看是否有本地副本可用，如果没有，就获取一份副本（并将其保 存在本地）。</p>
<p>(4)新鲜度检测——缓存查看已缓存副本是否足够新鲜，如果不是，就询问服务器是 否有任何更新。 </p>
<p>(5)创建响应——缓存会用新的首部和已缓存的主体来构建一条响应报文。 </p>
<p>(6) 发送——缓存通过网络将响应发回给客户端。 </p>
<p>(7)日志——缓存可选地创建一个日志文件条目来描述这个事务。</p>
<h3 id="7-7-1第一步——接收"><a href="#7-7-1第一步——接收" class="headerlink" title="7.7.1第一步——接收"></a>7.7.1第一步——接收</h3><h3 id="7-7-2第二步——解析"><a href="#7-7-2第二步——解析" class="headerlink" title="7.7.2第二步——解析"></a>7.7.2第二步——解析</h3><h3 id="7-7-3第三步——查找"><a href="#7-7-3第三步——查找" class="headerlink" title="7.7.3第三步——查找"></a>7.7.3第三步——查找</h3><h3 id="7-7-4第四步——新鲜度检测"><a href="#7-7-4第四步——新鲜度检测" class="headerlink" title="7.7.4第四步——新鲜度检测"></a>7.7.4第四步——新鲜度检测</h3><p>freshness limit</p>
<h3 id="7-7-5第五步——创建响应"><a href="#7-7-5第五步——创建响应" class="headerlink" title="7.7.5第五步——创建响应"></a>7.7.5第五步——创建响应</h3><h3 id="7-7-6第六步——发送"><a href="#7-7-6第六步——发送" class="headerlink" title="7.7.6第六步——发送"></a>7.7.6第六步——发送</h3><h3 id="7-7-7第七步——日志"><a href="#7-7-7第七步——日志" class="headerlink" title="7.7.7第七步——日志"></a>7.7.7第七步——日志</h3><h3 id="7-7-8缓存处理流程图"><a href="#7-7-8缓存处理流程图" class="headerlink" title="7.7.8缓存处理流程图"></a>7.7.8缓存处理流程图</h3><h2 id="7-8保持副本的新鲜"><a href="#7-8保持副本的新鲜" class="headerlink" title="7.8保持副本的新鲜"></a>7.8保持副本的新鲜</h2><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h96wfu393oj30wk0j40ug.jpg" alt="截屏2022-12-14 00.10.58"></p>
<h3 id="7-8-1文档过期"><a href="#7-8-1文档过期" class="headerlink" title="7.8.1文档过期"></a>7.8.1文档过期</h3><p>cache-control: max-age</p>
<p>expires</p>
<h3 id="7-8-2过期日期和使用期"><a href="#7-8-2过期日期和使用期" class="headerlink" title="7.8.2过期日期和使用期"></a>7.8.2过期日期和使用期</h3><h3 id="7-8-3服务器再验证"><a href="#7-8-3服务器再验证" class="headerlink" title="7.8.3服务器再验证"></a>7.8.3服务器再验证</h3><p>已缓存文档过期意味着到进行核对的时间了, 这种情况叫服务器再验证</p>
<h3 id="7-8-4用条件方法进行再验证"><a href="#7-8-4用条件方法进行再验证" class="headerlink" title="7.8.4用条件方法进行再验证"></a>7.8.4用条件方法进行再验证</h3><p>if-modified-since</p>
<p>if-none-match</p>
<h3 id="7-8-5-If-Modified-Since：Date再验证"><a href="#7-8-5-If-Modified-Since：Date再验证" class="headerlink" title="7.8.5 If-Modified-Since：Date再验证"></a>7.8.5 If-Modified-Since：Date再验证</h3><p>IMS 请求</p>
<h3 id="7-8-6-If-None-Match：实体标签再验证"><a href="#7-8-6-If-None-Match：实体标签再验证" class="headerlink" title="7.8.6 If-None-Match：实体标签再验证"></a>7.8.6 If-None-Match：实体标签再验证</h3><p>版本号</p>
<h3 id="7-8-7强弱验证器"><a href="#7-8-7强弱验证器" class="headerlink" title="7.8.7强弱验证器"></a>7.8.7强弱验证器</h3><p>ETag: W&#x2F;“v2.6”</p>
<p>If-None-Match: W&#x2F;“v2.6”</p>
<h3 id="7-8-8什么时候应该使用实体标签和最近修改日期"><a href="#7-8-8什么时候应该使用实体标签和最近修改日期" class="headerlink" title="7.8.8什么时候应该使用实体标签和最近修改日期"></a>7.8.8什么时候应该使用实体标签和最近修改日期</h3><h2 id="7-9控制缓存的能力"><a href="#7-9控制缓存的能力" class="headerlink" title="7.9控制缓存的能力"></a>7.9控制缓存的能力</h2><h3 id="7-9-1-no-Store与no-Cache响应首部"><a href="#7-9-1-no-Store与no-Cache响应首部" class="headerlink" title="7.9.1 no-Store与no-Cache响应首部"></a>7.9.1 no-Store与no-Cache响应首部</h3><p>no-store 不存储在代理缓存中</p>
<p>no-cache 在验证前不提供缓存</p>
<h3 id="7-9-2-max-age响应首部"><a href="#7-9-2-max-age响应首部" class="headerlink" title="7.9.2 max-age响应首部"></a>7.9.2 max-age响应首部</h3><p>单位: 秒</p>
<h3 id="7-9-3-Expires响应首部"><a href="#7-9-3-Expires响应首部" class="headerlink" title="7.9.3 Expires响应首部"></a>7.9.3 Expires响应首部</h3><p>内容: 过期的日期</p>
<h3 id="7-9-4-must-revalidate响应首部"><a href="#7-9-4-must-revalidate响应首部" class="headerlink" title="7.9.4 must-revalidate响应首部"></a>7.9.4 must-revalidate响应首部</h3><p>Cache-Control: must-revalidate响应首部告诉缓存，在事先没有跟原始服务 器进行再验证的情况下，不能提供这个对象的陈旧副本<br>缓存仍然可以随意提供新 鮮的副本。如果在缓存进行 must -revalidate 新鲜度检查时，原始服务器不可 用，缓存就必须返回一条 504 Gateway Timeout 错误。</p>
<h3 id="7-9-5试探性过期"><a href="#7-9-5试探性过期" class="headerlink" title="7.9.5试探性过期"></a>7.9.5试探性过期</h3><p>LM-factor</p>
<p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h96wfnrz8dj30xo08awfd.jpg" alt="截屏2022-12-14 00.40.40"></p>
<h3 id="7-9-6客户端的新鲜度限制"><a href="#7-9-6客户端的新鲜度限制" class="headerlink" title="7.9.6客户端的新鲜度限制"></a>7.9.6客户端的新鲜度限制</h3><h3 id="7-9-7注意事项"><a href="#7-9-7注意事项" class="headerlink" title="7.9.7注意事项"></a>7.9.7注意事项</h3><h2 id="7-10设置缓存控制"><a href="#7-10设置缓存控制" class="headerlink" title="7.10设置缓存控制"></a>7.10设置缓存控制</h2><h3 id="7-10-1控制Apache的HTTP首部"><a href="#7-10-1控制Apache的HTTP首部" class="headerlink" title="7.10.1控制Apache的HTTP首部"></a>7.10.1控制Apache的HTTP首部</h3><h3 id="7-10-2通过HTTP-EQUIv控制HTML缓存"><a href="#7-10-2通过HTTP-EQUIv控制HTML缓存" class="headerlink" title="7.10.2通过HTTP-EQUIv控制HTML缓存"></a>7.10.2通过HTTP-EQUIv控制HTML缓存</h3><h2 id="7-11详细算法"><a href="#7-11详细算法" class="headerlink" title="7.11详细算法"></a>7.11详细算法</h2><h3 id="7-11-1使用期和新鲜生存期"><a href="#7-11-1使用期和新鲜生存期" class="headerlink" title="7.11.1使用期和新鲜生存期"></a>7.11.1使用期和新鲜生存期</h3><h3 id="7-11-2使用期的计算"><a href="#7-11-2使用期的计算" class="headerlink" title="7.11.2使用期的计算"></a>7.11.2使用期的计算</h3><p>使用期就是服务器发布响应(或服务器对其进行了再验证)之后进行的总时间</p>
<h3 id="7-11-3完整的使用期计算算法"><a href="#7-11-3完整的使用期计算算法" class="headerlink" title="7.11.3完整的使用期计算算法"></a>7.11.3完整的使用期计算算法</h3><h3 id="7-11-4新鲜生存期计算"><a href="#7-11-4新鲜生存期计算" class="headerlink" title="7.11.4新鲜生存期计算"></a>7.11.4新鲜生存期计算</h3><h3 id="7-11-5完整的服务器——新鲜度算法"><a href="#7-11-5完整的服务器——新鲜度算法" class="headerlink" title="7.11.5完整的服务器——新鲜度算法"></a>7.11.5完整的服务器——新鲜度算法</h3><h2 id="7-12缓存和广告"><a href="#7-12缓存和广告" class="headerlink" title="7.12缓存和广告"></a>7.12缓存和广告</h2><h3 id="7-12-1发布广告者的两难处境"><a href="#7-12-1发布广告者的两难处境" class="headerlink" title="7.12.1发布广告者的两难处境"></a>7.12.1发布广告者的两难处境</h3><p>缓存会向原始服务器隐藏实际的访问次数</p>
<h3 id="7-12-2发布者的响应"><a href="#7-12-2发布者的响应" class="headerlink" title="7.12.2发布者的响应"></a>7.12.2发布者的响应</h3><p>一种方法是配置缓存, 使其每次访问都要与原始服务器再验证</p>
<h3 id="7-12-3日志迁移"><a href="#7-12-3日志迁移" class="headerlink" title="7.12.3日志迁移"></a>7.12.3日志迁移</h3><p>迁移命中日志</p>
<h3 id="7-12-4命中计数和使用限制"><a href="#7-12-4命中计数和使用限制" class="headerlink" title="7.12.4命中计数和使用限制"></a>7.12.4命中计数和使用限制</h3><p>Meter 首部</p>
<h2 id="7-13更多信息"><a href="#7-13更多信息" class="headerlink" title="7.13更多信息"></a>7.13更多信息</h2><h1 id="第8章-集成点：网关、隧道及中继"><a href="#第8章-集成点：网关、隧道及中继" class="headerlink" title="第8章 集成点：网关、隧道及中继"></a>第8章 集成点：网关、隧道及中继</h1><h2 id="8-1网关"><a href="#8-1网关" class="headerlink" title="8.1网关"></a>8.1网关</h2><p>抽象出了一种能够到达资源的方法</p>
<h2 id="8-2协议网关"><a href="#8-2协议网关" class="headerlink" title="8.2协议网关"></a>8.2协议网关</h2><p>协议转换</p>
<h3 id="8-2-1-HTTP-x2F-服务器端Web网关"><a href="#8-2-1-HTTP-x2F-服务器端Web网关" class="headerlink" title="8.2.1 HTTP&#x2F;* 服务器端Web网关"></a>8.2.1 HTTP&#x2F;* 服务器端Web网关</h3><h3 id="8-2-2-HTTP-x2F-HTTPS：服务器端安全网关"><a href="#8-2-2-HTTP-x2F-HTTPS：服务器端安全网关" class="headerlink" title="8.2.2 HTTP&#x2F;HTTPS：服务器端安全网关"></a>8.2.2 HTTP&#x2F;HTTPS：服务器端安全网关</h3><h3 id="8-2-3-HTTPS-x2F-HTTP客户端安全加速器网关"><a href="#8-2-3-HTTPS-x2F-HTTP客户端安全加速器网关" class="headerlink" title="8.2.3 HTTPS&#x2F;HTTP客户端安全加速器网关"></a>8.2.3 HTTPS&#x2F;HTTP客户端安全加速器网关</h3><h2 id="8-3资源网关"><a href="#8-3资源网关" class="headerlink" title="8.3资源网关"></a>8.3资源网关</h2><h3 id="8-3-1CGI"><a href="#8-3-1CGI" class="headerlink" title="8.3.1CGI"></a>8.3.1CGI</h3><p>快速 cgi</p>
<h3 id="8-3-2服务器扩展API"><a href="#8-3-2服务器扩展API" class="headerlink" title="8.3.2服务器扩展API"></a>8.3.2服务器扩展API</h3><h2 id="8-4应用程序接口和Web服务"><a href="#8-4应用程序接口和Web服务" class="headerlink" title="8.4应用程序接口和Web服务"></a>8.4应用程序接口和Web服务</h2><h2 id="8-5隧道"><a href="#8-5隧道" class="headerlink" title="8.5隧道"></a>8.5隧道</h2><h3 id="8-5-1用CONNECT建立HTTP隧道"><a href="#8-5-1用CONNECT建立HTTP隧道" class="headerlink" title="8.5.1用CONNECT建立HTTP隧道"></a>8.5.1用CONNECT建立HTTP隧道</h3><p>CONNECT 方法请求隧道网关创建一条到达任意目的服务器和端口的 TCP 连接，并 对客户端和服务器之间的后继数据进行盲转发。</p>
<h3 id="8-5-2数据隧道、定时及连接管理"><a href="#8-5-2数据隧道、定时及连接管理" class="headerlink" title="8.5.2数据隧道、定时及连接管理"></a>8.5.2数据隧道、定时及连接管理</h3><h3 id="8-5-3-SSL隧道"><a href="#8-5-3-SSL隧道" class="headerlink" title="8.5.3 SSL隧道"></a>8.5.3 SSL隧道</h3><h3 id="8-5-4-SSL隧道与HTTP-x2F-HTTPS网关的对比"><a href="#8-5-4-SSL隧道与HTTP-x2F-HTTPS网关的对比" class="headerlink" title="8.5.4 SSL隧道与HTTP&#x2F;HTTPS网关的对比"></a>8.5.4 SSL隧道与HTTP&#x2F;HTTPS网关的对比</h3><h3 id="8-5-5隧道认证"><a href="#8-5-5隧道认证" class="headerlink" title="8.5.5隧道认证"></a>8.5.5隧道认证</h3><h3 id="8-5-6隧道的安全性考虑"><a href="#8-5-6隧道的安全性考虑" class="headerlink" title="8.5.6隧道的安全性考虑"></a>8.5.6隧道的安全性考虑</h3><h2 id="8-6中继"><a href="#8-6中继" class="headerlink" title="8.6中继"></a>8.6中继</h2><p>relay</p>
<h2 id="8-7更多信息"><a href="#8-7更多信息" class="headerlink" title="8.7更多信息"></a>8.7更多信息</h2><h1 id="第9章Web机器人"><a href="#第9章Web机器人" class="headerlink" title="第9章Web机器人"></a>第9章Web机器人</h1><h2 id="9-1爬虫及爬行方式"><a href="#9-1爬虫及爬行方式" class="headerlink" title="9.1爬虫及爬行方式"></a>9.1爬虫及爬行方式</h2><h3 id="9-1-1从哪儿开始：根集"><a href="#9-1-1从哪儿开始：根集" class="headerlink" title="9.1.1从哪儿开始：根集"></a>9.1.1从哪儿开始：根集</h3><h3 id="9-1-2链接的提取以及相对链接的标准化"><a href="#9-1-2链接的提取以及相对链接的标准化" class="headerlink" title="9.1.2链接的提取以及相对链接的标准化"></a>9.1.2链接的提取以及相对链接的标准化</h3><h3 id="9-1-3避免环路的出现"><a href="#9-1-3避免环路的出现" class="headerlink" title="9.1.3避免环路的出现"></a>9.1.3避免环路的出现</h3><h3 id="9-1-4循环与复制"><a href="#9-1-4循环与复制" class="headerlink" title="9.1.4循环与复制"></a>9.1.4循环与复制</h3><h3 id="9-1-5面包屑留下的痕迹"><a href="#9-1-5面包屑留下的痕迹" class="headerlink" title="9.1.5面包屑留下的痕迹"></a>9.1.5面包屑留下的痕迹</h3><p>存在位数组, 检查点, 树和散列表</p>
<h3 id="9-1-6别名与机器人环路"><a href="#9-1-6别名与机器人环路" class="headerlink" title="9.1.6别名与机器人环路"></a>9.1.6别名与机器人环路</h3><h3 id="9-1-7规范化URL"><a href="#9-1-7规范化URL" class="headerlink" title="9.1.7规范化URL"></a>9.1.7规范化URL</h3><h3 id="9-1-8文件系统连接环路"><a href="#9-1-8文件系统连接环路" class="headerlink" title="9.1.8文件系统连接环路"></a>9.1.8文件系统连接环路</h3><h3 id="9-1-9动态虚拟Web空间"><a href="#9-1-9动态虚拟Web空间" class="headerlink" title="9.1.9动态虚拟Web空间"></a>9.1.9动态虚拟Web空间</h3><h3 id="9-1-10避免循环和重复"><a href="#9-1-10避免循环和重复" class="headerlink" title="9.1.10避免循环和重复"></a>9.1.10避免循环和重复</h3><h2 id="9-2机器人的HTTP"><a href="#9-2机器人的HTTP" class="headerlink" title="9.2机器人的HTTP"></a>9.2机器人的HTTP</h2><h3 id="9-2-1识别请求首部"><a href="#9-2-1识别请求首部" class="headerlink" title="9.2.1识别请求首部"></a>9.2.1识别请求首部</h3><h3 id="9-2-2虚拟主机"><a href="#9-2-2虚拟主机" class="headerlink" title="9.2.2虚拟主机"></a>9.2.2虚拟主机</h3><h3 id="9-2-3条件请求"><a href="#9-2-3条件请求" class="headerlink" title="9.2.3条件请求"></a>9.2.3条件请求</h3><h3 id="9-2-4对响应的处理"><a href="#9-2-4对响应的处理" class="headerlink" title="9.2.4对响应的处理"></a>9.2.4对响应的处理</h3><h3 id="9-2-5-User-Agent导向"><a href="#9-2-5-User-Agent导向" class="headerlink" title="9.2.5 User-Agent导向"></a>9.2.5 User-Agent导向</h3><h2 id="9-3行为不当的机器人"><a href="#9-3行为不当的机器人" class="headerlink" title="9.3行为不当的机器人"></a>9.3行为不当的机器人</h2><h2 id="9-4拒绝机器人访问"><a href="#9-4拒绝机器人访问" class="headerlink" title="9.4拒绝机器人访问"></a>9.4拒绝机器人访问</h2><p>robots.txt</p>
<h3 id="9-4-1拒绝机器人访问标准"><a href="#9-4-1拒绝机器人访问标准" class="headerlink" title="9.4.1拒绝机器人访问标准"></a>9.4.1拒绝机器人访问标准</h3><h4 id="9-4-2-Web站点和robots-txt文件"><a href="#9-4-2-Web站点和robots-txt文件" class="headerlink" title="9.4.2 Web站点和robots.txt文件"></a>9.4.2 Web站点和robots.txt文件</h4><h4 id="9-4-3-robots-txt文件的格式"><a href="#9-4-3-robots-txt文件的格式" class="headerlink" title="9.4.3 robots.txt文件的格式"></a>9.4.3 robots.txt文件的格式</h4><h4 id="9-4-4其他有关robots-txt的知识"><a href="#9-4-4其他有关robots-txt的知识" class="headerlink" title="9.4.4其他有关robots.txt的知识"></a>9.4.4其他有关robots.txt的知识</h4><h4 id="9-4-5缓存和robots-txt的过期"><a href="#9-4-5缓存和robots-txt的过期" class="headerlink" title="9.4.5缓存和robots.txt的过期"></a>9.4.5缓存和robots.txt的过期</h4><h3 id="9-4-6拒绝机器人访问的Perl代码"><a href="#9-4-6拒绝机器人访问的Perl代码" class="headerlink" title="9.4.6拒绝机器人访问的Perl代码"></a>9.4.6拒绝机器人访问的Perl代码</h3><h3 id="9-4-7-HTML的robot-control元标签"><a href="#9-4-7-HTML的robot-control元标签" class="headerlink" title="9.4.7 HTML的robot-control元标签"></a>9.4.7 HTML的robot-control元标签</h3><h2 id="9-5机器人的规范"><a href="#9-5机器人的规范" class="headerlink" title="9.5机器人的规范"></a>9.5机器人的规范</h2><h2 id="9-6搜索引擎"><a href="#9-6搜索引擎" class="headerlink" title="9.6搜索引擎"></a>9.6搜索引擎</h2><h3 id="9-6-1大格局"><a href="#9-6-1大格局" class="headerlink" title="9.6.1大格局"></a>9.6.1大格局</h3><h3 id="9-6-2现代搜索引擎结构"><a href="#9-6-2现代搜索引擎结构" class="headerlink" title="9.6.2现代搜索引擎结构"></a>9.6.2现代搜索引擎结构</h3><h3 id="9-6-3全文索引"><a href="#9-6-3全文索引" class="headerlink" title="9.6.3全文索引"></a>9.6.3全文索引</h3><h3 id="9-6-4发布查询请求"><a href="#9-6-4发布查询请求" class="headerlink" title="9.6.4发布查询请求"></a>9.6.4发布查询请求</h3><h3 id="9-6-5对结果进行排序，并提供查询结果"><a href="#9-6-5对结果进行排序，并提供查询结果" class="headerlink" title="9.6.5对结果进行排序，并提供查询结果"></a>9.6.5对结果进行排序，并提供查询结果</h3><h3 id="9-6-6欺诈"><a href="#9-6-6欺诈" class="headerlink" title="9.6.6欺诈"></a>9.6.6欺诈</h3><h2 id="9-7更多信息"><a href="#9-7更多信息" class="headerlink" title="9.7更多信息"></a>9.7更多信息</h2><h1 id="第10章HTTP-NG"><a href="#第10章HTTP-NG" class="headerlink" title="第10章HTTP-NG"></a>第10章HTTP-NG</h1><h2 id="10-1-HTTP发展中存在的问题"><a href="#10-1-HTTP发展中存在的问题" class="headerlink" title="10.1 HTTP发展中存在的问题"></a>10.1 HTTP发展中存在的问题</h2><h2 id="10-2-HTTP-NG的活动"><a href="#10-2-HTTP-NG的活动" class="headerlink" title="10.2 HTTP-NG的活动"></a>10.2 HTTP-NG的活动</h2><h2 id="10-3模块化及功能增强"><a href="#10-3模块化及功能增强" class="headerlink" title="10.3模块化及功能增强"></a>10.3模块化及功能增强</h2><h2 id="10-4分布式对象"><a href="#10-4分布式对象" class="headerlink" title="10.4分布式对象"></a>10.4分布式对象</h2><h2 id="10-5第一层——报文传输"><a href="#10-5第一层——报文传输" class="headerlink" title="10.5第一层——报文传输"></a>10.5第一层——报文传输</h2><h2 id="10-6第二层——远程调用"><a href="#10-6第二层——远程调用" class="headerlink" title="10.6第二层——远程调用"></a>10.6第二层——远程调用</h2><h2 id="10-7第三层——Web应用"><a href="#10-7第三层——Web应用" class="headerlink" title="10.7第三层——Web应用"></a>10.7第三层——Web应用</h2><h2 id="10-8-WebMUX"><a href="#10-8-WebMUX" class="headerlink" title="10.8 WebMUX"></a>10.8 WebMUX</h2><h2 id="10-9二进制连接协议"><a href="#10-9二进制连接协议" class="headerlink" title="10.9二进制连接协议"></a>10.9二进制连接协议</h2><h2 id="10-10当前的状态"><a href="#10-10当前的状态" class="headerlink" title="10.10当前的状态"></a>10.10当前的状态</h2><h2 id="10-11更多信息"><a href="#10-11更多信息" class="headerlink" title="10.11更多信息"></a>10.11更多信息</h2><h1 id="第11章-客户端识别与cookie机制"><a href="#第11章-客户端识别与cookie机制" class="headerlink" title="第11章 客户端识别与cookie机制"></a>第11章 客户端识别与cookie机制</h1><h2 id="11-1个性化接触"><a href="#11-1个性化接触" class="headerlink" title="11.1个性化接触"></a>11.1个性化接触</h2><h2 id="11-2-HTTP首部"><a href="#11-2-HTTP首部" class="headerlink" title="11.2 HTTP首部"></a>11.2 HTTP首部</h2><h2 id="11-3客户端IP地址"><a href="#11-3客户端IP地址" class="headerlink" title="11.3客户端IP地址"></a>11.3客户端IP地址</h2><h2 id="11-4用户登录"><a href="#11-4用户登录" class="headerlink" title="11.4用户登录"></a>11.4用户登录</h2><p>authorization 首部 </p>
<h2 id="11-5胖URL"><a href="#11-5胖URL" class="headerlink" title="11.5胖URL"></a>11.5胖URL</h2><p>fat URL</p>
<p>对普通 url进行扩展</p>
<h2 id="11-6-cookie"><a href="#11-6-cookie" class="headerlink" title="11.6 cookie"></a>11.6 cookie</h2><h3 id="11-6-1-cookie的类型"><a href="#11-6-1-cookie的类型" class="headerlink" title="11.6.1 cookie的类型"></a>11.6.1 cookie的类型</h3><p>会话 cookie , 持久 cookie</p>
<h3 id="11-6-2-cookie是如何工作的"><a href="#11-6-2-cookie是如何工作的" class="headerlink" title="11.6.2 cookie是如何工作的"></a>11.6.2 cookie是如何工作的</h3><p>服务器: set-cookie</p>
<p>客户端: cookie</p>
<h3 id="11-6-3-cookie罐：客户端的状态"><a href="#11-6-3-cookie罐：客户端的状态" class="headerlink" title="11.6.3 cookie罐：客户端的状态"></a>11.6.3 cookie罐：客户端的状态</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Netscape HTTP Cookie File</span><br><span class="line"># http://www.netscape.com/newsref/sta/cookie_epec.html </span><br><span class="line"># This is a generated file! Do not edit. </span><br><span class="line"># </span><br><span class="line"># domain                 allh  path secure expires name value</span><br><span class="line"></span><br><span class="line">www.fedex.com            FALSE /    FALSE 1136109676 cc    /us/ </span><br><span class="line">.bankofamericaonline.com TRUE  /    FALSE 1009789256 Btate CA</span><br><span class="line">cnn.com                  TRUE  /    FALSE 1035069235 SelEdition www</span><br><span class="line">secure.eepulse.net       FALSE /eePulse FALSE 1007162968 cid %FE%FF%002 </span><br><span class="line">www.reformamt.org        TRUE  /forum FALSE 1033761379 LastVisit 1003520952 </span><br><span class="line">www.reformamt.org        TRUE  /forum FALSE 1033761379 UserName Guest</span><br></pre></td></tr></table></figure>



<h3 id="11-6-4不同站点使用不同的cookie"><a href="#11-6-4不同站点使用不同的cookie" class="headerlink" title="11.6.4不同站点使用不同的cookie"></a>11.6.4不同站点使用不同的cookie</h3><p>浏览器只向服务器发送服务器产生的那些 cookie</p>
<h3 id="11-6-5-cookie成分"><a href="#11-6-5-cookie成分" class="headerlink" title="11.6.5 cookie成分"></a>11.6.5 cookie成分</h3><h3 id="11-6-6-cookies版本0（Netscape"><a href="#11-6-6-cookies版本0（Netscape" class="headerlink" title="11.6.6 cookies版本0（Netscape"></a>11.6.6 cookies版本0（Netscape</h3><h3 id="11-6-7-cookies版本1（RFC-2965）"><a href="#11-6-7-cookies版本1（RFC-2965）" class="headerlink" title="11.6.7 cookies版本1（RFC 2965）"></a>11.6.7 cookies版本1（RFC 2965）</h3><h3 id="11-6-8-cookie与会话跟踪"><a href="#11-6-8-cookie与会话跟踪" class="headerlink" title="11.6.8 cookie与会话跟踪"></a>11.6.8 cookie与会话跟踪</h3><h3 id="11-6-9-cookie与缓存"><a href="#11-6-9-cookie与缓存" class="headerlink" title="11.6.9 cookie与缓存"></a>11.6.9 cookie与缓存</h3><h3 id="11-6-10-cookie、安全性和隐私"><a href="#11-6-10-cookie、安全性和隐私" class="headerlink" title="11.6.10 cookie、安全性和隐私"></a>11.6.10 cookie、安全性和隐私</h3><h2 id="11-7更多信息"><a href="#11-7更多信息" class="headerlink" title="11.7更多信息"></a>11.7更多信息</h2><h1 id="第12章-基本认证机制"><a href="#第12章-基本认证机制" class="headerlink" title="第12章 基本认证机制"></a>第12章 基本认证机制</h1><h2 id="12-1认证"><a href="#12-1认证" class="headerlink" title="12.1认证"></a>12.1认证</h2><h3 id="12-1-1-HTTP的质询／响应认证框架"><a href="#12-1-1-HTTP的质询／响应认证框架" class="headerlink" title="12.1.1 HTTP的质询／响应认证框架"></a>12.1.1 HTTP的质询／响应认证框架</h3><p>401 unauthorized</p>
<h3 id="12-1-2认证协议与首部"><a href="#12-1-2认证协议与首部" class="headerlink" title="12.1.2认证协议与首部"></a>12.1.2认证协议与首部</h3><h3 id="12-1-3安全域"><a href="#12-1-3安全域" class="headerlink" title="12.1.3安全域"></a>12.1.3安全域</h3><h2 id="12-2基本认证"><a href="#12-2基本认证" class="headerlink" title="12.2基本认证"></a>12.2基本认证</h2><h3 id="12-2-1基本认证实例"><a href="#12-2-1基本认证实例" class="headerlink" title="12.2.1基本认证实例"></a>12.2.1基本认证实例</h3><h3 id="12-2-2-Base-64用户名／密码编码"><a href="#12-2-2-Base-64用户名／密码编码" class="headerlink" title="12.2.2 Base-64用户名／密码编码"></a>12.2.2 Base-64用户名／密码编码</h3><h3 id="12-2-3代理认证"><a href="#12-2-3代理认证" class="headerlink" title="12.2.3代理认证"></a>12.2.3代理认证</h3><h2 id="12-3基本认证的安全缺陷"><a href="#12-3基本认证的安全缺陷" class="headerlink" title="12.3基本认证的安全缺陷"></a>12.3基本认证的安全缺陷</h2><p>基本认证会将用户名和密码以一种很容易解码的形式表示, 实际上就是以明码传输的</p>
<p>即使加密, 也可以被拦截从而不断发送请求</p>
<h2 id="12-4更多信息"><a href="#12-4更多信息" class="headerlink" title="12.4更多信息"></a>12.4更多信息</h2><h1 id="第13章-摘要认证"><a href="#第13章-摘要认证" class="headerlink" title="第13章 摘要认证"></a>第13章 摘要认证</h1><h2 id="13-1摘要认证的改进"><a href="#13-1摘要认证的改进" class="headerlink" title="13.1摘要认证的改进"></a>13.1摘要认证的改进</h2><h3 id="13-1-1用摘要保护密码"><a href="#13-1-1用摘要保护密码" class="headerlink" title="13.1.1用摘要保护密码"></a>13.1.1用摘要保护密码</h3><p>不发送密码, 而是发送指纹或者密码的摘要</p>
<h3 id="13-1-2单向摘要"><a href="#13-1-2单向摘要" class="headerlink" title="13.1.2单向摘要"></a>13.1.2单向摘要</h3><p>MD5-&gt;128 位</p>
<h3 id="13-1-3用随机数防止重放攻击"><a href="#13-1-3用随机数防止重放攻击" class="headerlink" title="13.1.3用随机数防止重放攻击"></a>13.1.3用随机数防止重放攻击</h3><p>随机数 nonce</p>
<h3 id="13-1-4摘要认证的握手机制"><a href="#13-1-4摘要认证的握手机制" class="headerlink" title="13.1.4摘要认证的握手机制"></a>13.1.4摘要认证的握手机制</h3><h2 id="13-2摘要的计算"><a href="#13-2摘要的计算" class="headerlink" title="13.2摘要的计算"></a>13.2摘要的计算</h2><h3 id="13-2-1摘要算法的输入数据"><a href="#13-2-1摘要算法的输入数据" class="headerlink" title="13.2.1摘要算法的输入数据"></a>13.2.1摘要算法的输入数据</h3><h3 id="13-2-2算法H（d和KD（s，d）"><a href="#13-2-2算法H（d和KD（s，d）" class="headerlink" title="13.2.2算法H（d和KD（s，d）"></a>13.2.2算法H（d和KD（s，d）</h3><h3 id="13-2-3与安全性相关的数据（A1）"><a href="#13-2-3与安全性相关的数据（A1）" class="headerlink" title="13.2.3与安全性相关的数据（A1）"></a>13.2.3与安全性相关的数据（A1）</h3><h3 id="13-2-4与报文有关的数据（A2）"><a href="#13-2-4与报文有关的数据（A2）" class="headerlink" title="13.2.4与报文有关的数据（A2）"></a>13.2.4与报文有关的数据（A2）</h3><h3 id="13-2-5摘要算法总述"><a href="#13-2-5摘要算法总述" class="headerlink" title="13.2.5摘要算法总述"></a>13.2.5摘要算法总述</h3><h3 id="13-2-6摘要认证会话"><a href="#13-2-6摘要认证会话" class="headerlink" title="13.2.6摘要认证会话"></a>13.2.6摘要认证会话</h3><h3 id="13-2-7预授权"><a href="#13-2-7预授权" class="headerlink" title="13.2.7预授权"></a>13.2.7预授权</h3><p>成功时发送下一个随机数</p>
<h3 id="13-2-8随机数的选择"><a href="#13-2-8随机数的选择" class="headerlink" title="13.2.8随机数的选择"></a>13.2.8随机数的选择</h3><h3 id="13-2-9对称认证"><a href="#13-2-9对称认证" class="headerlink" title="13.2.9对称认证"></a>13.2.9对称认证</h3><h2 id="13-3增强保护质量"><a href="#13-3增强保护质量" class="headerlink" title="13.3增强保护质量"></a>13.3增强保护质量</h2><h3 id="13-3-1报文完整性保护"><a href="#13-3-1报文完整性保护" class="headerlink" title="13.3.1报文完整性保护"></a>13.3.1报文完整性保护</h3><h3 id="13-3-2摘要认证首部"><a href="#13-3-2摘要认证首部" class="headerlink" title="13.3.2摘要认证首部"></a>13.3.2摘要认证首部</h3><h2 id="13-4应该考虑的实际问题"><a href="#13-4应该考虑的实际问题" class="headerlink" title="13.4应该考虑的实际问题"></a>13.4应该考虑的实际问题</h2><h3 id="13-4-1多重质询"><a href="#13-4-1多重质询" class="headerlink" title="13.4.1多重质询"></a>13.4.1多重质询</h3><h3 id="13-4-2差错处理"><a href="#13-4-2差错处理" class="headerlink" title="13.4.2差错处理"></a>13.4.2差错处理</h3><h3 id="13-4-3保护空间"><a href="#13-4-3保护空间" class="headerlink" title="13.4.3保护空间"></a>13.4.3保护空间</h3><h3 id="13-4-4重写URI"><a href="#13-4-4重写URI" class="headerlink" title="13.4.4重写URI"></a>13.4.4重写URI</h3><h3 id="13-4-5缓存"><a href="#13-4-5缓存" class="headerlink" title="13.4.5缓存"></a>13.4.5缓存</h3><h2 id="13-5安全性考虑"><a href="#13-5安全性考虑" class="headerlink" title="13.5安全性考虑"></a>13.5安全性考虑</h2><h3 id="13-5-1首部篡改"><a href="#13-5-1首部篡改" class="headerlink" title="13.5.1首部篡改"></a>13.5.1首部篡改</h3><h3 id="13-5-2重放攻击"><a href="#13-5-2重放攻击" class="headerlink" title="13.5.2重放攻击"></a>13.5.2重放攻击</h3><h3 id="13-5-3多重认证机制"><a href="#13-5-3多重认证机制" class="headerlink" title="13.5.3多重认证机制"></a>13.5.3多重认证机制</h3><h3 id="13-5-4词典攻击"><a href="#13-5-4词典攻击" class="headerlink" title="13.5.4词典攻击"></a>13.5.4词典攻击</h3><h3 id="13-5-5恶意代理攻击和中间人攻击"><a href="#13-5-5恶意代理攻击和中间人攻击" class="headerlink" title="13.5.5恶意代理攻击和中间人攻击"></a>13.5.5恶意代理攻击和中间人攻击</h3><h3 id="13-5-6选择明文攻击"><a href="#13-5-6选择明文攻击" class="headerlink" title="13.5.6选择明文攻击"></a>13.5.6选择明文攻击</h3><p>使用摘要认证的客户端会用服务器提供的随机数来生成响应。但如果中间有一个被 入侵的或恶意的代理在拦截流景（或者有个恶意的原始服务器），就可以很容易地为 客户端的响应计算提供随机数。使用已知密钥来计算响应可以简化响应的密码分析 过程。这种方式被称为选择明文攻击 （chosen plaintext attack)。选择明文攻击有以 下几种变体形式。</p>
<h3 id="13-5-7存储密码"><a href="#13-5-7存储密码" class="headerlink" title="13.5.7存储密码"></a>13.5.7存储密码</h3><h2 id="13-6更多信息"><a href="#13-6更多信息" class="headerlink" title="13.6更多信息"></a>13.6更多信息</h2><h1 id="第14章-安全HTTP"><a href="#第14章-安全HTTP" class="headerlink" title="第14章 安全HTTP"></a>第14章 安全HTTP</h1><h2 id="14-1保护HTTP的安全"><a href="#14-1保护HTTP的安全" class="headerlink" title="14.1保护HTTP的安全"></a>14.1保护HTTP的安全</h2><h2 id="14-2数字加密"><a href="#14-2数字加密" class="headerlink" title="14.2数字加密"></a>14.2数字加密</h2><h3 id="14-2-1密码编制的机制与技巧"><a href="#14-2-1密码编制的机制与技巧" class="headerlink" title="14.2.1密码编制的机制与技巧"></a>14.2.1密码编制的机制与技巧</h3><h3 id="14-2-2密码"><a href="#14-2-2密码" class="headerlink" title="14.2.2密码"></a>14.2.2密码</h3><h3 id="14-2-3密码机"><a href="#14-2-3密码机" class="headerlink" title="14.2.3密码机"></a>14.2.3密码机</h3><h3 id="14-2-4使用了密钥的密码"><a href="#14-2-4使用了密钥的密码" class="headerlink" title="14.2.4使用了密钥的密码"></a>14.2.4使用了密钥的密码</h3><p>这些密码参数被称为秘钥(key)</p>
<h3 id="14-2-5数字密码"><a href="#14-2-5数字密码" class="headerlink" title="14.2.5数字密码"></a>14.2.5数字密码</h3><h2 id="14-3对称密钥加密技术"><a href="#14-3对称密钥加密技术" class="headerlink" title="14.3对称密钥加密技术"></a>14.3对称密钥加密技术</h2><p>e&#x3D;d&#x3D;k</p>
<h3 id="14-3-1密钥长度与枚举攻击"><a href="#14-3-1密钥长度与枚举攻击" class="headerlink" title="14.3.1密钥长度与枚举攻击"></a>14.3.1密钥长度与枚举攻击</h3><h3 id="14-3-2建立共享密钥"><a href="#14-3-2建立共享密钥" class="headerlink" title="14.3.2建立共享密钥"></a>14.3.2建立共享密钥</h3><h2 id="14-4公开密钥加密技术"><a href="#14-4公开密钥加密技术" class="headerlink" title="14.4公开密钥加密技术"></a>14.4公开密钥加密技术</h2><h3 id="14-4-1RSA"><a href="#14-4-1RSA" class="headerlink" title="14.4.1RSA"></a>14.4.1RSA</h3><h3 id="14-4-2混合加密系统和会话密钥"><a href="#14-4-2混合加密系统和会话密钥" class="headerlink" title="14.4.2混合加密系统和会话密钥"></a>14.4.2混合加密系统和会话密钥</h3><h2 id="14-5数字签名"><a href="#14-5数字签名" class="headerlink" title="14.5数字签名"></a>14.5数字签名</h2><p>签名是(用私钥)加了密的校验和</p>
<p>过程:</p>
<ul>
<li>将报文变为定长的摘要</li>
<li>对摘要进行私钥加密</li>
<li>将签名附在报文末尾一并发出</li>
</ul>
<h2 id="14-6数字证书-certs"><a href="#14-6数字证书-certs" class="headerlink" title="14.6数字证书 certs"></a>14.6数字证书 certs</h2><h3 id="14-6-1证书的主要内容"><a href="#14-6-1证书的主要内容" class="headerlink" title="14.6.1证书的主要内容"></a>14.6.1证书的主要内容</h3><ul>
<li>对象的名称</li>
<li>过期时间</li>
<li>证书发布者</li>
<li>来自发布证书者的数字签名</li>
<li>对象的公开密钥</li>
</ul>
<h4 id="14-6-2-X-509-v3证书"><a href="#14-6-2-X-509-v3证书" class="headerlink" title="14.6.2 X.509 v3证书"></a>14.6.2 X.509 v3证书</h4><h3 id="14-6-3用证书对服务器进行认证"><a href="#14-6-3用证书对服务器进行认证" class="headerlink" title="14.6.3用证书对服务器进行认证"></a>14.6.3用证书对服务器进行认证</h3><h2 id="14-7-HTTPS——细节介绍"><a href="#14-7-HTTPS——细节介绍" class="headerlink" title="14.7 HTTPS——细节介绍"></a>14.7 HTTPS——细节介绍</h2><h3 id="14-7-1-HTTPS概述"><a href="#14-7-1-HTTPS概述" class="headerlink" title="14.7.1 HTTPS概述"></a>14.7.1 HTTPS概述</h3><h3 id="14-7-2-HTTPS方案"><a href="#14-7-2-HTTPS方案" class="headerlink" title="14.7.2 HTTPS方案"></a>14.7.2 HTTPS方案</h3><p>port: 443</p>
<p>ssl 是一个二进制协议</p>
<h3 id="14-7-3建立安全传输"><a href="#14-7-3建立安全传输" class="headerlink" title="14.7.3建立安全传输"></a>14.7.3建立安全传输</h3><h3 id="14-7-4-SSL握手"><a href="#14-7-4-SSL握手" class="headerlink" title="14.7.4 SSL握手"></a>14.7.4 SSL握手</h3><h3 id="14-7-5服务器证书"><a href="#14-7-5服务器证书" class="headerlink" title="14.7.5服务器证书"></a>14.7.5服务器证书</h3><h3 id="14-7-6站点证书的有效性"><a href="#14-7-6站点证书的有效性" class="headerlink" title="14.7.6站点证书的有效性"></a>14.7.6站点证书的有效性</h3><p>CA</p>
<p>核对签名</p>
<p>验证证书中的域名和对话的服务器域名是否匹配</p>
<h3 id="14-7-7虚拟主机与证书"><a href="#14-7-7虚拟主机与证书" class="headerlink" title="14.7.7虚拟主机与证书"></a>14.7.7虚拟主机与证书</h3><h2 id="14-8-HTTPS客户端实例"><a href="#14-8-HTTPS客户端实例" class="headerlink" title="14.8 HTTPS客户端实例"></a>14.8 HTTPS客户端实例</h2><h3 id="14-8-1-OpenSSL"><a href="#14-8-1-OpenSSL" class="headerlink" title="14.8.1 OpenSSL"></a>14.8.1 OpenSSL</h3><h3 id="14-8-2简单的HTTPS客户端"><a href="#14-8-2简单的HTTPS客户端" class="headerlink" title="14.8.2简单的HTTPS客户端"></a>14.8.2简单的HTTPS客户端</h3><h3 id="14-8-3执行OpenSSL客户端"><a href="#14-8-3执行OpenSSL客户端" class="headerlink" title="14.8.3执行OpenSSL客户端"></a>14.8.3执行OpenSSL客户端</h3><h2 id="14-9通过代理以隧道形式传输安全流量"><a href="#14-9通过代理以隧道形式传输安全流量" class="headerlink" title="14.9通过代理以隧道形式传输安全流量"></a>14.9通过代理以隧道形式传输安全流量</h2><p>代理是防火墙路由器唯一允许进行 http 流量交换的设备</p>
<h2 id="14-10更多信息"><a href="#14-10更多信息" class="headerlink" title="14.10更多信息"></a>14.10更多信息</h2><h3 id="14-10-1-HTTP安全性"><a href="#14-10-1-HTTP安全性" class="headerlink" title="14.10.1 HTTP安全性"></a>14.10.1 HTTP安全性</h3><h3 id="14-10-2-SSL与TLS"><a href="#14-10-2-SSL与TLS" class="headerlink" title="14.10.2 SSL与TLS"></a>14.10.2 SSL与TLS</h3><h3 id="14-10-3公开密钥基础设施"><a href="#14-10-3公开密钥基础设施" class="headerlink" title="14.10.3公开密钥基础设施"></a>14.10.3公开密钥基础设施</h3><h3 id="14-10-4数字密码"><a href="#14-10-4数字密码" class="headerlink" title="14.10.4数字密码"></a>14.10.4数字密码</h3><h1 id="第15章-实体和编码"><a href="#第15章-实体和编码" class="headerlink" title="第15章 实体和编码"></a>第15章 实体和编码</h1><h2 id="15-1报文是箱子，实体是货物"><a href="#15-1报文是箱子，实体是货物" class="headerlink" title="15.1报文是箱子，实体是货物"></a>15.1报文是箱子，实体是货物</h2><h2 id="15-2-Content-Length：实体的大小"><a href="#15-2-Content-Length：实体的大小" class="headerlink" title="15.2 Content-Length：实体的大小"></a>15.2 Content-Length：实体的大小</h2><h3 id="15-2-1检测截尾"><a href="#15-2-1检测截尾" class="headerlink" title="15.2.1检测截尾"></a>15.2.1检测截尾</h3><h3 id="15-2-2错误的Content-Length"><a href="#15-2-2错误的Content-Length" class="headerlink" title="15.2.2错误的Content-Length"></a>15.2.2错误的Content-Length</h3><h3 id="15-2-3-Content-Length与持久连接"><a href="#15-2-3-Content-Length与持久连接" class="headerlink" title="15.2.3 Content-Length与持久连接"></a>15.2.3 Content-Length与持久连接</h3><h3 id="15-2-4内容编码"><a href="#15-2-4内容编码" class="headerlink" title="15.2.4内容编码"></a>15.2.4内容编码</h3><h3 id="15-2-5确定实体主体长度的规则"><a href="#15-2-5确定实体主体长度的规则" class="headerlink" title="15.2.5确定实体主体长度的规则"></a>15.2.5确定实体主体长度的规则</h3><h2 id="15-3实体摘要"><a href="#15-3实体摘要" class="headerlink" title="15.3实体摘要"></a>15.3实体摘要</h2><p>content-MD5</p>
<h2 id="15-4媒体类型和字符集"><a href="#15-4媒体类型和字符集" class="headerlink" title="15.4媒体类型和字符集"></a>15.4媒体类型和字符集</h2><p>content-type</p>
<h3 id="15-4-1文本的字符编码"><a href="#15-4-1文本的字符编码" class="headerlink" title="15.4.1文本的字符编码"></a>15.4.1文本的字符编码</h3><p>charset</p>
<h3 id="15-4-2多部分媒体类型"><a href="#15-4-2多部分媒体类型" class="headerlink" title="15.4.2多部分媒体类型"></a>15.4.2多部分媒体类型</h3><h3 id="15-4-3多部分表格提交"><a href="#15-4-3多部分表格提交" class="headerlink" title="15.4.3多部分表格提交"></a>15.4.3多部分表格提交</h3><h3 id="15-4-4多部分范围响应"><a href="#15-4-4多部分范围响应" class="headerlink" title="15.4.4多部分范围响应"></a>15.4.4多部分范围响应</h3><h2 id="15-5内容编码"><a href="#15-5内容编码" class="headerlink" title="15.5内容编码"></a>15.5内容编码</h2><p>这种编码是在发送方应用到内容之上的, 编好码的数据就放在实体主题中, 像往常一样发送给接收方</p>
<h3 id="15-5-1内容编码过程"><a href="#15-5-1内容编码过程" class="headerlink" title="15.5.1内容编码过程"></a>15.5.1内容编码过程</h3><h3 id="15-5-2内容编码类型"><a href="#15-5-2内容编码类型" class="headerlink" title="15.5.2内容编码类型"></a>15.5.2内容编码类型</h3><p>content-encoding</p>
<h3 id="15-5-3-Accept-Encoding首部"><a href="#15-5-3-Accept-Encoding首部" class="headerlink" title="15.5.3 Accept-Encoding首部"></a>15.5.3 Accept-Encoding首部</h3><h2 id="15-6传输编码和分块编码"><a href="#15-6传输编码和分块编码" class="headerlink" title="15.6传输编码和分块编码"></a>15.6传输编码和分块编码</h2><p>使用传输编码是为了改变报文中的数据在网络上传输的方式</p>
<p>经过内容编码的报文, 知识对报文的实体进行编码, 而传输编码作用在整个报文上, 报文自身的结构发生了变化</p>
<h3 id="15-6-1可靠传输"><a href="#15-6-1可靠传输" class="headerlink" title="15.6.1可靠传输"></a>15.6.1可靠传输</h3><h3 id="15-6-2-Transfer-Encoding首部"><a href="#15-6-2-Transfer-Encoding首部" class="headerlink" title="15.6.2 Transfer-Encoding首部"></a>15.6.2 Transfer-Encoding首部</h3><h3 id="15-6-3分块编码"><a href="#15-6-3分块编码" class="headerlink" title="15.6.3分块编码"></a>15.6.3分块编码</h3><p>分块编码把报文分割为若干个大小已知的块。块之间是紧挨着发送的，这样就不需要在发送之前知道整个报文的大小了。</p>
<p>只需要允许服务器把主体逐块发送, 说明每块的大小就可以了</p>
<p>(服务器可以以一个大小为 0 的块作为主体结束的标志)</p>
<p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h96wfa26h6j30zu0pudiy.jpg" alt="截屏2022-12-15 02.19.14"></p>
<h3 id="15-6-4内容编码与传输编码的结合"><a href="#15-6-4内容编码与传输编码的结合" class="headerlink" title="15.6.4内容编码与传输编码的结合"></a>15.6.4内容编码与传输编码的结合</h3><h3 id="15-6-5传输编码的规则"><a href="#15-6-5传输编码的规则" class="headerlink" title="15.6.5传输编码的规则"></a>15.6.5传输编码的规则</h3><h2 id="15-7随时间变化的实例"><a href="#15-7随时间变化的实例" class="headerlink" title="15.7随时间变化的实例"></a>15.7随时间变化的实例</h2><h2 id="15-8验证码和新鲜度"><a href="#15-8验证码和新鲜度" class="headerlink" title="15.8验证码和新鲜度"></a>15.8验证码和新鲜度</h2><h3 id="15-8-1新鲜度"><a href="#15-8-1新鲜度" class="headerlink" title="15.8.1新鲜度"></a>15.8.1新鲜度</h3><h3 id="15-8-2有条件的请求与验证码"><a href="#15-8-2有条件的请求与验证码" class="headerlink" title="15.8.2有条件的请求与验证码"></a>15.8.2有条件的请求与验证码</h3><h2 id="15-9范围请求"><a href="#15-9范围请求" class="headerlink" title="15.9范围请求"></a>15.9范围请求</h2><p>允许客户端实际上之请求文档的一部分, 或者说某个范围</p>
<p>range 首部</p>
<h2 id="15-10差异编码"><a href="#15-10差异编码" class="headerlink" title="15.10差异编码"></a>15.10差异编码</h2><p>delta-base</p>
<h2 id="15-11更多信息"><a href="#15-11更多信息" class="headerlink" title="15.11更多信息"></a>15.11更多信息</h2><h1 id="第16章-国际化"><a href="#第16章-国际化" class="headerlink" title="第16章 国际化"></a>第16章 国际化</h1><h2 id="16-1-HTTP对国际性内容的支持"><a href="#16-1-HTTP对国际性内容的支持" class="headerlink" title="16.1 HTTP对国际性内容的支持"></a>16.1 HTTP对国际性内容的支持</h2><h2 id="16-2字符集与HTTP"><a href="#16-2字符集与HTTP" class="headerlink" title="16.2字符集与HTTP"></a>16.2字符集与HTTP</h2><h3 id="16-2-1字符集是把字符转换为二进制码的编码"><a href="#16-2-1字符集是把字符转换为二进制码的编码" class="headerlink" title="16.2.1字符集是把字符转换为二进制码的编码"></a>16.2.1字符集是把字符转换为二进制码的编码</h3><h3 id="16-2-2字符集和编码如何工作"><a href="#16-2-2字符集和编码如何工作" class="headerlink" title="16.2.2字符集和编码如何工作"></a>16.2.2字符集和编码如何工作</h3><h3 id="16-2-3字符集不对，字符就不对"><a href="#16-2-3字符集不对，字符就不对" class="headerlink" title="16.2.3字符集不对，字符就不对"></a>16.2.3字符集不对，字符就不对</h3><h3 id="16-2-4标准化的MIME-charset值"><a href="#16-2-4标准化的MIME-charset值" class="headerlink" title="16.2.4标准化的MIME charset值"></a>16.2.4标准化的MIME charset值</h3><ul>
<li>us-ascii 8 位最高位不用, 128 个字符</li>
<li>iso-8859-1 8 位, 低 7 位和 ascii 一样, 高位支持西欧字符, 又叫 latin1, 是 html 默认字符集</li>
</ul>
<h3 id="16-2-5-Content-Type首部和Charset首部以及META标志"><a href="#16-2-5-Content-Type首部和Charset首部以及META标志" class="headerlink" title="16.2.5 Content-Type首部和Charset首部以及META标志"></a>16.2.5 Content-Type首部和Charset首部以及META标志</h3><h3 id="16-2-6-Accept-Charset首部"><a href="#16-2-6-Accept-Charset首部" class="headerlink" title="16.2.6 Accept-Charset首部"></a>16.2.6 Accept-Charset首部</h3><h2 id="16-3多语言字符编码入门"><a href="#16-3多语言字符编码入门" class="headerlink" title="16.3多语言字符编码入门"></a>16.3多语言字符编码入门</h2><h3 id="16-3-1字符集术语"><a href="#16-3-1字符集术语" class="headerlink" title="16.3.1字符集术语"></a>16.3.1字符集术语</h3><h3 id="16-3-2字符集的命名很糟糕"><a href="#16-3-2字符集的命名很糟糕" class="headerlink" title="16.3.2字符集的命名很糟糕"></a>16.3.2字符集的命名很糟糕</h3><h3 id="16-3-3字符"><a href="#16-3-3字符" class="headerlink" title="16.3.3字符"></a>16.3.3字符</h3><h3 id="16-3-4字形、连笔以及表示形式"><a href="#16-3-4字形、连笔以及表示形式" class="headerlink" title="16.3.4字形、连笔以及表示形式"></a>16.3.4字形、连笔以及表示形式</h3><h3 id="16-3-5编码后的字符集"><a href="#16-3-5编码后的字符集" class="headerlink" title="16.3.5编码后的字符集"></a>16.3.5编码后的字符集</h3><h3 id="16-3-6字符编码方案"><a href="#16-3-6字符编码方案" class="headerlink" title="16.3.6字符编码方案"></a>16.3.6字符编码方案</h3><ul>
<li>utf-8: 无模态变宽, 第一字节的高位表示编码后字符所用的字节数, 和 ascii 兼容<br><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h96wf56vqoj30x60e4mz3.jpg" alt="截屏2022-12-15 02.29.38"></li>
</ul>
<h2 id="16-4语言标记与HTTP"><a href="#16-4语言标记与HTTP" class="headerlink" title="16.4语言标记与HTTP"></a>16.4语言标记与HTTP</h2><h3 id="16-4-1-Content-Language首部"><a href="#16-4-1-Content-Language首部" class="headerlink" title="16.4.1 Content-Language首部"></a>16.4.1 Content-Language首部</h3><h3 id="16-4-2-Accept-Language首部"><a href="#16-4-2-Accept-Language首部" class="headerlink" title="16.4.2 Accept-Language首部"></a>16.4.2 Accept-Language首部</h3><h3 id="16-4-3语言标记的类型"><a href="#16-4-3语言标记的类型" class="headerlink" title="16.4.3语言标记的类型"></a>16.4.3语言标记的类型</h3><h3 id="16-4-4子标记"><a href="#16-4-4子标记" class="headerlink" title="16.4.4子标记"></a>16.4.4子标记</h3><h3 id="16-4-5大小写"><a href="#16-4-5大小写" class="headerlink" title="16.4.5大小写"></a>16.4.5大小写</h3><p>不区分大小写</p>
<h3 id="16-4-6-IANA语言标记注册"><a href="#16-4-6-IANA语言标记注册" class="headerlink" title="16.4.6 IANA语言标记注册"></a>16.4.6 IANA语言标记注册</h3><p>sgn-US-MA</p>
<p>三个子标记</p>
<h3 id="16-4-7第一个子标记——名字空间"><a href="#16-4-7第一个子标记——名字空间" class="headerlink" title="16.4.7第一个子标记——名字空间"></a>16.4.7第一个子标记——名字空间</h3><ul>
<li>zh chi&#x2F;zho</li>
<li>en eng</li>
</ul>
<h3 id="16-4-8第二个子标记——名字空间"><a href="#16-4-8第二个子标记——名字空间" class="headerlink" title="16.4.8第二个子标记——名字空间"></a>16.4.8第二个子标记——名字空间</h3><ul>
<li>中国 CN</li>
<li>英国 GB</li>
<li>美国 US</li>
</ul>
<h3 id="16-4-9其余子标记——名字空间"><a href="#16-4-9其余子标记——名字空间" class="headerlink" title="16.4.9其余子标记——名字空间"></a>16.4.9其余子标记——名字空间</h3><h3 id="16-4-10配置和语言有关的首选项"><a href="#16-4-10配置和语言有关的首选项" class="headerlink" title="16.4.10配置和语言有关的首选项"></a>16.4.10配置和语言有关的首选项</h3><h3 id="16-4-11语言标记参考表"><a href="#16-4-11语言标记参考表" class="headerlink" title="16.4.11语言标记参考表"></a>16.4.11语言标记参考表</h3><h2 id="16-5国际化的URI"><a href="#16-5国际化的URI" class="headerlink" title="16.5国际化的URI"></a>16.5国际化的URI</h2><h3 id="16-5-1全球性的可转抄能力与有意义的字符的较量"><a href="#16-5-1全球性的可转抄能力与有意义的字符的较量" class="headerlink" title="16.5.1全球性的可转抄能力与有意义的字符的较量"></a>16.5.1全球性的可转抄能力与有意义的字符的较量</h3><h3 id="16-5-2-URI字符集合"><a href="#16-5-2-URI字符集合" class="headerlink" title="16.5.2 URI字符集合"></a>16.5.2 URI字符集合</h3><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h96wefvu2aj30x007st9e.jpg" alt="截屏2022-12-15 02.31.51"></p>
<h3 id="16-5-3转义和反转义"><a href="#16-5-3转义和反转义" class="headerlink" title="16.5.3转义和反转义"></a>16.5.3转义和反转义</h3><p>%FF 两个十六进制表示 ascii</p>
<h3 id="16-5-4转义国际化字符"><a href="#16-5-4转义国际化字符" class="headerlink" title="16.5.4转义国际化字符"></a>16.5.4转义国际化字符</h3><h3 id="16-5-5-URI中的模态切换"><a href="#16-5-5-URI中的模态切换" class="headerlink" title="16.5.5 URI中的模态切换"></a>16.5.5 URI中的模态切换</h3><h2 id="16-6其他需要考虑的地方"><a href="#16-6其他需要考虑的地方" class="headerlink" title="16.6其他需要考虑的地方"></a>16.6其他需要考虑的地方</h2><h3 id="16-6-1首部和不合规范的数据"><a href="#16-6-1首部和不合规范的数据" class="headerlink" title="16.6.1首部和不合规范的数据"></a>16.6.1首部和不合规范的数据</h3><p>http 首部必须使用 ascii</p>
<p>且大小写不敏感</p>
<h3 id="16-6-2日期"><a href="#16-6-2日期" class="headerlink" title="16.6.2日期"></a>16.6.2日期</h3><h3 id="16-6-3域名"><a href="#16-6-3域名" class="headerlink" title="16.6.3域名"></a>16.6.3域名</h3><h2 id="16-7更多信息"><a href="#16-7更多信息" class="headerlink" title="16.7更多信息"></a>16.7更多信息</h2><h3 id="16-7-1附录"><a href="#16-7-1附录" class="headerlink" title="16.7.1附录"></a>16.7.1附录</h3><h3 id="16-7-2互联网的国际化"><a href="#16-7-2互联网的国际化" class="headerlink" title="16.7.2互联网的国际化"></a>16.7.2互联网的国际化</h3><h3 id="16-7-3国际标准"><a href="#16-7-3国际标准" class="headerlink" title="16.7.3国际标准"></a>16.7.3国际标准</h3><h1 id="第17章-内容协商与转码"><a href="#第17章-内容协商与转码" class="headerlink" title="第17章 内容协商与转码"></a>第17章 内容协商与转码</h1><h2 id="17-1内容协商技术"><a href="#17-1内容协商技术" class="headerlink" title="17.1内容协商技术"></a>17.1内容协商技术</h2><h2 id="17-2客户端驱动的协商"><a href="#17-2客户端驱动的协商" class="headerlink" title="17.2客户端驱动的协商"></a>17.2客户端驱动的协商</h2><h2 id="17-3服务器驱动的协商"><a href="#17-3服务器驱动的协商" class="headerlink" title="17.3服务器驱动的协商"></a>17.3服务器驱动的协商</h2><h3 id="17-3-1内容协商首部集"><a href="#17-3-1内容协商首部集" class="headerlink" title="17.3.1内容协商首部集"></a>17.3.1内容协商首部集</h3><h3 id="17-3-2内容协商首部中的质量值"><a href="#17-3-2内容协商首部中的质量值" class="headerlink" title="17.3.2内容协商首部中的质量值"></a>17.3.2内容协商首部中的质量值</h3><p>q 从 0.0 到 1.0 , 1.0 优先级最高</p>
<h3 id="17-3-3随其他首部集而变化"><a href="#17-3-3随其他首部集而变化" class="headerlink" title="17.3.3随其他首部集而变化"></a>17.3.3随其他首部集而变化</h3><h3 id="17-3-4-Apache中的内容协商"><a href="#17-3-4-Apache中的内容协商" class="headerlink" title="17.3.4 Apache中的内容协商"></a>17.3.4 Apache中的内容协商</h3><h3 id="17-3-5服务器端扩展"><a href="#17-3-5服务器端扩展" class="headerlink" title="17.3.5服务器端扩展"></a>17.3.5服务器端扩展</h3><h2 id="17-4透明协商"><a href="#17-4透明协商" class="headerlink" title="17.4透明协商"></a>17.4透明协商</h2><h3 id="17-4-1进行缓存与备用候选"><a href="#17-4-1进行缓存与备用候选" class="headerlink" title="17.4.1进行缓存与备用候选"></a>17.4.1进行缓存与备用候选</h3><h3 id="17-4-2-Vary首部"><a href="#17-4-2-Vary首部" class="headerlink" title="17.4.2 Vary首部"></a>17.4.2 Vary首部</h3><h2 id="17-5转码"><a href="#17-5转码" class="headerlink" title="17.5转码"></a>17.5转码</h2><p>服务器可以把现存的文档转换成某种客户端可用的文档</p>
<h3 id="17-5-1格式转换"><a href="#17-5-1格式转换" class="headerlink" title="17.5.1格式转换"></a>17.5.1格式转换</h3><h3 id="17-5-2信息综合"><a href="#17-5-2信息综合" class="headerlink" title="17.5.2信息综合"></a>17.5.2信息综合</h3><h3 id="17-5-3内容注入"><a href="#17-5-3内容注入" class="headerlink" title="17.5.3内容注入"></a>17.5.3内容注入</h3><h3 id="17-5-4转码与静态预生成的对比"><a href="#17-5-4转码与静态预生成的对比" class="headerlink" title="17.5.4转码与静态预生成的对比"></a>17.5.4转码与静态预生成的对比</h3><h2 id="17-6下一步计划"><a href="#17-6下一步计划" class="headerlink" title="17.6下一步计划"></a>17.6下一步计划</h2><h2 id="17-7更多信息"><a href="#17-7更多信息" class="headerlink" title="17.7更多信息"></a>17.7更多信息</h2><h1 id="第18章Web主机托管"><a href="#第18章Web主机托管" class="headerlink" title="第18章Web主机托管"></a>第18章Web主机托管</h1><h2 id="18-1主机托管服务"><a href="#18-1主机托管服务" class="headerlink" title="18.1主机托管服务"></a>18.1主机托管服务</h2><h2 id="18-2虚拟主机托管"><a href="#18-2虚拟主机托管" class="headerlink" title="18.2虚拟主机托管"></a>18.2虚拟主机托管</h2><h3 id="18-2-1虚拟服务器请求缺乏主机信息"><a href="#18-2-1虚拟服务器请求缺乏主机信息" class="headerlink" title="18.2.1虚拟服务器请求缺乏主机信息"></a>18.2.1虚拟服务器请求缺乏主机信息</h3><h3 id="18-2-2设法让虚拟主机托管正常工作"><a href="#18-2-2设法让虚拟主机托管正常工作" class="headerlink" title="18.2.2设法让虚拟主机托管正常工作"></a>18.2.2设法让虚拟主机托管正常工作</h3><h4 id="18-2-3-HTTP-x2F-1-1的Host首部"><a href="#18-2-3-HTTP-x2F-1-1的Host首部" class="headerlink" title="18.2.3 HTTP&#x2F; 1.1的Host首部"></a>18.2.3 HTTP&#x2F; 1.1的Host首部</h4><h2 id="18-3使网站更可靠"><a href="#18-3使网站更可靠" class="headerlink" title="18.3使网站更可靠"></a>18.3使网站更可靠</h2><h3 id="18-3-1镜像的服务器集群"><a href="#18-3-1镜像的服务器集群" class="headerlink" title="18.3.1镜像的服务器集群"></a>18.3.1镜像的服务器集群</h3><h3 id="18-3-2内容分发网络"><a href="#18-3-2内容分发网络" class="headerlink" title="18.3.2内容分发网络"></a>18.3.2内容分发网络</h3><h3 id="18-3-3-CDN中的反向代理缓存"><a href="#18-3-3-CDN中的反向代理缓存" class="headerlink" title="18.3.3 CDN中的反向代理缓存"></a>18.3.3 CDN中的反向代理缓存</h3><h3 id="18-3-4-CDN中的代理缓存"><a href="#18-3-4-CDN中的代理缓存" class="headerlink" title="18.3.4 CDN中的代理缓存"></a>18.3.4 CDN中的代理缓存</h3><h2 id="18-4让网站更快"><a href="#18-4让网站更快" class="headerlink" title="18.4让网站更快"></a>18.4让网站更快</h2><h2 id="18-5更多信息"><a href="#18-5更多信息" class="headerlink" title="18.5更多信息"></a>18.5更多信息</h2><h1 id="第19章-发布系统"><a href="#第19章-发布系统" class="headerlink" title="第19章 发布系统"></a>第19章 发布系统</h1><h2 id="19-1-FrontPage为支持发布而做的服务器扩展"><a href="#19-1-FrontPage为支持发布而做的服务器扩展" class="headerlink" title="19.1 FrontPage为支持发布而做的服务器扩展"></a>19.1 FrontPage为支持发布而做的服务器扩展</h2><h3 id="19-1-1-FrontPage服务器扩展"><a href="#19-1-1-FrontPage服务器扩展" class="headerlink" title="19.1.1 FrontPage服务器扩展"></a>19.1.1 FrontPage服务器扩展</h3><h3 id="19-1-2-FrontPage术语表"><a href="#19-1-2-FrontPage术语表" class="headerlink" title="19.1.2 FrontPage术语表"></a>19.1.2 FrontPage术语表</h3><h3 id="19-1-3-FrontPage的RPC协议"><a href="#19-1-3-FrontPage的RPC协议" class="headerlink" title="19.1.3 FrontPage的RPC协议"></a>19.1.3 FrontPage的RPC协议</h3><h3 id="19-1-4-FrontPage的安全模型"><a href="#19-1-4-FrontPage的安全模型" class="headerlink" title="19.1.4 FrontPage的安全模型"></a>19.1.4 FrontPage的安全模型</h3><h2 id="19-2-WebDAV与协作写作"><a href="#19-2-WebDAV与协作写作" class="headerlink" title="19.2 WebDAV与协作写作"></a>19.2 WebDAV与协作写作</h2><h3 id="19-2-1-WebDAV的方法"><a href="#19-2-1-WebDAV的方法" class="headerlink" title="19.2.1 WebDAV的方法"></a>19.2.1 WebDAV的方法</h3><h3 id="19-2-2-WebDAV与XML"><a href="#19-2-2-WebDAV与XML" class="headerlink" title="19.2.2 WebDAV与XML"></a>19.2.2 WebDAV与XML</h3><h3 id="19-2-3-WebDAV首部集"><a href="#19-2-3-WebDAV首部集" class="headerlink" title="19.2.3 WebDAV首部集"></a>19.2.3 WebDAV首部集</h3><h3 id="19-2-4-WebDAV的锁定与防止覆写"><a href="#19-2-4-WebDAV的锁定与防止覆写" class="headerlink" title="19.2.4 WebDAV的锁定与防止覆写"></a>19.2.4 WebDAV的锁定与防止覆写</h3><h3 id="19-2-5-LOCK方法"><a href="#19-2-5-LOCK方法" class="headerlink" title="19.2.5 LOCK方法"></a>19.2.5 LOCK方法</h3><h3 id="19-2-6-UNLOCK方法"><a href="#19-2-6-UNLOCK方法" class="headerlink" title="19.2.6 UNLOCK方法"></a>19.2.6 UNLOCK方法</h3><h3 id="19-2-7属性和元数据"><a href="#19-2-7属性和元数据" class="headerlink" title="19.2.7属性和元数据"></a>19.2.7属性和元数据</h3><h3 id="19-2-8-PROPFIND方法"><a href="#19-2-8-PROPFIND方法" class="headerlink" title="19.2.8 PROPFIND方法"></a>19.2.8 PROPFIND方法</h3><h3 id="19-2-9-PROPPATCH方法"><a href="#19-2-9-PROPPATCH方法" class="headerlink" title="19.2.9 PROPPATCH方法"></a>19.2.9 PROPPATCH方法</h3><h3 id="19-2-10集合与名字空间管理"><a href="#19-2-10集合与名字空间管理" class="headerlink" title="19.2.10集合与名字空间管理"></a>19.2.10集合与名字空间管理</h3><h3 id="19-2-11-MKCOL方法"><a href="#19-2-11-MKCOL方法" class="headerlink" title="19.2.11 MKCOL方法"></a>19.2.11 MKCOL方法</h3><h3 id="19-2-12-DELETE方法"><a href="#19-2-12-DELETE方法" class="headerlink" title="19.2.12 DELETE方法"></a>19.2.12 DELETE方法</h3><h3 id="19-2-13-COPY与MOVE方法"><a href="#19-2-13-COPY与MOVE方法" class="headerlink" title="19.2.13 COPY与MOVE方法"></a>19.2.13 COPY与MOVE方法</h3><h4 id="19-2-14增强的HTTP-x2F-1-1方法"><a href="#19-2-14增强的HTTP-x2F-1-1方法" class="headerlink" title="19.2.14增强的HTTP&#x2F;1.1方法"></a>19.2.14增强的HTTP&#x2F;1.1方法</h4><h3 id="19-2-15-WebDAV中的版本管理"><a href="#19-2-15-WebDAV中的版本管理" class="headerlink" title="19.2.15 WebDAV中的版本管理"></a>19.2.15 WebDAV中的版本管理</h3><h3 id="19-2-16-WebDAV的未来发展"><a href="#19-2-16-WebDAV的未来发展" class="headerlink" title="19.2.16 WebDAV的未来发展"></a>19.2.16 WebDAV的未来发展</h3><h2 id="19-3更多信息"><a href="#19-3更多信息" class="headerlink" title="19.3更多信息"></a>19.3更多信息</h2><h1 id="第20章-重定向与负载均衡"><a href="#第20章-重定向与负载均衡" class="headerlink" title="第20章 重定向与负载均衡"></a>第20章 重定向与负载均衡</h1><h2 id="20-1为什么要重定向"><a href="#20-1为什么要重定向" class="headerlink" title="20.1为什么要重定向"></a>20.1为什么要重定向</h2><h2 id="20-2重定向到何地"><a href="#20-2重定向到何地" class="headerlink" title="20.2重定向到何地"></a>20.2重定向到何地</h2><h2 id="20-3重定向协议概览"><a href="#20-3重定向协议概览" class="headerlink" title="20.3重定向协议概览"></a>20.3重定向协议概览</h2><h2 id="20-4通用的重定向方法"><a href="#20-4通用的重定向方法" class="headerlink" title="20.4通用的重定向方法"></a>20.4通用的重定向方法</h2><h3 id="20-4-1-HTTP重定向"><a href="#20-4-1-HTTP重定向" class="headerlink" title="20.4.1 HTTP重定向"></a>20.4.1 HTTP重定向</h3><p>302 redirect</p>
<p>优点: 重定向服务器知道客户端的 ip</p>
<p>缺点: </p>
<ul>
<li>原始服务器需要处理大量重定向请求</li>
<li>增加用户时延, 因为要往返两次</li>
<li>重定向服务器瘫痪站点就会瘫痪</li>
</ul>
<h3 id="20-4-2-DNS重定向"><a href="#20-4-2-DNS重定向" class="headerlink" title="20.4.2 DNS重定向"></a>20.4.2 DNS重定向</h3><p>将几个 ip 关联到一个 domain</p>
<ul>
<li>dns 轮转, 通过 dns 解析轮转发送 ip 地址实现重定向和负载均衡<br>但是缓存可能会讲 dns 查找得结果记住, 所以 dns 轮转通常不会平衡单个客户端的负载</li>
</ul>
<h3 id="20-4-3任播寻址"><a href="#20-4-3任播寻址" class="headerlink" title="20.4.3任播寻址"></a>20.4.3任播寻址</h3><p>几个地理上分散的 web 服务器拥有完全相同的 ip, 并且会通过骨干路由器的”最短路径”将客户端的请求发送给离他最近的服务器</p>
<h3 id="20-4-4-IP-MAC转发"><a href="#20-4-4-IP-MAC转发" class="headerlink" title="20.4.4 IP MAC转发"></a>20.4.4 IP MAC转发</h3><p>支持MAC 转发的第四层交换机通常会将请求转发给几个代理缓在, 并在它们之间 平衡负载。类似地，也可以将 HTTP 流量转发给备用 HTTP 服务器。</p>
<p> 因为 MAC 地址转发只是点对点的，所以服务器或代理只能位于离交换机<strong>一跳远</strong>地方。</p>
<h3 id="20-4-5-IP地址转发"><a href="#20-4-5-IP地址转发" class="headerlink" title="20.4.5 IP地址转发"></a>20.4.5 IP地址转发</h3><p>第四层设备检测 tcp&#x2F;ip 地址, 修改目的 ip 进行转发, 也叫 NAT(network address translation)</p>
<h3 id="20-4-6网元控制协议"><a href="#20-4-6网元控制协议" class="headerlink" title="20.4.6网元控制协议"></a>20.4.6网元控制协议</h3><p>NECP network element control protocol, 允许网元与服务器元素进行交互</p>
<h2 id="20-5代理的重定向方法"><a href="#20-5代理的重定向方法" class="headerlink" title="20.5代理的重定向方法"></a>20.5代理的重定向方法</h2><h3 id="20-5-1显式浏览器配置"><a href="#20-5-1显式浏览器配置" class="headerlink" title="20.5.1显式浏览器配置"></a>20.5.1显式浏览器配置</h3><p>手动</p>
<h3 id="20-5-2代理自动配置"><a href="#20-5-2代理自动配置" class="headerlink" title="20.5.2代理自动配置"></a>20.5.2代理自动配置</h3><p>PAC proxy auto config</p>
<p>PAC 是个 js 文件, 必须定义函数</p>
<p><code>function FindProxyForURL(url, host)</code></p>
<p>返回重定向的 url</p>
<h3 id="20-5-3-Web代理自动发现协议"><a href="#20-5-3-Web代理自动发现协议" class="headerlink" title="20.5.3 Web代理自动发现协议"></a>20.5.3 Web代理自动发现协议</h3><p>WPAD  web proxy auto discovery</p>
<p>CURL config URL</p>
<ul>
<li>使用 WPAD 找到 pac 文件的 curl</li>
<li>根据 curl 找到pac 文件</li>
<li>执行 pac 文件</li>
<li>发送 http 请求</li>
</ul>
<h2 id="20-6缓存重定向方法"><a href="#20-6缓存重定向方法" class="headerlink" title="20.6缓存重定向方法"></a>20.6缓存重定向方法</h2><p>WCCP web cache communication protocol</p>
<ul>
<li>启动包含了一些支持 WCCP 的路由器和缓存的网络，这些路由器和缓存之间可 以相互通信。 </li>
<li>一组路由器及其目标缓存构成一个 WCCP服务组。服务组的配置说明了要将何种流量发往何处、流量是如何发送的以及如何在服务组的缓存之间进行负载均衡。 </li>
<li>如果服务组配置为重定向 HTTP 流量，服务组中的路由器就会将 HTTP 请求发送 给服务组中的缓存。 </li>
<li>HTTP 请求抵达服务组中的路由器时，路由器会（根据对请求 IP 地址的散列，或 者“掩码&#x2F;值”的配对策略）选择服务组中的某个缓存为请求提供服务。</li>
<li>路由器向缓存发送请求分组，可以用缓存的 IP 地址来封装分组，也可以通过IP MAC 转发来实现。 如果缓存无法为请求提供服务，就将分组返回给路由器进行普通的转发。 服务组中的成员会互相交换心跳报文，不断验证对方的可用性。</li>
</ul>
<h2 id="20-7因特网缓存协议"><a href="#20-7因特网缓存协议" class="headerlink" title="20.7因特网缓存协议"></a>20.7因特网缓存协议</h2><h2 id="20-8缓存阵列路由协议"><a href="#20-8缓存阵列路由协议" class="headerlink" title="20.8缓存阵列路由协议"></a>20.8缓存阵列路由协议</h2><h2 id="20-9超文本缓存协议"><a href="#20-9超文本缓存协议" class="headerlink" title="20.9超文本缓存协议"></a>20.9超文本缓存协议</h2><h3 id="20-9-1-HTCP认证"><a href="#20-9-1-HTCP认证" class="headerlink" title="20.9.1 HTCP认证"></a>20.9.1 HTCP认证</h3><h3 id="20-9-2设置缓存策略"><a href="#20-9-2设置缓存策略" class="headerlink" title="20.9.2设置缓存策略"></a>20.9.2设置缓存策略</h3><h2 id="20-10更多信息"><a href="#20-10更多信息" class="headerlink" title="20.10更多信息"></a>20.10更多信息</h2><h1 id="第21章-日志记录与使用情况跟踪"><a href="#第21章-日志记录与使用情况跟踪" class="headerlink" title="第21章 日志记录与使用情况跟踪"></a>第21章 日志记录与使用情况跟踪</h1><h2 id="21-1记录内容"><a href="#21-1记录内容" class="headerlink" title="21.1记录内容"></a>21.1记录内容</h2><h2 id="21-2日志格式"><a href="#21-2日志格式" class="headerlink" title="21.2日志格式"></a>21.2日志格式</h2><h3 id="21-2-1常见日志格式"><a href="#21-2-1常见日志格式" class="headerlink" title="21.2.1常见日志格式"></a>21.2.1常见日志格式</h3><h3 id="21-2-2组合日志格式"><a href="#21-2-2组合日志格式" class="headerlink" title="21.2.2组合日志格式"></a>21.2.2组合日志格式</h3><h3 id="21-2-3网景扩展日志格式"><a href="#21-2-3网景扩展日志格式" class="headerlink" title="21.2.3网景扩展日志格式"></a>21.2.3网景扩展日志格式</h3><h3 id="21-2-4网景扩展2日志格式"><a href="#21-2-4网景扩展2日志格式" class="headerlink" title="21.2.4网景扩展2日志格式"></a>21.2.4网景扩展2日志格式</h3><h3 id="21-2-5-Squid代理日志格式"><a href="#21-2-5-Squid代理日志格式" class="headerlink" title="21.2.5 Squid代理日志格式"></a>21.2.5 Squid代理日志格式</h3><h2 id="21-3命中率测量"><a href="#21-3命中率测量" class="headerlink" title="21.3命中率测量"></a>21.3命中率测量</h2><h3 id="21-3-1概述"><a href="#21-3-1概述" class="headerlink" title="21.3.1概述"></a>21.3.1概述</h3><h3 id="21-3-2-Meter首部"><a href="#21-3-2-Meter首部" class="headerlink" title="21.3.2 Meter首部"></a>21.3.2 Meter首部</h3><h2 id="21-4关于隐私的考虑"><a href="#21-4关于隐私的考虑" class="headerlink" title="21.4关于隐私的考虑"></a>21.4关于隐私的考虑</h2><h2 id="21-5更多信息"><a href="#21-5更多信息" class="headerlink" title="21.5更多信息"></a>21.5更多信息</h2><h1 id="第六部分-附录"><a href="#第六部分-附录" class="headerlink" title="第六部分 附录"></a>第六部分 附录</h1><h1 id="附录A-URI方案"><a href="#附录A-URI方案" class="headerlink" title="附录A URI方案"></a>附录A URI方案</h1><h1 id="附录BHTTP状态码"><a href="#附录BHTTP状态码" class="headerlink" title="附录BHTTP状态码"></a>附录BHTTP状态码</h1><h1 id="附录C-HTTP首部参考"><a href="#附录C-HTTP首部参考" class="headerlink" title="附录C HTTP首部参考"></a>附录C HTTP首部参考</h1><h1 id="附录D-MIME类型"><a href="#附录D-MIME类型" class="headerlink" title="附录D MIME类型"></a>附录D MIME类型</h1><h1 id="附录E-Base-64编码"><a href="#附录E-Base-64编码" class="headerlink" title="附录E Base-64编码"></a>附录E Base-64编码</h1><h1 id="附录F摘要认证"><a href="#附录F摘要认证" class="headerlink" title="附录F摘要认证"></a>附录F摘要认证</h1><h1 id="附录G语言标记"><a href="#附录G语言标记" class="headerlink" title="附录G语言标记"></a>附录G语言标记</h1><h1 id="附录H-MIME字符集注册表"><a href="#附录H-MIME字符集注册表" class="headerlink" title="附录H MIME字符集注册表"></a>附录H MIME字符集注册表</h1><p>Process finished with exit code 0</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="https://sinos_wei.gitee.io">Sinos</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://sinos_wei.gitee.io/2022/12/12/http%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">https://sinos_wei.gitee.io/2022/12/12/http%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/img/cover/IMG_2617.JPG" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/12/17/tcpip%E8%AF%A6%E8%A7%A3%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"><img class="prev-cover" src="/img/cover/IMG_3302.JPG" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">tcpip详解读书笔记</div></div></a></div><div class="next-post pull-right"><a href="/2022/11/29/beginning-database-design%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"><img class="next-cover" src="/img/cover/IMG_9002.JPG" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">beginning-database-design读书笔记</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.PNG" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Sinos</div><div class="author-info__description">己所不欲, 勿施于人</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">33</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/lightmanwei"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/lightmanwei" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1143474942@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC1%E7%AB%A0HTTP%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">第1章HTTP概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-HTTP%E2%80%94%E2%80%94%E5%9B%A0%E7%89%B9%E7%BD%91%E7%9A%84%E5%A4%9A%E5%AA%92%E4%BD%93%E4%BF%A1%E4%BD%BF"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 HTTP——因特网的多媒体信使</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-Web%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%92%8C%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 Web客户端和服务器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3%E8%B5%84%E6%BA%90"><span class="toc-number">1.3.</span> <span class="toc-text">1.3资源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-1%E5%AA%92%E4%BD%93%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.3.1媒体类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-2-URI"><span class="toc-number">1.3.2.</span> <span class="toc-text">1.3.2 URI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-3-URL"><span class="toc-number">1.3.3.</span> <span class="toc-text">1.3.3 URL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-4-URN"><span class="toc-number">1.3.4.</span> <span class="toc-text">1.3.4 URN</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4%E4%BA%8B%E5%8A%A1"><span class="toc-number">1.4.</span> <span class="toc-text">1.4事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-1%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.1.</span> <span class="toc-text">1.4.1方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-2%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-number">1.4.2.</span> <span class="toc-text">1.4.2状态码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-3-Web%E9%A1%B5%E9%9D%A2%E4%B8%AD%E5%8F%AF%E4%BB%A5%E5%8C%85%E5%90%AB%E5%A4%9A%E4%B8%AA%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.4.3.</span> <span class="toc-text">1.4.3 Web页面中可以包含多个对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5%E6%8A%A5%E6%96%87"><span class="toc-number">1.5.</span> <span class="toc-text">1.5报文</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.6.</span> <span class="toc-text">1.6连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-1-TCPIP"><span class="toc-number">1.6.1.</span> <span class="toc-text">1.6.1 TCPIP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-2%E8%BF%9E%E6%8E%A5%E3%80%81IP%E5%9C%B0%E5%9D%80%E5%8F%8A%E7%AB%AF%E5%8F%A3%E5%8F%B7"><span class="toc-number">1.6.2.</span> <span class="toc-text">1.6.2连接、IP地址及端口号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-3%E4%BD%BF%E7%94%A8Telnet%E5%AE%9E%E4%BE%8B"><span class="toc-number">1.6.3.</span> <span class="toc-text">1.6.3使用Telnet实例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-7%E5%8D%8F%E8%AE%AE%E7%89%88%E6%9C%AC"><span class="toc-number">1.7.</span> <span class="toc-text">1.7协议版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-8-Web%E7%9A%84%E7%BB%93%E6%9E%84%E7%BB%84%E4%BB%B6"><span class="toc-number">1.8.</span> <span class="toc-text">1.8 Web的结构组件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8-1%E4%BB%A3%E7%90%86"><span class="toc-number">1.8.1.</span> <span class="toc-text">1.8.1代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8-2%E7%BC%93%E5%AD%98"><span class="toc-number">1.8.2.</span> <span class="toc-text">1.8.2缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8-3%E7%BD%91%E5%85%B3"><span class="toc-number">1.8.3.</span> <span class="toc-text">1.8.3网关</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8-4%E9%9A%A7%E9%81%93"><span class="toc-number">1.8.4.</span> <span class="toc-text">1.8.4隧道</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8-5-Agent%E4%BB%A3%E7%90%86"><span class="toc-number">1.8.5.</span> <span class="toc-text">1.8.5 Agent代理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-9%E8%B5%B7%E5%A7%8B%E9%83%A8%E5%88%86%E7%9A%84%E7%BB%93%E6%9D%9F%E8%AF%AD"><span class="toc-number">1.9.</span> <span class="toc-text">1.9起始部分的结束语</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-10%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">1.10.</span> <span class="toc-text">1.10更多信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-10-1-HTTP%E5%8D%8F%E8%AE%AE%E4%BF%A1%E6%81%AF"><span class="toc-number">1.10.1.</span> <span class="toc-text">1.10.1 HTTP协议信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-10-2%E5%8E%86%E5%8F%B2%E9%80%8F%E8%A7%86"><span class="toc-number">1.10.2.</span> <span class="toc-text">1.10.2历史透视</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-10-3%E5%85%B6%E4%BB%96%E4%B8%87%E7%BB%B4%E7%BD%91%E4%BF%A1%E6%81%AF"><span class="toc-number">1.10.3.</span> <span class="toc-text">1.10.3其他万维网信息</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC2%E7%AB%A0URL%E4%B8%8E%E8%B5%84%E6%BA%90"><span class="toc-number">2.</span> <span class="toc-text">第2章URL与资源</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1%E6%B5%8F%E8%A7%88%E5%9B%A0%E7%89%B9%E7%BD%91%E8%B5%84%E6%BA%90"><span class="toc-number">2.1.</span> <span class="toc-text">2.1浏览因特网资源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-URL%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 URL的语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1%E6%96%B9%E6%A1%88%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8%E4%BB%80%E4%B9%88%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.2.1.</span> <span class="toc-text">2.2.1方案——使用什么协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2%E4%B8%BB%E6%9C%BA%E4%B8%8E%E7%AB%AF%E5%8F%A3"><span class="toc-number">2.2.2.</span> <span class="toc-text">2.2.2主机与端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81"><span class="toc-number">2.2.3.</span> <span class="toc-text">2.2.3用户名和密码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-4%E8%B7%AF%E5%BE%84"><span class="toc-number">2.2.4.</span> <span class="toc-text">2.2.4路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-5%E5%8F%82%E6%95%B0"><span class="toc-number">2.2.5.</span> <span class="toc-text">2.2.5参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-6%E6%9F%A5%E8%AF%A2%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">2.2.6.</span> <span class="toc-text">2.2.6查询字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-7%E7%89%87%E6%AE%B5"><span class="toc-number">2.2.7.</span> <span class="toc-text">2.2.7片段</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-URL%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 URL快捷方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1%E7%9B%B8%E5%AF%B9URL"><span class="toc-number">2.3.1.</span> <span class="toc-text">2.3.1相对URL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-2%E8%87%AA%E5%8A%A8%E6%89%A9%E5%B1%95URL"><span class="toc-number">2.3.2.</span> <span class="toc-text">2.3.2自动扩展URL</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4%E5%90%84%E7%A7%8D%E4%BB%A4%E4%BA%BA%E5%A4%B4%E7%96%BC%E7%9A%84%E5%AD%97%E7%AC%A6"><span class="toc-number">2.4.</span> <span class="toc-text">2.4各种令人头疼的字符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-1-URL%E5%AD%97%E7%AC%A6%E9%9B%86"><span class="toc-number">2.4.1.</span> <span class="toc-text">2.4.1 URL字符集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-2%E7%BC%96%E7%A0%81%E6%9C%BA%E5%88%B6"><span class="toc-number">2.4.2.</span> <span class="toc-text">2.4.2编码机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-3%E5%AD%97%E7%AC%A6%E9%99%90%E5%88%B6"><span class="toc-number">2.4.3.</span> <span class="toc-text">2.4.3字符限制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-4%E5%8F%A6%E5%A4%96%E4%B8%80%E7%82%B9%E8%AF%B4%E6%98%8E"><span class="toc-number">2.4.4.</span> <span class="toc-text">2.4.4另外一点说明</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5%E6%96%B9%E6%A1%88%E7%9A%84%E4%B8%96%E7%95%8C"><span class="toc-number">2.5.</span> <span class="toc-text">2.5方案的世界</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6%E6%9C%AA%E6%9D%A5%E5%B1%95%E6%9C%9B"><span class="toc-number">2.6.</span> <span class="toc-text">2.6未来展望</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-7%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">2.7.</span> <span class="toc-text">2.7更多信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC3%E7%AB%A0-HTTP%E6%8A%A5%E6%96%87"><span class="toc-number">3.</span> <span class="toc-text">第3章 HTTP报文</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1%E6%8A%A5%E6%96%87%E6%B5%81"><span class="toc-number">3.1.</span> <span class="toc-text">3.1报文流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1%E6%8A%A5%E6%96%87%E6%B5%81%E5%85%A5%E6%BA%90%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">3.1.1.</span> <span class="toc-text">3.1.1报文流入源端服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2%E6%8A%A5%E6%96%87%E5%90%91%E4%B8%8B%E6%B8%B8%E6%B5%81%E5%8A%A8"><span class="toc-number">3.1.2.</span> <span class="toc-text">3.1.2报文向下游流动</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2%E6%8A%A5%E6%96%87%E7%9A%84%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86"><span class="toc-number">3.2.</span> <span class="toc-text">3.2报文的组成部分</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1%E6%8A%A5%E6%96%87%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-number">3.2.1.</span> <span class="toc-text">3.2.1报文的语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2%E8%B5%B7%E5%A7%8B%E8%A1%8C"><span class="toc-number">3.2.2.</span> <span class="toc-text">3.2.2起始行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-3%E9%A6%96%E9%83%A8"><span class="toc-number">3.2.3.</span> <span class="toc-text">3.2.3首部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-4%E5%AE%9E%E4%BD%93%E7%9A%84%E4%B8%BB%E4%BD%93%E9%83%A8%E5%88%86"><span class="toc-number">3.2.4.</span> <span class="toc-text">3.2.4实体的主体部分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-5%E7%89%88%E6%9C%AC0-9%E7%9A%84%E6%8A%A5%E6%96%87"><span class="toc-number">3.2.4.1.</span> <span class="toc-text">3.2.5版本0.9的报文</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3%E6%96%B9%E6%B3%95"><span class="toc-number">3.3.</span> <span class="toc-text">3.3方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-1-%E5%AE%89%E5%85%A8%E6%96%B9%E6%B3%95"><span class="toc-number">3.3.1.</span> <span class="toc-text">3.3.1 安全方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-2-GET"><span class="toc-number">3.3.2.</span> <span class="toc-text">3.3.2 GET</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-3-HEAD"><span class="toc-number">3.3.3.</span> <span class="toc-text">3.3.3 HEAD</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-4-PUT"><span class="toc-number">3.3.4.</span> <span class="toc-text">3.3.4 PUT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-5-POST"><span class="toc-number">3.3.5.</span> <span class="toc-text">3.3.5 POST</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-6-TRACE"><span class="toc-number">3.3.6.</span> <span class="toc-text">3.3.6 TRACE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-7-OPTIONS"><span class="toc-number">3.3.7.</span> <span class="toc-text">3.3.7 OPTIONS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-8-DELETE"><span class="toc-number">3.3.8.</span> <span class="toc-text">3.3.8 DELETE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-9%E6%89%A9%E5%B1%95%E6%96%B9%E6%B3%95"><span class="toc-number">3.3.9.</span> <span class="toc-text">3.3.9扩展方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-number">3.4.</span> <span class="toc-text">3.4状态码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5%E9%A6%96%E9%83%A8"><span class="toc-number">3.5.</span> <span class="toc-text">3.5首部</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-1%E9%80%9A%E7%94%A8%E9%A6%96%E9%83%A8"><span class="toc-number">3.5.1.</span> <span class="toc-text">3.5.1通用首部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-2%E8%AF%B7%E6%B1%82%E9%A6%96%E9%83%A8"><span class="toc-number">3.5.2.</span> <span class="toc-text">3.5.2请求首部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-3%E5%93%8D%E5%BA%94%E9%A6%96%E9%83%A8"><span class="toc-number">3.5.3.</span> <span class="toc-text">3.5.3响应首部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-4%E5%AE%9E%E4%BD%93%E9%A6%96%E9%83%A8"><span class="toc-number">3.5.4.</span> <span class="toc-text">3.5.4实体首部</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">3.6.</span> <span class="toc-text">3.6更多信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC4%E7%AB%A0-%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86"><span class="toc-number">4.</span> <span class="toc-text">第4章 连接管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-TCP%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 TCP连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-1-TCP%E7%9A%84%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E7%AE%A1%E9%81%93"><span class="toc-number">4.1.1.</span> <span class="toc-text">4.1.1 TCP的可靠数据管道</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-2-TCP%E6%B5%81%E6%98%AF%E5%88%86%E6%AE%B5%E7%9A%84%E3%80%81%E7%94%B1IP%E5%88%86%E7%BB%84%E4%BC%A0%E9%80%81"><span class="toc-number">4.1.2.</span> <span class="toc-text">4.1.2 TCP流是分段的、由IP分组传送</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-3%E4%BF%9D%E6%8C%81TCP%E8%BF%9E%E6%8E%A5%E7%9A%84%E6%AD%A3%E7%A1%AE%E8%BF%90%E8%A1%8C"><span class="toc-number">4.1.3.</span> <span class="toc-text">4.1.3保持TCP连接的正确运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-4%E7%94%A8TCP%E5%A5%97%E6%8E%A5%E5%AD%97%E7%BC%96%E7%A8%8B"><span class="toc-number">4.1.4.</span> <span class="toc-text">4.1.4用TCP套接字编程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2%E5%AF%B9TCP%E6%80%A7%E8%83%BD%E7%9A%84%E8%80%83%E8%99%91"><span class="toc-number">4.2.</span> <span class="toc-text">4.2对TCP性能的考虑</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-HTTP%E4%BA%8B%E5%8A%A1%E7%9A%84%E6%97%B6%E5%BB%B6"><span class="toc-number">4.2.1.</span> <span class="toc-text">4.2.1 HTTP事务的时延</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2-%E6%80%A7%E8%83%BD%E8%81%9A%E7%84%A6%E5%8C%BA%E5%9F%9F"><span class="toc-number">4.2.2.</span> <span class="toc-text">4.2.2 性能聚焦区域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-3-TCP%E8%BF%9E%E6%8E%A5%E7%9A%84%E6%8F%A1%E6%89%8B%E6%97%B6%E5%BB%B6"><span class="toc-number">4.2.3.</span> <span class="toc-text">4.2.3 TCP连接的握手时延</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-4%E5%BB%B6%E8%BF%9F%E7%A1%AE%E8%AE%A4"><span class="toc-number">4.2.4.</span> <span class="toc-text">4.2.4延迟确认</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-5-TCP%E6%85%A2%E5%90%AF%E5%8A%A8"><span class="toc-number">4.2.5.</span> <span class="toc-text">4.2.5 TCP慢启动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-6-Nagle%E7%AE%97%E6%B3%95%E4%B8%8ETCP-NODELAY"><span class="toc-number">4.2.6.</span> <span class="toc-text">4.2.6 Nagle算法与TCP_NODELAY</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-7-TIME-WAIT%E7%B4%AF%E7%A7%AF%E4%B8%8E%E7%AB%AF%E5%8F%A3%E8%80%97%E5%B0%BD"><span class="toc-number">4.2.7.</span> <span class="toc-text">4.2.7 TIME_WAIT累积与端口耗尽</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-HTTP%E8%BF%9E%E6%8E%A5%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 HTTP连接的处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-1%E5%B8%B8%E8%A2%AB%E8%AF%AF%E8%A7%A3%E7%9A%84Connection%E9%A6%96%E9%83%A8"><span class="toc-number">4.3.1.</span> <span class="toc-text">4.3.1常被误解的Connection首部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-2%E4%B8%B2%E8%A1%8C%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86%E6%97%B6%E5%BB%B6"><span class="toc-number">4.3.2.</span> <span class="toc-text">4.3.2串行事务处理时延</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4%E5%B9%B6%E8%A1%8C%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.4.</span> <span class="toc-text">4.4并行连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-1%E5%B9%B6%E8%A1%8C%E8%BF%9E%E6%8E%A5%E5%8F%AF%E8%83%BD%E4%BC%9A%E6%8F%90%E9%AB%98%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%8A%A0%E8%BD%BD%E9%80%9F%E5%BA%A6"><span class="toc-number">4.4.1.</span> <span class="toc-text">4.4.1并行连接可能会提高页面的加载速度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-2%E5%B9%B6%E8%A1%8C%E8%BF%9E%E6%8E%A5%E4%B8%8D%E4%B8%80%E5%AE%9A%E6%9B%B4%E5%BF%AB"><span class="toc-number">4.4.2.</span> <span class="toc-text">4.4.2并行连接不一定更快</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-3%E5%B9%B6%E8%A1%8C%E8%BF%9E%E6%8E%A5%E5%8F%AF%E8%83%BD%E8%AE%A9%E4%BA%BA%E2%80%9C%E6%84%9F%E8%A7%89%E2%80%9D%E6%9B%B4%E5%BF%AB%E4%B8%80%E4%BA%9B"><span class="toc-number">4.4.3.</span> <span class="toc-text">4.4.3并行连接可能让人“感觉”更快一些</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5%E6%8C%81%E4%B9%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.5.</span> <span class="toc-text">4.5持久连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-1-%E6%8C%81%E4%B9%85%E4%BB%A5%E5%8F%8A%E5%B9%B6%E8%A1%8C%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.5.1.</span> <span class="toc-text">4.5.1 持久以及并行连接</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-2-HTTP-x2F-1-0-keep-alive%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.5.1.1.</span> <span class="toc-text">4.5.2 HTTP&#x2F;1.0+ keep-alive连接</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-3-Keep-Alive%E6%93%8D%E4%BD%9C"><span class="toc-number">4.5.2.</span> <span class="toc-text">4.5.3 Keep-Alive操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-4-Keep-Alive%E9%80%89%E9%A1%B9"><span class="toc-number">4.5.3.</span> <span class="toc-text">4.5.4 Keep-Alive选项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-5-Keep-Alive%E8%BF%9E%E6%8E%A5%E7%9A%84%E9%99%90%E5%88%B6%E5%92%8C%E8%A7%84%E5%88%99"><span class="toc-number">4.5.4.</span> <span class="toc-text">4.5.5 Keep-Alive连接的限制和规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-6-Keep-Alive%E5%92%8C%E5%93%91%E4%BB%A3%E7%90%86"><span class="toc-number">4.5.5.</span> <span class="toc-text">4.5.6 Keep-Alive和哑代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-7%E6%8F%92%E5%85%A5Proxy-Connection"><span class="toc-number">4.5.6.</span> <span class="toc-text">4.5.7插入Proxy-Connection</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-8-HTTP-x2F-1-1%E6%8C%81%E4%B9%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.5.6.1.</span> <span class="toc-text">4.5.8 HTTP&#x2F; 1.1持久连接</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-9%E6%8C%81%E4%B9%85%E8%BF%9E%E6%8E%A5%E7%9A%84%E9%99%90%E5%88%B6%E5%92%8C%E8%A7%84%E5%88%99"><span class="toc-number">4.5.7.</span> <span class="toc-text">4.5.9持久连接的限制和规则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-6%E7%AE%A1%E9%81%93%E5%8C%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.6.</span> <span class="toc-text">4.6管道化连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-7%E5%85%B3%E9%97%AD%E8%BF%9E%E6%8E%A5%E7%9A%84%E5%A5%A5%E7%A7%98"><span class="toc-number">4.7.</span> <span class="toc-text">4.7关闭连接的奥秘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7-1%E2%80%9C%E4%BB%BB%E6%84%8F%E2%80%9D%E8%A7%A3%E9%99%A4%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.7.1.</span> <span class="toc-text">4.7.1“任意”解除连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7-2-Content-Length%E5%8F%8A%E6%88%AA%E5%B0%BE%E6%93%8D%E4%BD%9C"><span class="toc-number">4.7.2.</span> <span class="toc-text">4.7.2 Content-Length及截尾操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7-3%E8%BF%9E%E6%8E%A5%E5%85%B3%E9%97%AD%E5%AE%B9%E9%99%90%E3%80%81%E9%87%8D%E8%AF%95%E4%BB%A5%E5%8F%8A%E5%B9%82%E7%AD%89%E6%80%A7"><span class="toc-number">4.7.3.</span> <span class="toc-text">4.7.3连接关闭容限、重试以及幂等性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7-4%E6%AD%A3%E5%B8%B8%E5%85%B3%E9%97%AD%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.7.4.</span> <span class="toc-text">4.7.4正常关闭连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-8%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">4.8.</span> <span class="toc-text">4.8更多信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8-1-HTTP%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.8.1.</span> <span class="toc-text">4.8.1 HTTP连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8-2-HTTP%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98"><span class="toc-number">4.8.2.</span> <span class="toc-text">4.8.2 HTTP性能问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8-3-TCPIP"><span class="toc-number">4.8.3.</span> <span class="toc-text">4.8.3 TCPIP</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC5%E7%AB%A0Web%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">5.</span> <span class="toc-text">第5章Web服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1%E5%90%84%E7%A7%8D%E5%BD%A2%E7%8A%B6%E5%92%8C%E5%B0%BA%E5%AF%B8%E7%9A%84Web%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">5.1.</span> <span class="toc-text">5.1各种形状和尺寸的Web服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-1-Web%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.1.1.</span> <span class="toc-text">5.1.1 Web服务器的实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-2%E9%80%9A%E7%94%A8%E8%BD%AF%E4%BB%B6Web%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">5.1.2.</span> <span class="toc-text">5.1.2通用软件Web服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-3-Web%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%BE%E5%A4%87"><span class="toc-number">5.1.3.</span> <span class="toc-text">5.1.3 Web服务器设备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-4%E5%B5%8C%E5%85%A5%E5%BC%8FWeb%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">5.1.4.</span> <span class="toc-text">5.1.4嵌入式Web服务器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2%E6%9C%80%E5%B0%8F%E7%9A%84Perl-Web%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">5.2.</span> <span class="toc-text">5.2最小的Perl Web服务器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3%E5%AE%9E%E9%99%85%E7%9A%84Web%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BC%9A%E5%81%9A%E4%BA%9B%E4%BB%80%E4%B9%88"><span class="toc-number">5.3.</span> <span class="toc-text">5.3实际的Web服务器会做些什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4%E7%AC%AC%E4%B8%80%E6%AD%A5%E2%80%94%E2%80%94%E6%8E%A5%E5%8F%97%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.4.</span> <span class="toc-text">5.4第一步——接受客户端连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-1%E5%A4%84%E7%90%86%E6%96%B0%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.4.1.</span> <span class="toc-text">5.4.1处理新连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-2%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%BB%E6%9C%BA%E5%90%8D%E8%AF%86%E5%88%AB"><span class="toc-number">5.4.2.</span> <span class="toc-text">5.4.2客户端主机名识别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-3%E9%80%9A%E8%BF%87ident%E7%A1%AE%E5%AE%9A%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%94%A8%E6%88%B7"><span class="toc-number">5.4.3.</span> <span class="toc-text">5.4.3通过ident确定客户端用户</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5%E7%AC%AC%E4%BA%8C%E6%AD%A5%E2%80%94%E2%80%94%E6%8E%A5%E6%94%B6%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87"><span class="toc-number">5.5.</span> <span class="toc-text">5.5第二步——接收请求报文</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-1%E6%8A%A5%E6%96%87%E7%9A%84%E5%86%85%E9%83%A8%E8%A1%A8%E7%A4%BA%E6%B3%95"><span class="toc-number">5.5.1.</span> <span class="toc-text">5.5.1报文的内部表示法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-2%E8%BF%9E%E6%8E%A5%E7%9A%84%E8%BE%93%E5%85%A5%EF%BC%8F%E8%BE%93%E5%87%BA%E5%A4%84%E7%90%86%E7%BB%93%E6%9E%84"><span class="toc-number">5.5.2.</span> <span class="toc-text">5.5.2连接的输入／输出处理结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-6%E7%AC%AC%E4%B8%89%E6%AD%A5%E2%80%94%E2%80%94%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82"><span class="toc-number">5.6.</span> <span class="toc-text">5.6第三步——处理请求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-7%E7%AC%AC%E5%9B%9B%E6%AD%A5%E2%80%94%E2%80%94%E5%AF%B9%E8%B5%84%E6%BA%90%E7%9A%84%E6%98%A0%E5%B0%84%E5%8F%8A%E8%AE%BF%E9%97%AE"><span class="toc-number">5.7.</span> <span class="toc-text">5.7第四步——对资源的映射及访问</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-1-docroot"><span class="toc-number">5.7.1.</span> <span class="toc-text">5.7.1 docroot</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-2%E7%9B%AE%E5%BD%95%E5%88%97%E8%A1%A8"><span class="toc-number">5.7.2.</span> <span class="toc-text">5.7.2目录列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-3%E5%8A%A8%E6%80%81%E5%86%85%E5%AE%B9%E8%B5%84%E6%BA%90%E7%9A%84%E6%98%A0%E5%B0%84"><span class="toc-number">5.7.3.</span> <span class="toc-text">5.7.3动态内容资源的映射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-4%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%8C%85%E5%90%AB%E9%A1%B9"><span class="toc-number">5.7.4.</span> <span class="toc-text">5.7.4服务器端包含项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-5%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6"><span class="toc-number">5.7.5.</span> <span class="toc-text">5.7.5访问控制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-8%E7%AC%AC%E4%BA%94%E6%AD%A5%E2%80%94%E2%80%94%E6%9E%84%E5%BB%BA%E5%93%8D%E5%BA%94"><span class="toc-number">5.8.</span> <span class="toc-text">5.8第五步——构建响应</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8-1%E5%93%8D%E5%BA%94%E5%AE%9E%E4%BD%93"><span class="toc-number">5.8.1.</span> <span class="toc-text">5.8.1响应实体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8-2-MIME%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.8.2.</span> <span class="toc-text">5.8.2 MIME类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8-3%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">5.8.3.</span> <span class="toc-text">5.8.3重定向</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-9%E7%AC%AC%E5%85%AD%E6%AD%A5%E2%80%94%E2%80%94%E5%8F%91%E9%80%81%E5%93%8D%E5%BA%94"><span class="toc-number">5.9.</span> <span class="toc-text">5.9第六步——发送响应</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-10%E7%AC%AC%E4%B8%83%E6%AD%A5%E2%80%94%E2%80%94%E8%AE%B0%E5%BD%95%E6%97%A5%E5%BF%97"><span class="toc-number">5.10.</span> <span class="toc-text">5.10第七步——记录日志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-11%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">5.11.</span> <span class="toc-text">5.11更多信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC6%E7%AB%A0-%E4%BB%A3%E7%90%86"><span class="toc-number">6.</span> <span class="toc-text">第6章 代理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-Web%E7%9A%84%E4%B8%AD%E9%97%B4%E5%AE%9E%E4%BD%93"><span class="toc-number">6.1.</span> <span class="toc-text">6.1 Web的中间实体</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-1%E7%A7%81%E6%9C%89%E5%92%8C%E5%85%B1%E4%BA%AB%E4%BB%A3%E7%90%86"><span class="toc-number">6.1.1.</span> <span class="toc-text">6.1.1私有和共享代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-2%E4%BB%A3%E7%90%86%E4%B8%8E%E7%BD%91%E5%85%B3%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="toc-number">6.1.2.</span> <span class="toc-text">6.1.2代理与网关的对比</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86"><span class="toc-number">6.2.</span> <span class="toc-text">6.2为什么使用代理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3%E4%BB%A3%E7%90%86%E4%BC%9A%E5%8E%BB%E5%BE%80%E4%BD%95%E5%A4%84"><span class="toc-number">6.3.</span> <span class="toc-text">6.3代理会去往何处</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-1%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2"><span class="toc-number">6.3.1.</span> <span class="toc-text">6.3.1代理服务器的部署</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-2%E4%BB%A3%E7%90%86%E7%9A%84%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84"><span class="toc-number">6.3.2.</span> <span class="toc-text">6.3.2代理的层次结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-3%E4%BB%A3%E7%90%86%E6%98%AF%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E6%B5%81%E9%87%8F%E7%9A%84"><span class="toc-number">6.3.3.</span> <span class="toc-text">6.3.3代理是如何获取流量的</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E4%BB%A3%E7%90%86%E8%AE%BE%E7%BD%AE"><span class="toc-number">6.4.</span> <span class="toc-text">6.4客户端的代理设置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-1%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE%EF%BC%9A%E6%89%8B%E5%B7%A5%E9%85%8D%E7%BD%AE"><span class="toc-number">6.4.1.</span> <span class="toc-text">6.4.1客户端的代理配置：手工配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-2%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE%EF%BC%9APAC%E6%96%87%E4%BB%B6"><span class="toc-number">6.4.2.</span> <span class="toc-text">6.4.2客户端代理配置：PAC文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-3%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE%EF%BC%9AWPAD"><span class="toc-number">6.4.3.</span> <span class="toc-text">6.4.3客户端代理配置：WPAD</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5%E4%B8%8E%E4%BB%A3%E7%90%86%E8%AF%B7%E6%B1%82%E6%9C%89%E5%85%B3%E7%9A%84%E4%B8%80%E4%BA%9B%E6%A3%98%E6%89%8B%E9%97%AE%E9%A2%98"><span class="toc-number">6.5.</span> <span class="toc-text">6.5与代理请求有关的一些棘手问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-1%E4%BB%A3%E7%90%86URI%E4%B8%8E%E6%9C%8D%E5%8A%A1%E5%99%A8URI%E7%9A%84%E4%B8%8D%E5%90%8C"><span class="toc-number">6.5.1.</span> <span class="toc-text">6.5.1代理URI与服务器URI的不同</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-2%E4%B8%8E%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA%E4%B8%80%E6%A0%B7%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">6.5.2.</span> <span class="toc-text">6.5.2与虚拟主机一样的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-3%E6%8B%A6%E6%88%AA%E4%BB%A3%E7%90%86%E4%BC%9A%E6%94%B6%E5%88%B0%E9%83%A8%E5%88%86URI"><span class="toc-number">6.5.3.</span> <span class="toc-text">6.5.3拦截代理会收到部分URI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-4%E4%BB%A3%E7%90%86%E6%97%A2%E5%8F%AF%E4%BB%A5%E5%A4%84%E7%90%86%E4%BB%A3%E7%90%86%E8%AF%B7%E6%B1%82%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%A4%84%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%B7%E6%B1%82"><span class="toc-number">6.5.4.</span> <span class="toc-text">6.5.4代理既可以处理代理请求，也可以处理服务器请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-5%E8%BD%AC%E5%8F%91%E8%BF%87%E7%A8%8B%E4%B8%AD%E5%AF%B9URI%E7%9A%84%E4%BF%AE%E6%94%B9"><span class="toc-number">6.5.5.</span> <span class="toc-text">6.5.5转发过程中对URI的修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-6-URI%E7%9A%84%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%87%AA%E5%8A%A8%E6%89%A9%E5%B1%95%E5%92%8C%E4%B8%BB%E6%9C%BA%E5%90%8D%E8%A7%A3%E6%9E%90"><span class="toc-number">6.5.6.</span> <span class="toc-text">6.5.6 URI的客户端自动扩展和主机名解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-7%E6%B2%A1%E6%9C%89%E4%BB%A3%E7%90%86%E6%97%B6URI%E7%9A%84%E8%A7%A3%E6%9E%90"><span class="toc-number">6.5.7.</span> <span class="toc-text">6.5.7没有代理时URI的解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-8%E6%9C%89%E6%98%BE%E5%BC%8F%E4%BB%A3%E7%90%86%E6%97%B6URI%E7%9A%84%E8%A7%A3%E6%9E%90"><span class="toc-number">6.5.8.</span> <span class="toc-text">6.5.8有显式代理时URI的解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-9%E6%9C%89%E6%8B%A6%E6%88%AA%E4%BB%A3%E7%90%86%E6%97%B6URI%E7%9A%84%E8%A7%A3%E6%9E%90"><span class="toc-number">6.5.9.</span> <span class="toc-text">6.5.9有拦截代理时URI的解析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-6%E8%BF%BD%E8%B8%AA%E6%8A%A5%E6%96%87"><span class="toc-number">6.6.</span> <span class="toc-text">6.6追踪报文</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-1-via%E9%A6%96%E9%83%A8"><span class="toc-number">6.6.1.</span> <span class="toc-text">6.6.1 via首部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-2-TRACE%E6%96%B9%E6%B3%95"><span class="toc-number">6.6.2.</span> <span class="toc-text">6.6.2 TRACE方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-7%E4%BB%A3%E7%90%86%E8%AE%A4%E8%AF%81"><span class="toc-number">6.7.</span> <span class="toc-text">6.7代理认证</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-8%E4%BB%A3%E7%90%86%E7%9A%84%E4%BA%92%E6%93%8D%E4%BD%9C%E6%80%A7"><span class="toc-number">6.8.</span> <span class="toc-text">6.8代理的互操作性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-8-1%E5%A4%84%E7%90%86%E4%BB%A3%E7%90%86%E4%B8%8D%E6%94%AF%E6%8C%81%E7%9A%84%E9%A6%96%E9%83%A8%E5%92%8C%E6%96%B9%E6%B3%95"><span class="toc-number">6.8.1.</span> <span class="toc-text">6.8.1处理代理不支持的首部和方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-8-2-OPTIONS%EF%BC%9A%E5%8F%91%E7%8E%B0%E5%AF%B9%E5%8F%AF%E9%80%89%E7%89%B9%E6%80%A7%E7%9A%84%E6%94%AF%E6%8C%81"><span class="toc-number">6.8.2.</span> <span class="toc-text">6.8.2 OPTIONS：发现对可选特性的支持</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-8-3-Allow%E9%A6%96%E9%83%A8"><span class="toc-number">6.8.3.</span> <span class="toc-text">6.8.3 Allow首部</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-9%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">6.9.</span> <span class="toc-text">6.9更多信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC7%E7%AB%A0-%E7%BC%93%E5%AD%98"><span class="toc-number">7.</span> <span class="toc-text">第7章 缓存</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1%E5%86%97%E4%BD%99%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93"><span class="toc-number">7.1.</span> <span class="toc-text">7.1冗余的数据传输</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2%E5%B8%A6%E5%AE%BD%E7%93%B6%E9%A2%88"><span class="toc-number">7.2.</span> <span class="toc-text">7.2带宽瓶颈</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3%E7%9E%AC%E9%97%B4%E6%8B%A5%E5%A1%9E"><span class="toc-number">7.3.</span> <span class="toc-text">7.3瞬间拥塞</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-4%E8%B7%9D%E7%A6%BB%E6%97%B6%E5%BB%B6"><span class="toc-number">7.4.</span> <span class="toc-text">7.4距离时延</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-5%E5%91%BD%E4%B8%AD%E5%92%8C%E6%9C%AA%E5%91%BD%E4%B8%AD%E7%9A%84"><span class="toc-number">7.5.</span> <span class="toc-text">7.5命中和未命中的</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-1%E5%86%8D%E9%AA%8C%E8%AF%81"><span class="toc-number">7.5.1.</span> <span class="toc-text">7.5.1再验证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-2%E5%91%BD%E4%B8%AD%E7%8E%87"><span class="toc-number">7.5.2.</span> <span class="toc-text">7.5.2命中率</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-3%E5%AD%97%E8%8A%82%E5%91%BD%E4%B8%AD%E7%8E%87"><span class="toc-number">7.5.3.</span> <span class="toc-text">7.5.3字节命中率</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-4%E5%8C%BA%E5%88%86%E5%91%BD%E4%B8%AD%E5%92%8C%E6%9C%AA%E5%91%BD%E4%B8%AD%E7%9A%84%E6%83%85%E5%86%B5"><span class="toc-number">7.5.4.</span> <span class="toc-text">7.5.4区分命中和未命中的情况</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-6%E7%BC%93%E5%AD%98%E7%9A%84%E6%8B%93%E6%89%91%E7%BB%93%E6%9E%84"><span class="toc-number">7.6.</span> <span class="toc-text">7.6缓存的拓扑结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-6-1%E7%A7%81%E6%9C%89%E7%BC%93%E5%AD%98"><span class="toc-number">7.6.1.</span> <span class="toc-text">7.6.1私有缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-6-2%E5%85%AC%E6%9C%89%E4%BB%A3%E7%90%86%E7%BC%93%E5%AD%98"><span class="toc-number">7.6.2.</span> <span class="toc-text">7.6.2公有代理缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-6-3%E4%BB%A3%E7%90%86%E7%BC%93%E5%AD%98%E7%9A%84%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84"><span class="toc-number">7.6.3.</span> <span class="toc-text">7.6.3代理缓存的层次结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-6-4%E7%BD%91%E7%8A%B6%E7%BC%93%E5%AD%98%E3%80%81%E5%86%85%E5%AE%B9%E8%B7%AF%E7%94%B1%E4%BB%A5%E5%8F%8A%E5%AF%B9%E7%AD%89%E7%BC%93%E5%AD%98"><span class="toc-number">7.6.4.</span> <span class="toc-text">7.6.4网状缓存、内容路由以及对等缓存</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-7%E7%BC%93%E5%AD%98%E7%9A%84%E5%A4%84%E7%90%86%E6%AD%A5%E9%AA%A4"><span class="toc-number">7.7.</span> <span class="toc-text">7.7缓存的处理步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-1%E7%AC%AC%E4%B8%80%E6%AD%A5%E2%80%94%E2%80%94%E6%8E%A5%E6%94%B6"><span class="toc-number">7.7.1.</span> <span class="toc-text">7.7.1第一步——接收</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-2%E7%AC%AC%E4%BA%8C%E6%AD%A5%E2%80%94%E2%80%94%E8%A7%A3%E6%9E%90"><span class="toc-number">7.7.2.</span> <span class="toc-text">7.7.2第二步——解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-3%E7%AC%AC%E4%B8%89%E6%AD%A5%E2%80%94%E2%80%94%E6%9F%A5%E6%89%BE"><span class="toc-number">7.7.3.</span> <span class="toc-text">7.7.3第三步——查找</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-4%E7%AC%AC%E5%9B%9B%E6%AD%A5%E2%80%94%E2%80%94%E6%96%B0%E9%B2%9C%E5%BA%A6%E6%A3%80%E6%B5%8B"><span class="toc-number">7.7.4.</span> <span class="toc-text">7.7.4第四步——新鲜度检测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-5%E7%AC%AC%E4%BA%94%E6%AD%A5%E2%80%94%E2%80%94%E5%88%9B%E5%BB%BA%E5%93%8D%E5%BA%94"><span class="toc-number">7.7.5.</span> <span class="toc-text">7.7.5第五步——创建响应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-6%E7%AC%AC%E5%85%AD%E6%AD%A5%E2%80%94%E2%80%94%E5%8F%91%E9%80%81"><span class="toc-number">7.7.6.</span> <span class="toc-text">7.7.6第六步——发送</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-7%E7%AC%AC%E4%B8%83%E6%AD%A5%E2%80%94%E2%80%94%E6%97%A5%E5%BF%97"><span class="toc-number">7.7.7.</span> <span class="toc-text">7.7.7第七步——日志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-8%E7%BC%93%E5%AD%98%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B%E5%9B%BE"><span class="toc-number">7.7.8.</span> <span class="toc-text">7.7.8缓存处理流程图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-8%E4%BF%9D%E6%8C%81%E5%89%AF%E6%9C%AC%E7%9A%84%E6%96%B0%E9%B2%9C"><span class="toc-number">7.8.</span> <span class="toc-text">7.8保持副本的新鲜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-8-1%E6%96%87%E6%A1%A3%E8%BF%87%E6%9C%9F"><span class="toc-number">7.8.1.</span> <span class="toc-text">7.8.1文档过期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-8-2%E8%BF%87%E6%9C%9F%E6%97%A5%E6%9C%9F%E5%92%8C%E4%BD%BF%E7%94%A8%E6%9C%9F"><span class="toc-number">7.8.2.</span> <span class="toc-text">7.8.2过期日期和使用期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-8-3%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%86%8D%E9%AA%8C%E8%AF%81"><span class="toc-number">7.8.3.</span> <span class="toc-text">7.8.3服务器再验证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-8-4%E7%94%A8%E6%9D%A1%E4%BB%B6%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E5%86%8D%E9%AA%8C%E8%AF%81"><span class="toc-number">7.8.4.</span> <span class="toc-text">7.8.4用条件方法进行再验证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-8-5-If-Modified-Since%EF%BC%9ADate%E5%86%8D%E9%AA%8C%E8%AF%81"><span class="toc-number">7.8.5.</span> <span class="toc-text">7.8.5 If-Modified-Since：Date再验证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-8-6-If-None-Match%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%A0%87%E7%AD%BE%E5%86%8D%E9%AA%8C%E8%AF%81"><span class="toc-number">7.8.6.</span> <span class="toc-text">7.8.6 If-None-Match：实体标签再验证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-8-7%E5%BC%BA%E5%BC%B1%E9%AA%8C%E8%AF%81%E5%99%A8"><span class="toc-number">7.8.7.</span> <span class="toc-text">7.8.7强弱验证器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-8-8%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E5%BA%94%E8%AF%A5%E4%BD%BF%E7%94%A8%E5%AE%9E%E4%BD%93%E6%A0%87%E7%AD%BE%E5%92%8C%E6%9C%80%E8%BF%91%E4%BF%AE%E6%94%B9%E6%97%A5%E6%9C%9F"><span class="toc-number">7.8.8.</span> <span class="toc-text">7.8.8什么时候应该使用实体标签和最近修改日期</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-9%E6%8E%A7%E5%88%B6%E7%BC%93%E5%AD%98%E7%9A%84%E8%83%BD%E5%8A%9B"><span class="toc-number">7.9.</span> <span class="toc-text">7.9控制缓存的能力</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-9-1-no-Store%E4%B8%8Eno-Cache%E5%93%8D%E5%BA%94%E9%A6%96%E9%83%A8"><span class="toc-number">7.9.1.</span> <span class="toc-text">7.9.1 no-Store与no-Cache响应首部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-9-2-max-age%E5%93%8D%E5%BA%94%E9%A6%96%E9%83%A8"><span class="toc-number">7.9.2.</span> <span class="toc-text">7.9.2 max-age响应首部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-9-3-Expires%E5%93%8D%E5%BA%94%E9%A6%96%E9%83%A8"><span class="toc-number">7.9.3.</span> <span class="toc-text">7.9.3 Expires响应首部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-9-4-must-revalidate%E5%93%8D%E5%BA%94%E9%A6%96%E9%83%A8"><span class="toc-number">7.9.4.</span> <span class="toc-text">7.9.4 must-revalidate响应首部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-9-5%E8%AF%95%E6%8E%A2%E6%80%A7%E8%BF%87%E6%9C%9F"><span class="toc-number">7.9.5.</span> <span class="toc-text">7.9.5试探性过期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-9-6%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E6%96%B0%E9%B2%9C%E5%BA%A6%E9%99%90%E5%88%B6"><span class="toc-number">7.9.6.</span> <span class="toc-text">7.9.6客户端的新鲜度限制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-9-7%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">7.9.7.</span> <span class="toc-text">7.9.7注意事项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-10%E8%AE%BE%E7%BD%AE%E7%BC%93%E5%AD%98%E6%8E%A7%E5%88%B6"><span class="toc-number">7.10.</span> <span class="toc-text">7.10设置缓存控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-10-1%E6%8E%A7%E5%88%B6Apache%E7%9A%84HTTP%E9%A6%96%E9%83%A8"><span class="toc-number">7.10.1.</span> <span class="toc-text">7.10.1控制Apache的HTTP首部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-10-2%E9%80%9A%E8%BF%87HTTP-EQUIv%E6%8E%A7%E5%88%B6HTML%E7%BC%93%E5%AD%98"><span class="toc-number">7.10.2.</span> <span class="toc-text">7.10.2通过HTTP-EQUIv控制HTML缓存</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-11%E8%AF%A6%E7%BB%86%E7%AE%97%E6%B3%95"><span class="toc-number">7.11.</span> <span class="toc-text">7.11详细算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-11-1%E4%BD%BF%E7%94%A8%E6%9C%9F%E5%92%8C%E6%96%B0%E9%B2%9C%E7%94%9F%E5%AD%98%E6%9C%9F"><span class="toc-number">7.11.1.</span> <span class="toc-text">7.11.1使用期和新鲜生存期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-11-2%E4%BD%BF%E7%94%A8%E6%9C%9F%E7%9A%84%E8%AE%A1%E7%AE%97"><span class="toc-number">7.11.2.</span> <span class="toc-text">7.11.2使用期的计算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-11-3%E5%AE%8C%E6%95%B4%E7%9A%84%E4%BD%BF%E7%94%A8%E6%9C%9F%E8%AE%A1%E7%AE%97%E7%AE%97%E6%B3%95"><span class="toc-number">7.11.3.</span> <span class="toc-text">7.11.3完整的使用期计算算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-11-4%E6%96%B0%E9%B2%9C%E7%94%9F%E5%AD%98%E6%9C%9F%E8%AE%A1%E7%AE%97"><span class="toc-number">7.11.4.</span> <span class="toc-text">7.11.4新鲜生存期计算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-11-5%E5%AE%8C%E6%95%B4%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%E2%80%94%E2%80%94%E6%96%B0%E9%B2%9C%E5%BA%A6%E7%AE%97%E6%B3%95"><span class="toc-number">7.11.5.</span> <span class="toc-text">7.11.5完整的服务器——新鲜度算法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-12%E7%BC%93%E5%AD%98%E5%92%8C%E5%B9%BF%E5%91%8A"><span class="toc-number">7.12.</span> <span class="toc-text">7.12缓存和广告</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-12-1%E5%8F%91%E5%B8%83%E5%B9%BF%E5%91%8A%E8%80%85%E7%9A%84%E4%B8%A4%E9%9A%BE%E5%A4%84%E5%A2%83"><span class="toc-number">7.12.1.</span> <span class="toc-text">7.12.1发布广告者的两难处境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-12-2%E5%8F%91%E5%B8%83%E8%80%85%E7%9A%84%E5%93%8D%E5%BA%94"><span class="toc-number">7.12.2.</span> <span class="toc-text">7.12.2发布者的响应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-12-3%E6%97%A5%E5%BF%97%E8%BF%81%E7%A7%BB"><span class="toc-number">7.12.3.</span> <span class="toc-text">7.12.3日志迁移</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-12-4%E5%91%BD%E4%B8%AD%E8%AE%A1%E6%95%B0%E5%92%8C%E4%BD%BF%E7%94%A8%E9%99%90%E5%88%B6"><span class="toc-number">7.12.4.</span> <span class="toc-text">7.12.4命中计数和使用限制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-13%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">7.13.</span> <span class="toc-text">7.13更多信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC8%E7%AB%A0-%E9%9B%86%E6%88%90%E7%82%B9%EF%BC%9A%E7%BD%91%E5%85%B3%E3%80%81%E9%9A%A7%E9%81%93%E5%8F%8A%E4%B8%AD%E7%BB%A7"><span class="toc-number">8.</span> <span class="toc-text">第8章 集成点：网关、隧道及中继</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1%E7%BD%91%E5%85%B3"><span class="toc-number">8.1.</span> <span class="toc-text">8.1网关</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2%E5%8D%8F%E8%AE%AE%E7%BD%91%E5%85%B3"><span class="toc-number">8.2.</span> <span class="toc-text">8.2协议网关</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-1-HTTP-x2F-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AFWeb%E7%BD%91%E5%85%B3"><span class="toc-number">8.2.1.</span> <span class="toc-text">8.2.1 HTTP&#x2F;* 服务器端Web网关</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-2-HTTP-x2F-HTTPS%EF%BC%9A%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%AE%89%E5%85%A8%E7%BD%91%E5%85%B3"><span class="toc-number">8.2.2.</span> <span class="toc-text">8.2.2 HTTP&#x2F;HTTPS：服务器端安全网关</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-3-HTTPS-x2F-HTTP%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%89%E5%85%A8%E5%8A%A0%E9%80%9F%E5%99%A8%E7%BD%91%E5%85%B3"><span class="toc-number">8.2.3.</span> <span class="toc-text">8.2.3 HTTPS&#x2F;HTTP客户端安全加速器网关</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-3%E8%B5%84%E6%BA%90%E7%BD%91%E5%85%B3"><span class="toc-number">8.3.</span> <span class="toc-text">8.3资源网关</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-1CGI"><span class="toc-number">8.3.1.</span> <span class="toc-text">8.3.1CGI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-2%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%89%A9%E5%B1%95API"><span class="toc-number">8.3.2.</span> <span class="toc-text">8.3.2服务器扩展API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-4%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%8E%A5%E5%8F%A3%E5%92%8CWeb%E6%9C%8D%E5%8A%A1"><span class="toc-number">8.4.</span> <span class="toc-text">8.4应用程序接口和Web服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-5%E9%9A%A7%E9%81%93"><span class="toc-number">8.5.</span> <span class="toc-text">8.5隧道</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-1%E7%94%A8CONNECT%E5%BB%BA%E7%AB%8BHTTP%E9%9A%A7%E9%81%93"><span class="toc-number">8.5.1.</span> <span class="toc-text">8.5.1用CONNECT建立HTTP隧道</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-2%E6%95%B0%E6%8D%AE%E9%9A%A7%E9%81%93%E3%80%81%E5%AE%9A%E6%97%B6%E5%8F%8A%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86"><span class="toc-number">8.5.2.</span> <span class="toc-text">8.5.2数据隧道、定时及连接管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-3-SSL%E9%9A%A7%E9%81%93"><span class="toc-number">8.5.3.</span> <span class="toc-text">8.5.3 SSL隧道</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-4-SSL%E9%9A%A7%E9%81%93%E4%B8%8EHTTP-x2F-HTTPS%E7%BD%91%E5%85%B3%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="toc-number">8.5.4.</span> <span class="toc-text">8.5.4 SSL隧道与HTTP&#x2F;HTTPS网关的对比</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-5%E9%9A%A7%E9%81%93%E8%AE%A4%E8%AF%81"><span class="toc-number">8.5.5.</span> <span class="toc-text">8.5.5隧道认证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-6%E9%9A%A7%E9%81%93%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7%E8%80%83%E8%99%91"><span class="toc-number">8.5.6.</span> <span class="toc-text">8.5.6隧道的安全性考虑</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-6%E4%B8%AD%E7%BB%A7"><span class="toc-number">8.6.</span> <span class="toc-text">8.6中继</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-7%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">8.7.</span> <span class="toc-text">8.7更多信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC9%E7%AB%A0Web%E6%9C%BA%E5%99%A8%E4%BA%BA"><span class="toc-number">9.</span> <span class="toc-text">第9章Web机器人</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1%E7%88%AC%E8%99%AB%E5%8F%8A%E7%88%AC%E8%A1%8C%E6%96%B9%E5%BC%8F"><span class="toc-number">9.1.</span> <span class="toc-text">9.1爬虫及爬行方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-1%E4%BB%8E%E5%93%AA%E5%84%BF%E5%BC%80%E5%A7%8B%EF%BC%9A%E6%A0%B9%E9%9B%86"><span class="toc-number">9.1.1.</span> <span class="toc-text">9.1.1从哪儿开始：根集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-2%E9%93%BE%E6%8E%A5%E7%9A%84%E6%8F%90%E5%8F%96%E4%BB%A5%E5%8F%8A%E7%9B%B8%E5%AF%B9%E9%93%BE%E6%8E%A5%E7%9A%84%E6%A0%87%E5%87%86%E5%8C%96"><span class="toc-number">9.1.2.</span> <span class="toc-text">9.1.2链接的提取以及相对链接的标准化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-3%E9%81%BF%E5%85%8D%E7%8E%AF%E8%B7%AF%E7%9A%84%E5%87%BA%E7%8E%B0"><span class="toc-number">9.1.3.</span> <span class="toc-text">9.1.3避免环路的出现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-4%E5%BE%AA%E7%8E%AF%E4%B8%8E%E5%A4%8D%E5%88%B6"><span class="toc-number">9.1.4.</span> <span class="toc-text">9.1.4循环与复制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-5%E9%9D%A2%E5%8C%85%E5%B1%91%E7%95%99%E4%B8%8B%E7%9A%84%E7%97%95%E8%BF%B9"><span class="toc-number">9.1.5.</span> <span class="toc-text">9.1.5面包屑留下的痕迹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-6%E5%88%AB%E5%90%8D%E4%B8%8E%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%8E%AF%E8%B7%AF"><span class="toc-number">9.1.6.</span> <span class="toc-text">9.1.6别名与机器人环路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-7%E8%A7%84%E8%8C%83%E5%8C%96URL"><span class="toc-number">9.1.7.</span> <span class="toc-text">9.1.7规范化URL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-8%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E8%BF%9E%E6%8E%A5%E7%8E%AF%E8%B7%AF"><span class="toc-number">9.1.8.</span> <span class="toc-text">9.1.8文件系统连接环路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-9%E5%8A%A8%E6%80%81%E8%99%9A%E6%8B%9FWeb%E7%A9%BA%E9%97%B4"><span class="toc-number">9.1.9.</span> <span class="toc-text">9.1.9动态虚拟Web空间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-10%E9%81%BF%E5%85%8D%E5%BE%AA%E7%8E%AF%E5%92%8C%E9%87%8D%E5%A4%8D"><span class="toc-number">9.1.10.</span> <span class="toc-text">9.1.10避免循环和重复</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%9A%84HTTP"><span class="toc-number">9.2.</span> <span class="toc-text">9.2机器人的HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-1%E8%AF%86%E5%88%AB%E8%AF%B7%E6%B1%82%E9%A6%96%E9%83%A8"><span class="toc-number">9.2.1.</span> <span class="toc-text">9.2.1识别请求首部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-2%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA"><span class="toc-number">9.2.2.</span> <span class="toc-text">9.2.2虚拟主机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-3%E6%9D%A1%E4%BB%B6%E8%AF%B7%E6%B1%82"><span class="toc-number">9.2.3.</span> <span class="toc-text">9.2.3条件请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-4%E5%AF%B9%E5%93%8D%E5%BA%94%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">9.2.4.</span> <span class="toc-text">9.2.4对响应的处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-5-User-Agent%E5%AF%BC%E5%90%91"><span class="toc-number">9.2.5.</span> <span class="toc-text">9.2.5 User-Agent导向</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-3%E8%A1%8C%E4%B8%BA%E4%B8%8D%E5%BD%93%E7%9A%84%E6%9C%BA%E5%99%A8%E4%BA%BA"><span class="toc-number">9.3.</span> <span class="toc-text">9.3行为不当的机器人</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-4%E6%8B%92%E7%BB%9D%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%AE%BF%E9%97%AE"><span class="toc-number">9.4.</span> <span class="toc-text">9.4拒绝机器人访问</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-1%E6%8B%92%E7%BB%9D%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%AE%BF%E9%97%AE%E6%A0%87%E5%87%86"><span class="toc-number">9.4.1.</span> <span class="toc-text">9.4.1拒绝机器人访问标准</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-4-2-Web%E7%AB%99%E7%82%B9%E5%92%8Crobots-txt%E6%96%87%E4%BB%B6"><span class="toc-number">9.4.1.1.</span> <span class="toc-text">9.4.2 Web站点和robots.txt文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-4-3-robots-txt%E6%96%87%E4%BB%B6%E7%9A%84%E6%A0%BC%E5%BC%8F"><span class="toc-number">9.4.1.2.</span> <span class="toc-text">9.4.3 robots.txt文件的格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-4-4%E5%85%B6%E4%BB%96%E6%9C%89%E5%85%B3robots-txt%E7%9A%84%E7%9F%A5%E8%AF%86"><span class="toc-number">9.4.1.3.</span> <span class="toc-text">9.4.4其他有关robots.txt的知识</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-4-5%E7%BC%93%E5%AD%98%E5%92%8Crobots-txt%E7%9A%84%E8%BF%87%E6%9C%9F"><span class="toc-number">9.4.1.4.</span> <span class="toc-text">9.4.5缓存和robots.txt的过期</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-6%E6%8B%92%E7%BB%9D%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%AE%BF%E9%97%AE%E7%9A%84Perl%E4%BB%A3%E7%A0%81"><span class="toc-number">9.4.2.</span> <span class="toc-text">9.4.6拒绝机器人访问的Perl代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-7-HTML%E7%9A%84robot-control%E5%85%83%E6%A0%87%E7%AD%BE"><span class="toc-number">9.4.3.</span> <span class="toc-text">9.4.7 HTML的robot-control元标签</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-5%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%9A%84%E8%A7%84%E8%8C%83"><span class="toc-number">9.5.</span> <span class="toc-text">9.5机器人的规范</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-6%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E"><span class="toc-number">9.6.</span> <span class="toc-text">9.6搜索引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-1%E5%A4%A7%E6%A0%BC%E5%B1%80"><span class="toc-number">9.6.1.</span> <span class="toc-text">9.6.1大格局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-2%E7%8E%B0%E4%BB%A3%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E7%BB%93%E6%9E%84"><span class="toc-number">9.6.2.</span> <span class="toc-text">9.6.2现代搜索引擎结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-3%E5%85%A8%E6%96%87%E7%B4%A2%E5%BC%95"><span class="toc-number">9.6.3.</span> <span class="toc-text">9.6.3全文索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-4%E5%8F%91%E5%B8%83%E6%9F%A5%E8%AF%A2%E8%AF%B7%E6%B1%82"><span class="toc-number">9.6.4.</span> <span class="toc-text">9.6.4发布查询请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-5%E5%AF%B9%E7%BB%93%E6%9E%9C%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F%EF%BC%8C%E5%B9%B6%E6%8F%90%E4%BE%9B%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C"><span class="toc-number">9.6.5.</span> <span class="toc-text">9.6.5对结果进行排序，并提供查询结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-6%E6%AC%BA%E8%AF%88"><span class="toc-number">9.6.6.</span> <span class="toc-text">9.6.6欺诈</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-7%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">9.7.</span> <span class="toc-text">9.7更多信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC10%E7%AB%A0HTTP-NG"><span class="toc-number">10.</span> <span class="toc-text">第10章HTTP-NG</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#10-1-HTTP%E5%8F%91%E5%B1%95%E4%B8%AD%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">10.1.</span> <span class="toc-text">10.1 HTTP发展中存在的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-2-HTTP-NG%E7%9A%84%E6%B4%BB%E5%8A%A8"><span class="toc-number">10.2.</span> <span class="toc-text">10.2 HTTP-NG的活动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-3%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%8A%E5%8A%9F%E8%83%BD%E5%A2%9E%E5%BC%BA"><span class="toc-number">10.3.</span> <span class="toc-text">10.3模块化及功能增强</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AF%B9%E8%B1%A1"><span class="toc-number">10.4.</span> <span class="toc-text">10.4分布式对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-5%E7%AC%AC%E4%B8%80%E5%B1%82%E2%80%94%E2%80%94%E6%8A%A5%E6%96%87%E4%BC%A0%E8%BE%93"><span class="toc-number">10.5.</span> <span class="toc-text">10.5第一层——报文传输</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-6%E7%AC%AC%E4%BA%8C%E5%B1%82%E2%80%94%E2%80%94%E8%BF%9C%E7%A8%8B%E8%B0%83%E7%94%A8"><span class="toc-number">10.6.</span> <span class="toc-text">10.6第二层——远程调用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-7%E7%AC%AC%E4%B8%89%E5%B1%82%E2%80%94%E2%80%94Web%E5%BA%94%E7%94%A8"><span class="toc-number">10.7.</span> <span class="toc-text">10.7第三层——Web应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-8-WebMUX"><span class="toc-number">10.8.</span> <span class="toc-text">10.8 WebMUX</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-9%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%BF%9E%E6%8E%A5%E5%8D%8F%E8%AE%AE"><span class="toc-number">10.9.</span> <span class="toc-text">10.9二进制连接协议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-10%E5%BD%93%E5%89%8D%E7%9A%84%E7%8A%B6%E6%80%81"><span class="toc-number">10.10.</span> <span class="toc-text">10.10当前的状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-11%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">10.11.</span> <span class="toc-text">10.11更多信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC11%E7%AB%A0-%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AF%86%E5%88%AB%E4%B8%8Ecookie%E6%9C%BA%E5%88%B6"><span class="toc-number">11.</span> <span class="toc-text">第11章 客户端识别与cookie机制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-1%E4%B8%AA%E6%80%A7%E5%8C%96%E6%8E%A5%E8%A7%A6"><span class="toc-number">11.1.</span> <span class="toc-text">11.1个性化接触</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-2-HTTP%E9%A6%96%E9%83%A8"><span class="toc-number">11.2.</span> <span class="toc-text">11.2 HTTP首部</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-3%E5%AE%A2%E6%88%B7%E7%AB%AFIP%E5%9C%B0%E5%9D%80"><span class="toc-number">11.3.</span> <span class="toc-text">11.3客户端IP地址</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-4%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95"><span class="toc-number">11.4.</span> <span class="toc-text">11.4用户登录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-5%E8%83%96URL"><span class="toc-number">11.5.</span> <span class="toc-text">11.5胖URL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-6-cookie"><span class="toc-number">11.6.</span> <span class="toc-text">11.6 cookie</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-6-1-cookie%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">11.6.1.</span> <span class="toc-text">11.6.1 cookie的类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-6-2-cookie%E6%98%AF%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C%E7%9A%84"><span class="toc-number">11.6.2.</span> <span class="toc-text">11.6.2 cookie是如何工作的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-6-3-cookie%E7%BD%90%EF%BC%9A%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E7%8A%B6%E6%80%81"><span class="toc-number">11.6.3.</span> <span class="toc-text">11.6.3 cookie罐：客户端的状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-6-4%E4%B8%8D%E5%90%8C%E7%AB%99%E7%82%B9%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%90%8C%E7%9A%84cookie"><span class="toc-number">11.6.4.</span> <span class="toc-text">11.6.4不同站点使用不同的cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-6-5-cookie%E6%88%90%E5%88%86"><span class="toc-number">11.6.5.</span> <span class="toc-text">11.6.5 cookie成分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-6-6-cookies%E7%89%88%E6%9C%AC0%EF%BC%88Netscape"><span class="toc-number">11.6.6.</span> <span class="toc-text">11.6.6 cookies版本0（Netscape</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-6-7-cookies%E7%89%88%E6%9C%AC1%EF%BC%88RFC-2965%EF%BC%89"><span class="toc-number">11.6.7.</span> <span class="toc-text">11.6.7 cookies版本1（RFC 2965）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-6-8-cookie%E4%B8%8E%E4%BC%9A%E8%AF%9D%E8%B7%9F%E8%B8%AA"><span class="toc-number">11.6.8.</span> <span class="toc-text">11.6.8 cookie与会话跟踪</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-6-9-cookie%E4%B8%8E%E7%BC%93%E5%AD%98"><span class="toc-number">11.6.9.</span> <span class="toc-text">11.6.9 cookie与缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-6-10-cookie%E3%80%81%E5%AE%89%E5%85%A8%E6%80%A7%E5%92%8C%E9%9A%90%E7%A7%81"><span class="toc-number">11.6.10.</span> <span class="toc-text">11.6.10 cookie、安全性和隐私</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-7%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">11.7.</span> <span class="toc-text">11.7更多信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC12%E7%AB%A0-%E5%9F%BA%E6%9C%AC%E8%AE%A4%E8%AF%81%E6%9C%BA%E5%88%B6"><span class="toc-number">12.</span> <span class="toc-text">第12章 基本认证机制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#12-1%E8%AE%A4%E8%AF%81"><span class="toc-number">12.1.</span> <span class="toc-text">12.1认证</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1-1-HTTP%E7%9A%84%E8%B4%A8%E8%AF%A2%EF%BC%8F%E5%93%8D%E5%BA%94%E8%AE%A4%E8%AF%81%E6%A1%86%E6%9E%B6"><span class="toc-number">12.1.1.</span> <span class="toc-text">12.1.1 HTTP的质询／响应认证框架</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1-2%E8%AE%A4%E8%AF%81%E5%8D%8F%E8%AE%AE%E4%B8%8E%E9%A6%96%E9%83%A8"><span class="toc-number">12.1.2.</span> <span class="toc-text">12.1.2认证协议与首部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1-3%E5%AE%89%E5%85%A8%E5%9F%9F"><span class="toc-number">12.1.3.</span> <span class="toc-text">12.1.3安全域</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-2%E5%9F%BA%E6%9C%AC%E8%AE%A4%E8%AF%81"><span class="toc-number">12.2.</span> <span class="toc-text">12.2基本认证</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2-1%E5%9F%BA%E6%9C%AC%E8%AE%A4%E8%AF%81%E5%AE%9E%E4%BE%8B"><span class="toc-number">12.2.1.</span> <span class="toc-text">12.2.1基本认证实例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2-2-Base-64%E7%94%A8%E6%88%B7%E5%90%8D%EF%BC%8F%E5%AF%86%E7%A0%81%E7%BC%96%E7%A0%81"><span class="toc-number">12.2.2.</span> <span class="toc-text">12.2.2 Base-64用户名／密码编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2-3%E4%BB%A3%E7%90%86%E8%AE%A4%E8%AF%81"><span class="toc-number">12.2.3.</span> <span class="toc-text">12.2.3代理认证</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-3%E5%9F%BA%E6%9C%AC%E8%AE%A4%E8%AF%81%E7%9A%84%E5%AE%89%E5%85%A8%E7%BC%BA%E9%99%B7"><span class="toc-number">12.3.</span> <span class="toc-text">12.3基本认证的安全缺陷</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-4%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">12.4.</span> <span class="toc-text">12.4更多信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC13%E7%AB%A0-%E6%91%98%E8%A6%81%E8%AE%A4%E8%AF%81"><span class="toc-number">13.</span> <span class="toc-text">第13章 摘要认证</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#13-1%E6%91%98%E8%A6%81%E8%AE%A4%E8%AF%81%E7%9A%84%E6%94%B9%E8%BF%9B"><span class="toc-number">13.1.</span> <span class="toc-text">13.1摘要认证的改进</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-1-1%E7%94%A8%E6%91%98%E8%A6%81%E4%BF%9D%E6%8A%A4%E5%AF%86%E7%A0%81"><span class="toc-number">13.1.1.</span> <span class="toc-text">13.1.1用摘要保护密码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-1-2%E5%8D%95%E5%90%91%E6%91%98%E8%A6%81"><span class="toc-number">13.1.2.</span> <span class="toc-text">13.1.2单向摘要</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-1-3%E7%94%A8%E9%9A%8F%E6%9C%BA%E6%95%B0%E9%98%B2%E6%AD%A2%E9%87%8D%E6%94%BE%E6%94%BB%E5%87%BB"><span class="toc-number">13.1.3.</span> <span class="toc-text">13.1.3用随机数防止重放攻击</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-1-4%E6%91%98%E8%A6%81%E8%AE%A4%E8%AF%81%E7%9A%84%E6%8F%A1%E6%89%8B%E6%9C%BA%E5%88%B6"><span class="toc-number">13.1.4.</span> <span class="toc-text">13.1.4摘要认证的握手机制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-2%E6%91%98%E8%A6%81%E7%9A%84%E8%AE%A1%E7%AE%97"><span class="toc-number">13.2.</span> <span class="toc-text">13.2摘要的计算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-1%E6%91%98%E8%A6%81%E7%AE%97%E6%B3%95%E7%9A%84%E8%BE%93%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">13.2.1.</span> <span class="toc-text">13.2.1摘要算法的输入数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-2%E7%AE%97%E6%B3%95H%EF%BC%88d%E5%92%8CKD%EF%BC%88s%EF%BC%8Cd%EF%BC%89"><span class="toc-number">13.2.2.</span> <span class="toc-text">13.2.2算法H（d和KD（s，d）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-3%E4%B8%8E%E5%AE%89%E5%85%A8%E6%80%A7%E7%9B%B8%E5%85%B3%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%88A1%EF%BC%89"><span class="toc-number">13.2.3.</span> <span class="toc-text">13.2.3与安全性相关的数据（A1）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-4%E4%B8%8E%E6%8A%A5%E6%96%87%E6%9C%89%E5%85%B3%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%88A2%EF%BC%89"><span class="toc-number">13.2.4.</span> <span class="toc-text">13.2.4与报文有关的数据（A2）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-5%E6%91%98%E8%A6%81%E7%AE%97%E6%B3%95%E6%80%BB%E8%BF%B0"><span class="toc-number">13.2.5.</span> <span class="toc-text">13.2.5摘要算法总述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-6%E6%91%98%E8%A6%81%E8%AE%A4%E8%AF%81%E4%BC%9A%E8%AF%9D"><span class="toc-number">13.2.6.</span> <span class="toc-text">13.2.6摘要认证会话</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-7%E9%A2%84%E6%8E%88%E6%9D%83"><span class="toc-number">13.2.7.</span> <span class="toc-text">13.2.7预授权</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-8%E9%9A%8F%E6%9C%BA%E6%95%B0%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-number">13.2.8.</span> <span class="toc-text">13.2.8随机数的选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-9%E5%AF%B9%E7%A7%B0%E8%AE%A4%E8%AF%81"><span class="toc-number">13.2.9.</span> <span class="toc-text">13.2.9对称认证</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-3%E5%A2%9E%E5%BC%BA%E4%BF%9D%E6%8A%A4%E8%B4%A8%E9%87%8F"><span class="toc-number">13.3.</span> <span class="toc-text">13.3增强保护质量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-3-1%E6%8A%A5%E6%96%87%E5%AE%8C%E6%95%B4%E6%80%A7%E4%BF%9D%E6%8A%A4"><span class="toc-number">13.3.1.</span> <span class="toc-text">13.3.1报文完整性保护</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-3-2%E6%91%98%E8%A6%81%E8%AE%A4%E8%AF%81%E9%A6%96%E9%83%A8"><span class="toc-number">13.3.2.</span> <span class="toc-text">13.3.2摘要认证首部</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-4%E5%BA%94%E8%AF%A5%E8%80%83%E8%99%91%E7%9A%84%E5%AE%9E%E9%99%85%E9%97%AE%E9%A2%98"><span class="toc-number">13.4.</span> <span class="toc-text">13.4应该考虑的实际问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-4-1%E5%A4%9A%E9%87%8D%E8%B4%A8%E8%AF%A2"><span class="toc-number">13.4.1.</span> <span class="toc-text">13.4.1多重质询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-4-2%E5%B7%AE%E9%94%99%E5%A4%84%E7%90%86"><span class="toc-number">13.4.2.</span> <span class="toc-text">13.4.2差错处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-4-3%E4%BF%9D%E6%8A%A4%E7%A9%BA%E9%97%B4"><span class="toc-number">13.4.3.</span> <span class="toc-text">13.4.3保护空间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-4-4%E9%87%8D%E5%86%99URI"><span class="toc-number">13.4.4.</span> <span class="toc-text">13.4.4重写URI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-4-5%E7%BC%93%E5%AD%98"><span class="toc-number">13.4.5.</span> <span class="toc-text">13.4.5缓存</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-5%E5%AE%89%E5%85%A8%E6%80%A7%E8%80%83%E8%99%91"><span class="toc-number">13.5.</span> <span class="toc-text">13.5安全性考虑</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-1%E9%A6%96%E9%83%A8%E7%AF%A1%E6%94%B9"><span class="toc-number">13.5.1.</span> <span class="toc-text">13.5.1首部篡改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-2%E9%87%8D%E6%94%BE%E6%94%BB%E5%87%BB"><span class="toc-number">13.5.2.</span> <span class="toc-text">13.5.2重放攻击</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-3%E5%A4%9A%E9%87%8D%E8%AE%A4%E8%AF%81%E6%9C%BA%E5%88%B6"><span class="toc-number">13.5.3.</span> <span class="toc-text">13.5.3多重认证机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-4%E8%AF%8D%E5%85%B8%E6%94%BB%E5%87%BB"><span class="toc-number">13.5.4.</span> <span class="toc-text">13.5.4词典攻击</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-5%E6%81%B6%E6%84%8F%E4%BB%A3%E7%90%86%E6%94%BB%E5%87%BB%E5%92%8C%E4%B8%AD%E9%97%B4%E4%BA%BA%E6%94%BB%E5%87%BB"><span class="toc-number">13.5.5.</span> <span class="toc-text">13.5.5恶意代理攻击和中间人攻击</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-6%E9%80%89%E6%8B%A9%E6%98%8E%E6%96%87%E6%94%BB%E5%87%BB"><span class="toc-number">13.5.6.</span> <span class="toc-text">13.5.6选择明文攻击</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-7%E5%AD%98%E5%82%A8%E5%AF%86%E7%A0%81"><span class="toc-number">13.5.7.</span> <span class="toc-text">13.5.7存储密码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-6%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">13.6.</span> <span class="toc-text">13.6更多信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC14%E7%AB%A0-%E5%AE%89%E5%85%A8HTTP"><span class="toc-number">14.</span> <span class="toc-text">第14章 安全HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#14-1%E4%BF%9D%E6%8A%A4HTTP%E7%9A%84%E5%AE%89%E5%85%A8"><span class="toc-number">14.1.</span> <span class="toc-text">14.1保护HTTP的安全</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-2%E6%95%B0%E5%AD%97%E5%8A%A0%E5%AF%86"><span class="toc-number">14.2.</span> <span class="toc-text">14.2数字加密</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-2-1%E5%AF%86%E7%A0%81%E7%BC%96%E5%88%B6%E7%9A%84%E6%9C%BA%E5%88%B6%E4%B8%8E%E6%8A%80%E5%B7%A7"><span class="toc-number">14.2.1.</span> <span class="toc-text">14.2.1密码编制的机制与技巧</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-2-2%E5%AF%86%E7%A0%81"><span class="toc-number">14.2.2.</span> <span class="toc-text">14.2.2密码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-2-3%E5%AF%86%E7%A0%81%E6%9C%BA"><span class="toc-number">14.2.3.</span> <span class="toc-text">14.2.3密码机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-2-4%E4%BD%BF%E7%94%A8%E4%BA%86%E5%AF%86%E9%92%A5%E7%9A%84%E5%AF%86%E7%A0%81"><span class="toc-number">14.2.4.</span> <span class="toc-text">14.2.4使用了密钥的密码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-2-5%E6%95%B0%E5%AD%97%E5%AF%86%E7%A0%81"><span class="toc-number">14.2.5.</span> <span class="toc-text">14.2.5数字密码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-3%E5%AF%B9%E7%A7%B0%E5%AF%86%E9%92%A5%E5%8A%A0%E5%AF%86%E6%8A%80%E6%9C%AF"><span class="toc-number">14.3.</span> <span class="toc-text">14.3对称密钥加密技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-3-1%E5%AF%86%E9%92%A5%E9%95%BF%E5%BA%A6%E4%B8%8E%E6%9E%9A%E4%B8%BE%E6%94%BB%E5%87%BB"><span class="toc-number">14.3.1.</span> <span class="toc-text">14.3.1密钥长度与枚举攻击</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-3-2%E5%BB%BA%E7%AB%8B%E5%85%B1%E4%BA%AB%E5%AF%86%E9%92%A5"><span class="toc-number">14.3.2.</span> <span class="toc-text">14.3.2建立共享密钥</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-4%E5%85%AC%E5%BC%80%E5%AF%86%E9%92%A5%E5%8A%A0%E5%AF%86%E6%8A%80%E6%9C%AF"><span class="toc-number">14.4.</span> <span class="toc-text">14.4公开密钥加密技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-4-1RSA"><span class="toc-number">14.4.1.</span> <span class="toc-text">14.4.1RSA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-4-2%E6%B7%B7%E5%90%88%E5%8A%A0%E5%AF%86%E7%B3%BB%E7%BB%9F%E5%92%8C%E4%BC%9A%E8%AF%9D%E5%AF%86%E9%92%A5"><span class="toc-number">14.4.2.</span> <span class="toc-text">14.4.2混合加密系统和会话密钥</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-5%E6%95%B0%E5%AD%97%E7%AD%BE%E5%90%8D"><span class="toc-number">14.5.</span> <span class="toc-text">14.5数字签名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-6%E6%95%B0%E5%AD%97%E8%AF%81%E4%B9%A6-certs"><span class="toc-number">14.6.</span> <span class="toc-text">14.6数字证书 certs</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-6-1%E8%AF%81%E4%B9%A6%E7%9A%84%E4%B8%BB%E8%A6%81%E5%86%85%E5%AE%B9"><span class="toc-number">14.6.1.</span> <span class="toc-text">14.6.1证书的主要内容</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#14-6-2-X-509-v3%E8%AF%81%E4%B9%A6"><span class="toc-number">14.6.1.1.</span> <span class="toc-text">14.6.2 X.509 v3证书</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-6-3%E7%94%A8%E8%AF%81%E4%B9%A6%E5%AF%B9%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%9B%E8%A1%8C%E8%AE%A4%E8%AF%81"><span class="toc-number">14.6.2.</span> <span class="toc-text">14.6.3用证书对服务器进行认证</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-7-HTTPS%E2%80%94%E2%80%94%E7%BB%86%E8%8A%82%E4%BB%8B%E7%BB%8D"><span class="toc-number">14.7.</span> <span class="toc-text">14.7 HTTPS——细节介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-7-1-HTTPS%E6%A6%82%E8%BF%B0"><span class="toc-number">14.7.1.</span> <span class="toc-text">14.7.1 HTTPS概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-7-2-HTTPS%E6%96%B9%E6%A1%88"><span class="toc-number">14.7.2.</span> <span class="toc-text">14.7.2 HTTPS方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-7-3%E5%BB%BA%E7%AB%8B%E5%AE%89%E5%85%A8%E4%BC%A0%E8%BE%93"><span class="toc-number">14.7.3.</span> <span class="toc-text">14.7.3建立安全传输</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-7-4-SSL%E6%8F%A1%E6%89%8B"><span class="toc-number">14.7.4.</span> <span class="toc-text">14.7.4 SSL握手</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-7-5%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%81%E4%B9%A6"><span class="toc-number">14.7.5.</span> <span class="toc-text">14.7.5服务器证书</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-7-6%E7%AB%99%E7%82%B9%E8%AF%81%E4%B9%A6%E7%9A%84%E6%9C%89%E6%95%88%E6%80%A7"><span class="toc-number">14.7.6.</span> <span class="toc-text">14.7.6站点证书的有效性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-7-7%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA%E4%B8%8E%E8%AF%81%E4%B9%A6"><span class="toc-number">14.7.7.</span> <span class="toc-text">14.7.7虚拟主机与证书</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-8-HTTPS%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%9E%E4%BE%8B"><span class="toc-number">14.8.</span> <span class="toc-text">14.8 HTTPS客户端实例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-8-1-OpenSSL"><span class="toc-number">14.8.1.</span> <span class="toc-text">14.8.1 OpenSSL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-8-2%E7%AE%80%E5%8D%95%E7%9A%84HTTPS%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">14.8.2.</span> <span class="toc-text">14.8.2简单的HTTPS客户端</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-8-3%E6%89%A7%E8%A1%8COpenSSL%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">14.8.3.</span> <span class="toc-text">14.8.3执行OpenSSL客户端</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-9%E9%80%9A%E8%BF%87%E4%BB%A3%E7%90%86%E4%BB%A5%E9%9A%A7%E9%81%93%E5%BD%A2%E5%BC%8F%E4%BC%A0%E8%BE%93%E5%AE%89%E5%85%A8%E6%B5%81%E9%87%8F"><span class="toc-number">14.9.</span> <span class="toc-text">14.9通过代理以隧道形式传输安全流量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-10%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">14.10.</span> <span class="toc-text">14.10更多信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-10-1-HTTP%E5%AE%89%E5%85%A8%E6%80%A7"><span class="toc-number">14.10.1.</span> <span class="toc-text">14.10.1 HTTP安全性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-10-2-SSL%E4%B8%8ETLS"><span class="toc-number">14.10.2.</span> <span class="toc-text">14.10.2 SSL与TLS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-10-3%E5%85%AC%E5%BC%80%E5%AF%86%E9%92%A5%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD"><span class="toc-number">14.10.3.</span> <span class="toc-text">14.10.3公开密钥基础设施</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-10-4%E6%95%B0%E5%AD%97%E5%AF%86%E7%A0%81"><span class="toc-number">14.10.4.</span> <span class="toc-text">14.10.4数字密码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC15%E7%AB%A0-%E5%AE%9E%E4%BD%93%E5%92%8C%E7%BC%96%E7%A0%81"><span class="toc-number">15.</span> <span class="toc-text">第15章 实体和编码</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#15-1%E6%8A%A5%E6%96%87%E6%98%AF%E7%AE%B1%E5%AD%90%EF%BC%8C%E5%AE%9E%E4%BD%93%E6%98%AF%E8%B4%A7%E7%89%A9"><span class="toc-number">15.1.</span> <span class="toc-text">15.1报文是箱子，实体是货物</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-2-Content-Length%EF%BC%9A%E5%AE%9E%E4%BD%93%E7%9A%84%E5%A4%A7%E5%B0%8F"><span class="toc-number">15.2.</span> <span class="toc-text">15.2 Content-Length：实体的大小</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#15-2-1%E6%A3%80%E6%B5%8B%E6%88%AA%E5%B0%BE"><span class="toc-number">15.2.1.</span> <span class="toc-text">15.2.1检测截尾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-2-2%E9%94%99%E8%AF%AF%E7%9A%84Content-Length"><span class="toc-number">15.2.2.</span> <span class="toc-text">15.2.2错误的Content-Length</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-2-3-Content-Length%E4%B8%8E%E6%8C%81%E4%B9%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">15.2.3.</span> <span class="toc-text">15.2.3 Content-Length与持久连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-2-4%E5%86%85%E5%AE%B9%E7%BC%96%E7%A0%81"><span class="toc-number">15.2.4.</span> <span class="toc-text">15.2.4内容编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-2-5%E7%A1%AE%E5%AE%9A%E5%AE%9E%E4%BD%93%E4%B8%BB%E4%BD%93%E9%95%BF%E5%BA%A6%E7%9A%84%E8%A7%84%E5%88%99"><span class="toc-number">15.2.5.</span> <span class="toc-text">15.2.5确定实体主体长度的规则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-3%E5%AE%9E%E4%BD%93%E6%91%98%E8%A6%81"><span class="toc-number">15.3.</span> <span class="toc-text">15.3实体摘要</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-4%E5%AA%92%E4%BD%93%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%AD%97%E7%AC%A6%E9%9B%86"><span class="toc-number">15.4.</span> <span class="toc-text">15.4媒体类型和字符集</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#15-4-1%E6%96%87%E6%9C%AC%E7%9A%84%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81"><span class="toc-number">15.4.1.</span> <span class="toc-text">15.4.1文本的字符编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-4-2%E5%A4%9A%E9%83%A8%E5%88%86%E5%AA%92%E4%BD%93%E7%B1%BB%E5%9E%8B"><span class="toc-number">15.4.2.</span> <span class="toc-text">15.4.2多部分媒体类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-4-3%E5%A4%9A%E9%83%A8%E5%88%86%E8%A1%A8%E6%A0%BC%E6%8F%90%E4%BA%A4"><span class="toc-number">15.4.3.</span> <span class="toc-text">15.4.3多部分表格提交</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-4-4%E5%A4%9A%E9%83%A8%E5%88%86%E8%8C%83%E5%9B%B4%E5%93%8D%E5%BA%94"><span class="toc-number">15.4.4.</span> <span class="toc-text">15.4.4多部分范围响应</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-5%E5%86%85%E5%AE%B9%E7%BC%96%E7%A0%81"><span class="toc-number">15.5.</span> <span class="toc-text">15.5内容编码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#15-5-1%E5%86%85%E5%AE%B9%E7%BC%96%E7%A0%81%E8%BF%87%E7%A8%8B"><span class="toc-number">15.5.1.</span> <span class="toc-text">15.5.1内容编码过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-5-2%E5%86%85%E5%AE%B9%E7%BC%96%E7%A0%81%E7%B1%BB%E5%9E%8B"><span class="toc-number">15.5.2.</span> <span class="toc-text">15.5.2内容编码类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-5-3-Accept-Encoding%E9%A6%96%E9%83%A8"><span class="toc-number">15.5.3.</span> <span class="toc-text">15.5.3 Accept-Encoding首部</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-6%E4%BC%A0%E8%BE%93%E7%BC%96%E7%A0%81%E5%92%8C%E5%88%86%E5%9D%97%E7%BC%96%E7%A0%81"><span class="toc-number">15.6.</span> <span class="toc-text">15.6传输编码和分块编码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#15-6-1%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93"><span class="toc-number">15.6.1.</span> <span class="toc-text">15.6.1可靠传输</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-6-2-Transfer-Encoding%E9%A6%96%E9%83%A8"><span class="toc-number">15.6.2.</span> <span class="toc-text">15.6.2 Transfer-Encoding首部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-6-3%E5%88%86%E5%9D%97%E7%BC%96%E7%A0%81"><span class="toc-number">15.6.3.</span> <span class="toc-text">15.6.3分块编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-6-4%E5%86%85%E5%AE%B9%E7%BC%96%E7%A0%81%E4%B8%8E%E4%BC%A0%E8%BE%93%E7%BC%96%E7%A0%81%E7%9A%84%E7%BB%93%E5%90%88"><span class="toc-number">15.6.4.</span> <span class="toc-text">15.6.4内容编码与传输编码的结合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-6-5%E4%BC%A0%E8%BE%93%E7%BC%96%E7%A0%81%E7%9A%84%E8%A7%84%E5%88%99"><span class="toc-number">15.6.5.</span> <span class="toc-text">15.6.5传输编码的规则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-7%E9%9A%8F%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E7%9A%84%E5%AE%9E%E4%BE%8B"><span class="toc-number">15.7.</span> <span class="toc-text">15.7随时间变化的实例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-8%E9%AA%8C%E8%AF%81%E7%A0%81%E5%92%8C%E6%96%B0%E9%B2%9C%E5%BA%A6"><span class="toc-number">15.8.</span> <span class="toc-text">15.8验证码和新鲜度</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#15-8-1%E6%96%B0%E9%B2%9C%E5%BA%A6"><span class="toc-number">15.8.1.</span> <span class="toc-text">15.8.1新鲜度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-8-2%E6%9C%89%E6%9D%A1%E4%BB%B6%E7%9A%84%E8%AF%B7%E6%B1%82%E4%B8%8E%E9%AA%8C%E8%AF%81%E7%A0%81"><span class="toc-number">15.8.2.</span> <span class="toc-text">15.8.2有条件的请求与验证码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-9%E8%8C%83%E5%9B%B4%E8%AF%B7%E6%B1%82"><span class="toc-number">15.9.</span> <span class="toc-text">15.9范围请求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-10%E5%B7%AE%E5%BC%82%E7%BC%96%E7%A0%81"><span class="toc-number">15.10.</span> <span class="toc-text">15.10差异编码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-11%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">15.11.</span> <span class="toc-text">15.11更多信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC16%E7%AB%A0-%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-number">16.</span> <span class="toc-text">第16章 国际化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#16-1-HTTP%E5%AF%B9%E5%9B%BD%E9%99%85%E6%80%A7%E5%86%85%E5%AE%B9%E7%9A%84%E6%94%AF%E6%8C%81"><span class="toc-number">16.1.</span> <span class="toc-text">16.1 HTTP对国际性内容的支持</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-2%E5%AD%97%E7%AC%A6%E9%9B%86%E4%B8%8EHTTP"><span class="toc-number">16.2.</span> <span class="toc-text">16.2字符集与HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#16-2-1%E5%AD%97%E7%AC%A6%E9%9B%86%E6%98%AF%E6%8A%8A%E5%AD%97%E7%AC%A6%E8%BD%AC%E6%8D%A2%E4%B8%BA%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%A0%81%E7%9A%84%E7%BC%96%E7%A0%81"><span class="toc-number">16.2.1.</span> <span class="toc-text">16.2.1字符集是把字符转换为二进制码的编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-2-2%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%BC%96%E7%A0%81%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C"><span class="toc-number">16.2.2.</span> <span class="toc-text">16.2.2字符集和编码如何工作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-2-3%E5%AD%97%E7%AC%A6%E9%9B%86%E4%B8%8D%E5%AF%B9%EF%BC%8C%E5%AD%97%E7%AC%A6%E5%B0%B1%E4%B8%8D%E5%AF%B9"><span class="toc-number">16.2.3.</span> <span class="toc-text">16.2.3字符集不对，字符就不对</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-2-4%E6%A0%87%E5%87%86%E5%8C%96%E7%9A%84MIME-charset%E5%80%BC"><span class="toc-number">16.2.4.</span> <span class="toc-text">16.2.4标准化的MIME charset值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-2-5-Content-Type%E9%A6%96%E9%83%A8%E5%92%8CCharset%E9%A6%96%E9%83%A8%E4%BB%A5%E5%8F%8AMETA%E6%A0%87%E5%BF%97"><span class="toc-number">16.2.5.</span> <span class="toc-text">16.2.5 Content-Type首部和Charset首部以及META标志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-2-6-Accept-Charset%E9%A6%96%E9%83%A8"><span class="toc-number">16.2.6.</span> <span class="toc-text">16.2.6 Accept-Charset首部</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-3%E5%A4%9A%E8%AF%AD%E8%A8%80%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E5%85%A5%E9%97%A8"><span class="toc-number">16.3.</span> <span class="toc-text">16.3多语言字符编码入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#16-3-1%E5%AD%97%E7%AC%A6%E9%9B%86%E6%9C%AF%E8%AF%AD"><span class="toc-number">16.3.1.</span> <span class="toc-text">16.3.1字符集术语</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-3-2%E5%AD%97%E7%AC%A6%E9%9B%86%E7%9A%84%E5%91%BD%E5%90%8D%E5%BE%88%E7%B3%9F%E7%B3%95"><span class="toc-number">16.3.2.</span> <span class="toc-text">16.3.2字符集的命名很糟糕</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-3-3%E5%AD%97%E7%AC%A6"><span class="toc-number">16.3.3.</span> <span class="toc-text">16.3.3字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-3-4%E5%AD%97%E5%BD%A2%E3%80%81%E8%BF%9E%E7%AC%94%E4%BB%A5%E5%8F%8A%E8%A1%A8%E7%A4%BA%E5%BD%A2%E5%BC%8F"><span class="toc-number">16.3.4.</span> <span class="toc-text">16.3.4字形、连笔以及表示形式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-3-5%E7%BC%96%E7%A0%81%E5%90%8E%E7%9A%84%E5%AD%97%E7%AC%A6%E9%9B%86"><span class="toc-number">16.3.5.</span> <span class="toc-text">16.3.5编码后的字符集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-3-6%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E6%96%B9%E6%A1%88"><span class="toc-number">16.3.6.</span> <span class="toc-text">16.3.6字符编码方案</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-4%E8%AF%AD%E8%A8%80%E6%A0%87%E8%AE%B0%E4%B8%8EHTTP"><span class="toc-number">16.4.</span> <span class="toc-text">16.4语言标记与HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#16-4-1-Content-Language%E9%A6%96%E9%83%A8"><span class="toc-number">16.4.1.</span> <span class="toc-text">16.4.1 Content-Language首部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-4-2-Accept-Language%E9%A6%96%E9%83%A8"><span class="toc-number">16.4.2.</span> <span class="toc-text">16.4.2 Accept-Language首部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-4-3%E8%AF%AD%E8%A8%80%E6%A0%87%E8%AE%B0%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">16.4.3.</span> <span class="toc-text">16.4.3语言标记的类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-4-4%E5%AD%90%E6%A0%87%E8%AE%B0"><span class="toc-number">16.4.4.</span> <span class="toc-text">16.4.4子标记</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-4-5%E5%A4%A7%E5%B0%8F%E5%86%99"><span class="toc-number">16.4.5.</span> <span class="toc-text">16.4.5大小写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-4-6-IANA%E8%AF%AD%E8%A8%80%E6%A0%87%E8%AE%B0%E6%B3%A8%E5%86%8C"><span class="toc-number">16.4.6.</span> <span class="toc-text">16.4.6 IANA语言标记注册</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-4-7%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%AD%90%E6%A0%87%E8%AE%B0%E2%80%94%E2%80%94%E5%90%8D%E5%AD%97%E7%A9%BA%E9%97%B4"><span class="toc-number">16.4.7.</span> <span class="toc-text">16.4.7第一个子标记——名字空间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-4-8%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%AD%90%E6%A0%87%E8%AE%B0%E2%80%94%E2%80%94%E5%90%8D%E5%AD%97%E7%A9%BA%E9%97%B4"><span class="toc-number">16.4.8.</span> <span class="toc-text">16.4.8第二个子标记——名字空间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-4-9%E5%85%B6%E4%BD%99%E5%AD%90%E6%A0%87%E8%AE%B0%E2%80%94%E2%80%94%E5%90%8D%E5%AD%97%E7%A9%BA%E9%97%B4"><span class="toc-number">16.4.9.</span> <span class="toc-text">16.4.9其余子标记——名字空间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-4-10%E9%85%8D%E7%BD%AE%E5%92%8C%E8%AF%AD%E8%A8%80%E6%9C%89%E5%85%B3%E7%9A%84%E9%A6%96%E9%80%89%E9%A1%B9"><span class="toc-number">16.4.10.</span> <span class="toc-text">16.4.10配置和语言有关的首选项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-4-11%E8%AF%AD%E8%A8%80%E6%A0%87%E8%AE%B0%E5%8F%82%E8%80%83%E8%A1%A8"><span class="toc-number">16.4.11.</span> <span class="toc-text">16.4.11语言标记参考表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-5%E5%9B%BD%E9%99%85%E5%8C%96%E7%9A%84URI"><span class="toc-number">16.5.</span> <span class="toc-text">16.5国际化的URI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#16-5-1%E5%85%A8%E7%90%83%E6%80%A7%E7%9A%84%E5%8F%AF%E8%BD%AC%E6%8A%84%E8%83%BD%E5%8A%9B%E4%B8%8E%E6%9C%89%E6%84%8F%E4%B9%89%E7%9A%84%E5%AD%97%E7%AC%A6%E7%9A%84%E8%BE%83%E9%87%8F"><span class="toc-number">16.5.1.</span> <span class="toc-text">16.5.1全球性的可转抄能力与有意义的字符的较量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-5-2-URI%E5%AD%97%E7%AC%A6%E9%9B%86%E5%90%88"><span class="toc-number">16.5.2.</span> <span class="toc-text">16.5.2 URI字符集合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-5-3%E8%BD%AC%E4%B9%89%E5%92%8C%E5%8F%8D%E8%BD%AC%E4%B9%89"><span class="toc-number">16.5.3.</span> <span class="toc-text">16.5.3转义和反转义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-5-4%E8%BD%AC%E4%B9%89%E5%9B%BD%E9%99%85%E5%8C%96%E5%AD%97%E7%AC%A6"><span class="toc-number">16.5.4.</span> <span class="toc-text">16.5.4转义国际化字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-5-5-URI%E4%B8%AD%E7%9A%84%E6%A8%A1%E6%80%81%E5%88%87%E6%8D%A2"><span class="toc-number">16.5.5.</span> <span class="toc-text">16.5.5 URI中的模态切换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-6%E5%85%B6%E4%BB%96%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E7%9A%84%E5%9C%B0%E6%96%B9"><span class="toc-number">16.6.</span> <span class="toc-text">16.6其他需要考虑的地方</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#16-6-1%E9%A6%96%E9%83%A8%E5%92%8C%E4%B8%8D%E5%90%88%E8%A7%84%E8%8C%83%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">16.6.1.</span> <span class="toc-text">16.6.1首部和不合规范的数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-6-2%E6%97%A5%E6%9C%9F"><span class="toc-number">16.6.2.</span> <span class="toc-text">16.6.2日期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-6-3%E5%9F%9F%E5%90%8D"><span class="toc-number">16.6.3.</span> <span class="toc-text">16.6.3域名</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-7%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">16.7.</span> <span class="toc-text">16.7更多信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#16-7-1%E9%99%84%E5%BD%95"><span class="toc-number">16.7.1.</span> <span class="toc-text">16.7.1附录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-7-2%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-number">16.7.2.</span> <span class="toc-text">16.7.2互联网的国际化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-7-3%E5%9B%BD%E9%99%85%E6%A0%87%E5%87%86"><span class="toc-number">16.7.3.</span> <span class="toc-text">16.7.3国际标准</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC17%E7%AB%A0-%E5%86%85%E5%AE%B9%E5%8D%8F%E5%95%86%E4%B8%8E%E8%BD%AC%E7%A0%81"><span class="toc-number">17.</span> <span class="toc-text">第17章 内容协商与转码</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#17-1%E5%86%85%E5%AE%B9%E5%8D%8F%E5%95%86%E6%8A%80%E6%9C%AF"><span class="toc-number">17.1.</span> <span class="toc-text">17.1内容协商技术</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-2%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%8D%8F%E5%95%86"><span class="toc-number">17.2.</span> <span class="toc-text">17.2客户端驱动的协商</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-3%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%8D%8F%E5%95%86"><span class="toc-number">17.3.</span> <span class="toc-text">17.3服务器驱动的协商</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#17-3-1%E5%86%85%E5%AE%B9%E5%8D%8F%E5%95%86%E9%A6%96%E9%83%A8%E9%9B%86"><span class="toc-number">17.3.1.</span> <span class="toc-text">17.3.1内容协商首部集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-3-2%E5%86%85%E5%AE%B9%E5%8D%8F%E5%95%86%E9%A6%96%E9%83%A8%E4%B8%AD%E7%9A%84%E8%B4%A8%E9%87%8F%E5%80%BC"><span class="toc-number">17.3.2.</span> <span class="toc-text">17.3.2内容协商首部中的质量值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-3-3%E9%9A%8F%E5%85%B6%E4%BB%96%E9%A6%96%E9%83%A8%E9%9B%86%E8%80%8C%E5%8F%98%E5%8C%96"><span class="toc-number">17.3.3.</span> <span class="toc-text">17.3.3随其他首部集而变化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-3-4-Apache%E4%B8%AD%E7%9A%84%E5%86%85%E5%AE%B9%E5%8D%8F%E5%95%86"><span class="toc-number">17.3.4.</span> <span class="toc-text">17.3.4 Apache中的内容协商</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-3-5%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%89%A9%E5%B1%95"><span class="toc-number">17.3.5.</span> <span class="toc-text">17.3.5服务器端扩展</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-4%E9%80%8F%E6%98%8E%E5%8D%8F%E5%95%86"><span class="toc-number">17.4.</span> <span class="toc-text">17.4透明协商</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#17-4-1%E8%BF%9B%E8%A1%8C%E7%BC%93%E5%AD%98%E4%B8%8E%E5%A4%87%E7%94%A8%E5%80%99%E9%80%89"><span class="toc-number">17.4.1.</span> <span class="toc-text">17.4.1进行缓存与备用候选</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-4-2-Vary%E9%A6%96%E9%83%A8"><span class="toc-number">17.4.2.</span> <span class="toc-text">17.4.2 Vary首部</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-5%E8%BD%AC%E7%A0%81"><span class="toc-number">17.5.</span> <span class="toc-text">17.5转码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#17-5-1%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2"><span class="toc-number">17.5.1.</span> <span class="toc-text">17.5.1格式转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-5-2%E4%BF%A1%E6%81%AF%E7%BB%BC%E5%90%88"><span class="toc-number">17.5.2.</span> <span class="toc-text">17.5.2信息综合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-5-3%E5%86%85%E5%AE%B9%E6%B3%A8%E5%85%A5"><span class="toc-number">17.5.3.</span> <span class="toc-text">17.5.3内容注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-5-4%E8%BD%AC%E7%A0%81%E4%B8%8E%E9%9D%99%E6%80%81%E9%A2%84%E7%94%9F%E6%88%90%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="toc-number">17.5.4.</span> <span class="toc-text">17.5.4转码与静态预生成的对比</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-6%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AE%A1%E5%88%92"><span class="toc-number">17.6.</span> <span class="toc-text">17.6下一步计划</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-7%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">17.7.</span> <span class="toc-text">17.7更多信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC18%E7%AB%A0Web%E4%B8%BB%E6%9C%BA%E6%89%98%E7%AE%A1"><span class="toc-number">18.</span> <span class="toc-text">第18章Web主机托管</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#18-1%E4%B8%BB%E6%9C%BA%E6%89%98%E7%AE%A1%E6%9C%8D%E5%8A%A1"><span class="toc-number">18.1.</span> <span class="toc-text">18.1主机托管服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-2%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA%E6%89%98%E7%AE%A1"><span class="toc-number">18.2.</span> <span class="toc-text">18.2虚拟主机托管</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#18-2-1%E8%99%9A%E6%8B%9F%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%B7%E6%B1%82%E7%BC%BA%E4%B9%8F%E4%B8%BB%E6%9C%BA%E4%BF%A1%E6%81%AF"><span class="toc-number">18.2.1.</span> <span class="toc-text">18.2.1虚拟服务器请求缺乏主机信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-2-2%E8%AE%BE%E6%B3%95%E8%AE%A9%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA%E6%89%98%E7%AE%A1%E6%AD%A3%E5%B8%B8%E5%B7%A5%E4%BD%9C"><span class="toc-number">18.2.2.</span> <span class="toc-text">18.2.2设法让虚拟主机托管正常工作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#18-2-3-HTTP-x2F-1-1%E7%9A%84Host%E9%A6%96%E9%83%A8"><span class="toc-number">18.2.2.1.</span> <span class="toc-text">18.2.3 HTTP&#x2F; 1.1的Host首部</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-3%E4%BD%BF%E7%BD%91%E7%AB%99%E6%9B%B4%E5%8F%AF%E9%9D%A0"><span class="toc-number">18.3.</span> <span class="toc-text">18.3使网站更可靠</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#18-3-1%E9%95%9C%E5%83%8F%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%9B%86%E7%BE%A4"><span class="toc-number">18.3.1.</span> <span class="toc-text">18.3.1镜像的服务器集群</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-3-2%E5%86%85%E5%AE%B9%E5%88%86%E5%8F%91%E7%BD%91%E7%BB%9C"><span class="toc-number">18.3.2.</span> <span class="toc-text">18.3.2内容分发网络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-3-3-CDN%E4%B8%AD%E7%9A%84%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E7%BC%93%E5%AD%98"><span class="toc-number">18.3.3.</span> <span class="toc-text">18.3.3 CDN中的反向代理缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-3-4-CDN%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%90%86%E7%BC%93%E5%AD%98"><span class="toc-number">18.3.4.</span> <span class="toc-text">18.3.4 CDN中的代理缓存</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-4%E8%AE%A9%E7%BD%91%E7%AB%99%E6%9B%B4%E5%BF%AB"><span class="toc-number">18.4.</span> <span class="toc-text">18.4让网站更快</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-5%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">18.5.</span> <span class="toc-text">18.5更多信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC19%E7%AB%A0-%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F"><span class="toc-number">19.</span> <span class="toc-text">第19章 发布系统</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#19-1-FrontPage%E4%B8%BA%E6%94%AF%E6%8C%81%E5%8F%91%E5%B8%83%E8%80%8C%E5%81%9A%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%89%A9%E5%B1%95"><span class="toc-number">19.1.</span> <span class="toc-text">19.1 FrontPage为支持发布而做的服务器扩展</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#19-1-1-FrontPage%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%89%A9%E5%B1%95"><span class="toc-number">19.1.1.</span> <span class="toc-text">19.1.1 FrontPage服务器扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-1-2-FrontPage%E6%9C%AF%E8%AF%AD%E8%A1%A8"><span class="toc-number">19.1.2.</span> <span class="toc-text">19.1.2 FrontPage术语表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-1-3-FrontPage%E7%9A%84RPC%E5%8D%8F%E8%AE%AE"><span class="toc-number">19.1.3.</span> <span class="toc-text">19.1.3 FrontPage的RPC协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-1-4-FrontPage%E7%9A%84%E5%AE%89%E5%85%A8%E6%A8%A1%E5%9E%8B"><span class="toc-number">19.1.4.</span> <span class="toc-text">19.1.4 FrontPage的安全模型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-2-WebDAV%E4%B8%8E%E5%8D%8F%E4%BD%9C%E5%86%99%E4%BD%9C"><span class="toc-number">19.2.</span> <span class="toc-text">19.2 WebDAV与协作写作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-1-WebDAV%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">19.2.1.</span> <span class="toc-text">19.2.1 WebDAV的方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-2-WebDAV%E4%B8%8EXML"><span class="toc-number">19.2.2.</span> <span class="toc-text">19.2.2 WebDAV与XML</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-3-WebDAV%E9%A6%96%E9%83%A8%E9%9B%86"><span class="toc-number">19.2.3.</span> <span class="toc-text">19.2.3 WebDAV首部集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-4-WebDAV%E7%9A%84%E9%94%81%E5%AE%9A%E4%B8%8E%E9%98%B2%E6%AD%A2%E8%A6%86%E5%86%99"><span class="toc-number">19.2.4.</span> <span class="toc-text">19.2.4 WebDAV的锁定与防止覆写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-5-LOCK%E6%96%B9%E6%B3%95"><span class="toc-number">19.2.5.</span> <span class="toc-text">19.2.5 LOCK方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-6-UNLOCK%E6%96%B9%E6%B3%95"><span class="toc-number">19.2.6.</span> <span class="toc-text">19.2.6 UNLOCK方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-7%E5%B1%9E%E6%80%A7%E5%92%8C%E5%85%83%E6%95%B0%E6%8D%AE"><span class="toc-number">19.2.7.</span> <span class="toc-text">19.2.7属性和元数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-8-PROPFIND%E6%96%B9%E6%B3%95"><span class="toc-number">19.2.8.</span> <span class="toc-text">19.2.8 PROPFIND方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-9-PROPPATCH%E6%96%B9%E6%B3%95"><span class="toc-number">19.2.9.</span> <span class="toc-text">19.2.9 PROPPATCH方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-10%E9%9B%86%E5%90%88%E4%B8%8E%E5%90%8D%E5%AD%97%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86"><span class="toc-number">19.2.10.</span> <span class="toc-text">19.2.10集合与名字空间管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-11-MKCOL%E6%96%B9%E6%B3%95"><span class="toc-number">19.2.11.</span> <span class="toc-text">19.2.11 MKCOL方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-12-DELETE%E6%96%B9%E6%B3%95"><span class="toc-number">19.2.12.</span> <span class="toc-text">19.2.12 DELETE方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-13-COPY%E4%B8%8EMOVE%E6%96%B9%E6%B3%95"><span class="toc-number">19.2.13.</span> <span class="toc-text">19.2.13 COPY与MOVE方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#19-2-14%E5%A2%9E%E5%BC%BA%E7%9A%84HTTP-x2F-1-1%E6%96%B9%E6%B3%95"><span class="toc-number">19.2.13.1.</span> <span class="toc-text">19.2.14增强的HTTP&#x2F;1.1方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-15-WebDAV%E4%B8%AD%E7%9A%84%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86"><span class="toc-number">19.2.14.</span> <span class="toc-text">19.2.15 WebDAV中的版本管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-16-WebDAV%E7%9A%84%E6%9C%AA%E6%9D%A5%E5%8F%91%E5%B1%95"><span class="toc-number">19.2.15.</span> <span class="toc-text">19.2.16 WebDAV的未来发展</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-3%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">19.3.</span> <span class="toc-text">19.3更多信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC20%E7%AB%A0-%E9%87%8D%E5%AE%9A%E5%90%91%E4%B8%8E%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1"><span class="toc-number">20.</span> <span class="toc-text">第20章 重定向与负载均衡</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#20-1%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">20.1.</span> <span class="toc-text">20.1为什么要重定向</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-2%E9%87%8D%E5%AE%9A%E5%90%91%E5%88%B0%E4%BD%95%E5%9C%B0"><span class="toc-number">20.2.</span> <span class="toc-text">20.2重定向到何地</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-3%E9%87%8D%E5%AE%9A%E5%90%91%E5%8D%8F%E8%AE%AE%E6%A6%82%E8%A7%88"><span class="toc-number">20.3.</span> <span class="toc-text">20.3重定向协议概览</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-4%E9%80%9A%E7%94%A8%E7%9A%84%E9%87%8D%E5%AE%9A%E5%90%91%E6%96%B9%E6%B3%95"><span class="toc-number">20.4.</span> <span class="toc-text">20.4通用的重定向方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#20-4-1-HTTP%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">20.4.1.</span> <span class="toc-text">20.4.1 HTTP重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-4-2-DNS%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">20.4.2.</span> <span class="toc-text">20.4.2 DNS重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-4-3%E4%BB%BB%E6%92%AD%E5%AF%BB%E5%9D%80"><span class="toc-number">20.4.3.</span> <span class="toc-text">20.4.3任播寻址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-4-4-IP-MAC%E8%BD%AC%E5%8F%91"><span class="toc-number">20.4.4.</span> <span class="toc-text">20.4.4 IP MAC转发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-4-5-IP%E5%9C%B0%E5%9D%80%E8%BD%AC%E5%8F%91"><span class="toc-number">20.4.5.</span> <span class="toc-text">20.4.5 IP地址转发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-4-6%E7%BD%91%E5%85%83%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE"><span class="toc-number">20.4.6.</span> <span class="toc-text">20.4.6网元控制协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-5%E4%BB%A3%E7%90%86%E7%9A%84%E9%87%8D%E5%AE%9A%E5%90%91%E6%96%B9%E6%B3%95"><span class="toc-number">20.5.</span> <span class="toc-text">20.5代理的重定向方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#20-5-1%E6%98%BE%E5%BC%8F%E6%B5%8F%E8%A7%88%E5%99%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">20.5.1.</span> <span class="toc-text">20.5.1显式浏览器配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-5-2%E4%BB%A3%E7%90%86%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">20.5.2.</span> <span class="toc-text">20.5.2代理自动配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-5-3-Web%E4%BB%A3%E7%90%86%E8%87%AA%E5%8A%A8%E5%8F%91%E7%8E%B0%E5%8D%8F%E8%AE%AE"><span class="toc-number">20.5.3.</span> <span class="toc-text">20.5.3 Web代理自动发现协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-6%E7%BC%93%E5%AD%98%E9%87%8D%E5%AE%9A%E5%90%91%E6%96%B9%E6%B3%95"><span class="toc-number">20.6.</span> <span class="toc-text">20.6缓存重定向方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-7%E5%9B%A0%E7%89%B9%E7%BD%91%E7%BC%93%E5%AD%98%E5%8D%8F%E8%AE%AE"><span class="toc-number">20.7.</span> <span class="toc-text">20.7因特网缓存协议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-8%E7%BC%93%E5%AD%98%E9%98%B5%E5%88%97%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE"><span class="toc-number">20.8.</span> <span class="toc-text">20.8缓存阵列路由协议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-9%E8%B6%85%E6%96%87%E6%9C%AC%E7%BC%93%E5%AD%98%E5%8D%8F%E8%AE%AE"><span class="toc-number">20.9.</span> <span class="toc-text">20.9超文本缓存协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#20-9-1-HTCP%E8%AE%A4%E8%AF%81"><span class="toc-number">20.9.1.</span> <span class="toc-text">20.9.1 HTCP认证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-9-2%E8%AE%BE%E7%BD%AE%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5"><span class="toc-number">20.9.2.</span> <span class="toc-text">20.9.2设置缓存策略</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-10%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">20.10.</span> <span class="toc-text">20.10更多信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC21%E7%AB%A0-%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95%E4%B8%8E%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5%E8%B7%9F%E8%B8%AA"><span class="toc-number">21.</span> <span class="toc-text">第21章 日志记录与使用情况跟踪</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#21-1%E8%AE%B0%E5%BD%95%E5%86%85%E5%AE%B9"><span class="toc-number">21.1.</span> <span class="toc-text">21.1记录内容</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-2%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F"><span class="toc-number">21.2.</span> <span class="toc-text">21.2日志格式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-2-1%E5%B8%B8%E8%A7%81%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F"><span class="toc-number">21.2.1.</span> <span class="toc-text">21.2.1常见日志格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-2-2%E7%BB%84%E5%90%88%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F"><span class="toc-number">21.2.2.</span> <span class="toc-text">21.2.2组合日志格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-2-3%E7%BD%91%E6%99%AF%E6%89%A9%E5%B1%95%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F"><span class="toc-number">21.2.3.</span> <span class="toc-text">21.2.3网景扩展日志格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-2-4%E7%BD%91%E6%99%AF%E6%89%A9%E5%B1%952%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F"><span class="toc-number">21.2.4.</span> <span class="toc-text">21.2.4网景扩展2日志格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-2-5-Squid%E4%BB%A3%E7%90%86%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F"><span class="toc-number">21.2.5.</span> <span class="toc-text">21.2.5 Squid代理日志格式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-3%E5%91%BD%E4%B8%AD%E7%8E%87%E6%B5%8B%E9%87%8F"><span class="toc-number">21.3.</span> <span class="toc-text">21.3命中率测量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-3-1%E6%A6%82%E8%BF%B0"><span class="toc-number">21.3.1.</span> <span class="toc-text">21.3.1概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-3-2-Meter%E9%A6%96%E9%83%A8"><span class="toc-number">21.3.2.</span> <span class="toc-text">21.3.2 Meter首部</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-4%E5%85%B3%E4%BA%8E%E9%9A%90%E7%A7%81%E7%9A%84%E8%80%83%E8%99%91"><span class="toc-number">21.4.</span> <span class="toc-text">21.4关于隐私的考虑</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-5%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF"><span class="toc-number">21.5.</span> <span class="toc-text">21.5更多信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E9%83%A8%E5%88%86-%E9%99%84%E5%BD%95"><span class="toc-number">22.</span> <span class="toc-text">第六部分 附录</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%99%84%E5%BD%95A-URI%E6%96%B9%E6%A1%88"><span class="toc-number">23.</span> <span class="toc-text">附录A URI方案</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%99%84%E5%BD%95BHTTP%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-number">24.</span> <span class="toc-text">附录BHTTP状态码</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%99%84%E5%BD%95C-HTTP%E9%A6%96%E9%83%A8%E5%8F%82%E8%80%83"><span class="toc-number">25.</span> <span class="toc-text">附录C HTTP首部参考</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%99%84%E5%BD%95D-MIME%E7%B1%BB%E5%9E%8B"><span class="toc-number">26.</span> <span class="toc-text">附录D MIME类型</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%99%84%E5%BD%95E-Base-64%E7%BC%96%E7%A0%81"><span class="toc-number">27.</span> <span class="toc-text">附录E Base-64编码</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%99%84%E5%BD%95F%E6%91%98%E8%A6%81%E8%AE%A4%E8%AF%81"><span class="toc-number">28.</span> <span class="toc-text">附录F摘要认证</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%99%84%E5%BD%95G%E8%AF%AD%E8%A8%80%E6%A0%87%E8%AE%B0"><span class="toc-number">29.</span> <span class="toc-text">附录G语言标记</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%99%84%E5%BD%95H-MIME%E5%AD%97%E7%AC%A6%E9%9B%86%E6%B3%A8%E5%86%8C%E8%A1%A8"><span class="toc-number">30.</span> <span class="toc-text">附录H MIME字符集注册表</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/12/31/ai/" title="ai"><img src="/img/cover/IMG_2933.JPG" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ai"/></a><div class="content"><a class="title" href="/2022/12/31/ai/" title="ai">ai</a><time datetime="2022-12-31T12:12:20.277Z" title="Updated 2022-12-31 20:12:20">2022-12-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/17/tcpip%E8%AF%A6%E8%A7%A3%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" title="tcpip详解读书笔记"><img src="/img/cover/IMG_3302.JPG" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="tcpip详解读书笔记"/></a><div class="content"><a class="title" href="/2022/12/17/tcpip%E8%AF%A6%E8%A7%A3%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" title="tcpip详解读书笔记">tcpip详解读书笔记</a><time datetime="2022-12-30T03:02:34.287Z" title="Updated 2022-12-30 11:02:34">2022-12-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/09/24/effective-cpp%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" title="effective_cpp读书笔记"><img src="/img/cover/IMG_3357.JPG" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="effective_cpp读书笔记"/></a><div class="content"><a class="title" href="/2022/09/24/effective-cpp%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" title="effective_cpp读书笔记">effective_cpp读书笔记</a><time datetime="2022-12-21T08:23:48.511Z" title="Updated 2022-12-21 16:23:48">2022-12-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/08/insidecpp/" title="insidecpp"><img src="/img/cover/IMG_3032.JPG" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="insidecpp"/></a><div class="content"><a class="title" href="/2022/11/08/insidecpp/" title="insidecpp">insidecpp</a><time datetime="2022-12-21T08:13:03.570Z" title="Updated 2022-12-21 16:13:03">2022-12-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/12/http%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" title="http权威指南读书笔记"><img src="/img/cover/IMG_2617.JPG" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="http权威指南读书笔记"/></a><div class="content"><a class="title" href="/2022/12/12/http%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" title="http权威指南读书笔记">http权威指南读书笔记</a><time datetime="2022-12-21T08:13:03.565Z" title="Updated 2022-12-21 16:13:03">2022-12-21</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Sinos</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container').forEach(node => {
            if (node.hasAttribute('display')) {
              btf.wrap(node, 'div', { class: 'mathjax-overflow' })
            } else {
              btf.wrap(node, 'span', { class: 'mathjax-overflow' })
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hibiki.model.json"},"display":{"position":"right","width":145,"height":315},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false});</script></body></html>